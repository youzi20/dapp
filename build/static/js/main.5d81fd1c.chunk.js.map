{"version":3,"sources":["../ /^/.//.*/.po$/ groupOptions: {} namespace object","state/hooks.ts","state/lang.ts","hooks/lang/index.ts","i18n.tsx","state/wallet.ts","state/user.ts","state/market.ts","utils/index.ts","state/after.ts","state/index.ts","HOC/show.tsx","components/Message/index.tsx","hooks/popover/index.tsx","assets/svg/aave.svg","assets/svg/warning.svg","connectors/index.ts","hooks/wallet/useWeb3ReactCore.ts","hooks/wallet/useEthBalances.ts","hooks/wallet/useWallet.ts","hooks/wallet/types.ts","hooks/wallet/index.ts","styled/index.tsx","assets/wallet/metamask.svg","assets/wallet/walletconnect.svg","assets/wallet/coinbase.svg","assets/wallet/fortmatic.svg","assets/wallet/portis.png","components/Wallet/options.ts","components/Wallet/index.tsx","components/Lang/index.tsx","hooks/contract/addresses.ts","hooks/contract/hooks.ts","hooks/contract/index.ts","hooks/contract/useUserInfo.ts","hooks/contract/useMarketInfo.ts","hooks/contract/reload.ts","components/Icon/index.tsx","components/Tips/index.tsx","components/Button/index.tsx","components/Empty/index.tsx","components/Select/index.tsx","pages/Home/styled.tsx","pages/Home/SupplyPercentage.tsx","pages/Home/BorrowPercentage.tsx","pages/Home/UserInfo.tsx","hooks/enhancedHooks/index.tsx","components/Portal/index.tsx","hooks/contract/erc20.ts","components/Modal/index.tsx","hooks/contract/handle.ts","hooks/after/index.ts","pages/Home/Advanced.tsx","pages/Home/Handle.tsx","pages/Home/Collateral.tsx","pages/Home/Debt.tsx","pages/Home/Control.tsx","components/Table/index.tsx","pages/Home/CoinIcon.tsx","assets/coin/AAVE.svg","assets/coin/BAT.svg","assets/coin/BUSD.svg","assets/coin/DAI.svg","assets/coin/ENJ.svg","assets/coin/ETH.svg","assets/coin/KNCL.svg","assets/coin/LINK.svg","assets/coin/MANA.svg","assets/coin/MKR.svg","assets/coin/REN.svg","assets/coin/SNX.svg","assets/coin/SUSD.svg","assets/coin/TUSD.svg","assets/coin/UNI.svg","assets/coin/USDC.svg","assets/coin/USDT.svg","assets/coin/WBTC.svg","assets/coin/YFI.svg","assets/coin/ZRX.svg","pages/Home/MarketInfo.tsx","pages/Home/index.tsx","pages/App.tsx","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","updateUserLocale","createAction","langReducer","createReducer","locale","builder","addCase","state","action","payload","useActiveLocale","closeUpdate","userLocale","lang","localeRef","useRef","current","useMemo","navigator","language","navigatorLocale","a","messages","i18n","load","activate","LanguageProvider","children","useState","loaded","setLoaded","useEffect","dynamicActivate","catch","error","console","forceRenderOnLocaleChange","WalletStatusEnums","WalletBalancesEnums","initialState","status","OFFLINE","balancesStatus","FINISH","updateStatus","updateBalancesStatus","updateETHBalances","updateNetwork","updateError","wallet","UserStatusEnums","walletReducer","balances","network","address","CREATE","updateState","updateAddress","updateDataInfo","useAddress","user","useUserInfo","dataInfo","MarketStatusEnums","userReducer","entries","forEach","key","value","marketData","marketStatus","INIT","loanData","loanStatus","updateEthPrice","updateMaeketData","updateMarketStatus","updateLoanData","updateLoanStatus","useEthPrice","market","ethPrice","useMarketMap","length","data","sort","b","totalSupply","item","symbol","other","useSupplyMap","marketMap","supply","filter","loanType","price","collateralFactor","liquidationRatio","useBorrowMap","useUserState","borrow","indexOf","totalDebtETH","availableBorrowsETH","totalLoan","Number","priceETH","ratio","stableCoins","useCoinAddress","token","underlyingTokenAddress","useCoinAddressArray","tokens","useTokenInfo","useLiquidationInfo","supplyMap","values","reduce","borrowETH","liquidationETH","marketReducer","stringAndNumber","String","getRatio","number2fixed","fullNumber","getFormatNumber","unit","formatUnits","getWei","parseUnits","accountSplit","account","substring","numberRuler","num","undefined","amount","numberDelimiter","i","j","split","integer","decimal","integerSplit","unshift","join","len","Math","abs","test","exact","valueStr","valueNum","isNaN","strArr","power","powerNum","repeat","ethToPrice","count","ethToPriceTips","countStr","countNum","priceStr","priceUnit","isAddress","getAddress","getContract","ABI","library","AddressZero","Contract","getSigner","connectUnchecked","getProviderOrSigner","abiEncode","type","AbiCoder","encode","getBoostMax","isFirst","val","getHandleTheme","isAdd","loading","useAfterUserInfo","useAfterSupplyMap","borrowMap","useAfterBorrowMap","totalCollateralETH","totalLiquidationETH","totalBorrowETH","after","supplyAmount","totalAmount","supplyRate","rate","borrowAmount","borrowRateVariable","useAfterBorrowRatio","userInfo","afterReducer","PERSISTED_KEYS","store","configureStore","reducer","middleware","getDefaultMiddleware","thunk","concat","save","states","debounce","preloadedState","disableWarnings","process","showDom","WrappedComponent","props","container","document","createElement","body","appendChild","NodeWithShow","unmount","onCloseAfter","React","Component","withShowDom","setTimeout","render","Alert","elevation","variant","Message","propsOpen","open","text","severity","onClose","setOpen","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","icon","message","anchorOriginDefault","transformOriginDefault","usePopover","anchorEl","setAnchorEl","Boolean","Popover","transformOrigin","SUPPORTED_CHAIN_IDS","INFURA_KEY","REACT_APP_INFURA_KEY","PORTIS_DAPP_ID","REACT_APP_PORTIS_DAPP_ID","FORTMATIC_API_KEY","REACT_APP_FORTMATIC_API_KEY","WALLETCONNECT_BRIDGE_URL","REACT_APP_WALLETCONNECT_BRIDGE_URL","NETWORK_URLS","injected","InjectedConnector","supportedChainIds","walletconnect","WalletConnectConnector","infuraId","bridge","qrcode","pollingInterval","walletlink","WalletLinkConnector","url","appName","appLogoUrl","AAVE_SVG","portis","PortisConnector","dAppId","networks","fortmatic","FortmaticConnector","apiKey","chainId","useWeb3ReactCore","useWeb3React","useEthBalances","dispatch","LOADING","getBalance","balance","ERROR","NETWORK_LABELS","useWallet","WalletStatus","active","deactivate","injectedStatus","setInjectedStatus","initRef","tryActivation","connector","log","UnsupportedChainIdError","SUCEESS","isAuthorized","Body","styled","div","Content","width","Font","fontWeight","fontSize","color","align","lineHeight","letterSpacing","Flex","flex","flexDirection","alignItems","justifyContent","Grid","inline","template","columGap","rowGap","TextOverflowWrapper","DropWrapper","DropOption","SUPPORTED_WALLETS","METAMASK","name","iconURL","MetaMaskIcon","FORTMATIC","FortmaticIcon","WALLETCONNECT","WalletConnectIcon","COINBASE","CoinbaseIcon","PORTIS","PortisIcon","WalletButton","WalletAddress","WalletAccount","WalletNetwork","WalletIcon","defaultOptions","WalletInfo","handleOpen","useWalletState","onClick","src","Wallet","options","setActive","currentTarget","style","marginTop","option","className","alt","WalletManager","setMessage","setSeverity","showMessage","SupportedChainId","LangButton","LANG_LIST","Lang","window","location","reload","constructSameAddressMap","MAINNET","ROPSTEN","RINKEBY","GOERLI","KOVAN","BAT","UNI","DAI","USDT","USDC","WBTC","FEI","TRIBE","FRAX","FXS","renBTC","UMA","UST","MIR","AAVE_MARKET","UNISWAP_WRAPPER","MARKET_ADDRESS","USER_INFO_ADDRESS","USER_HANDLE_ADDRESS","USER_HANDLE_OTHER_ADDRESS","contractMap","ERC20","abi","MARKET","MARKET_ABI","USER_INFO","USER_INFO_ABI","USER_HANDLE","USER_HANDLE_ABI","USER_HANDLE_OTHER","USER_HANDLE_OTHER_ABI","SMART_WALLET","SMART_WALLET_ABI","tokenMap","useAddressAndABI","useTokenAddress","addressMap","hasOwnProperty","useFuncEncode","methodName","contractInterface","Interface","fragment","getFunction","encodeFunctionData","useContract","contractKey","otherAddress","withSignerIfPossible","UserStatusEnmus","useMarketContract","useUserInfoContract","useSmartWalletContract","useERC20Contract","useProxies","userInfoContract","proxies","SUCCESS","useMarketData","marketAddress","marketInfoContract","getAaveMarketInfo","totalBorrow","borrowRateStable","availableLiquidity","aTokenAddress","usageAsCollateralEnabled","stableBorrowRateEnabled","borrowinEnabled","toLocaleUpperCase","useUserData","getUserLoanData","loan","getUserAccountData","currentLiquidationThreshold","healthFactor","useTokenPrice","setLoading","prices","setPrices","getTokenPrice","getPrices","Array","useReload","userData","Base","propsName","isHover","setName","xlinkHref","IconWrapper","LoadingIcon","Icon","background","link","blank","href","target","TipsWrapper","TipsInfoWrapper","Tips","Tooltip","title","placement","TipsInfo","TipsPrice","priceTips","Util","Text","ButtonWrapper","theme","ThemeList","primary","gray","buy","sell","Button","disabled","marginRight","EmptyWrapper","NoDataWrapper","EmptyLoading","marginBottom","EmptyNoData","selectDefaultDatasource","dataSource","selectDefaultValue","defaultValue","SelectStyle","height","SelectValueStyle","OptionWrapper","OptionItemList","OptionItemWrapper","OptionItem","Select","propsDataSource","propsDefaultValue","propsValue","optionItemRender","optionPopoverProps","onChange","setDataSource","setValue","handleChange","margin","isValidElement","cloneElement","TabPanelGrid","PercentageGraphConetnt","PercentageGraphWrapper","size","PercentageGraphItem","PercentageGraphLabel","PercentagePointWrapper","left","HandleText","HandleWrapper","InputControl","SelectControl","EmptyContainer","InputMaxWrapper","APYWrapper","APYItemWrapper","InputMax","max","SelectEmpty","SelectOptionItem","APYSelect","stable","SupplyPercentage","useAfterState","supplyRatio","useSupplyRatio","afterSupplyRatio","useAfterSupplyRatio","ratioText","usePercentageInfo","totalPercent","percent","percentText","percentPrice","PercentagePoint","tips","BorrowPercentage","afterTotalDebtETH","borrowRatio","useBorrowRatio","afterBorrowRatio","afterMax","afterTotalPercent","afterPercentText","afterPercentPrice","SwiperCore","use","Pagination","Wrapper","WalletHeader","WalletBody","SupplyBalance","BorrowBlance","DataBoxWrapper","GraphBoxWrapper","DataItemWrapper","LabelItemWrapper","SwiperWrapper","Swiper","SwiperSlideWrapper","HighlightedWrapper","Loading","Create","build","useBuild","padding","res","wait","Label","Ratio","DataItem","label","quantity","afterValue","LabelItem","display","Info","afterTotalCollateralETH","afterRatio","afterLiquidationRatio","afterProps","loop","pagination","clickable","UserInfo","useEnhancedEffect","useLayoutEffect","Portal","disablePortal","mountNode","setMountNode","getContainer","createPortal","StatusEnums","ModalWrapper","ModalContent","ModalTitle","ModalBody","ModalFooter","ModalWrap","cancelButtonProps","confirmButtonProps","Modal","offchainData","useReloadAfter","useAdvancedAfter","tokenAddressArray","reloadAfter","afterType","from","to","fromPrice","toPrice","toAmount","fromInfo","toInfo","change","useCollateralAfter","tokenAddress","useDebtAfter","SelectRender","Handle","labelText","labelTips","leftText","rightText","coins","selectText","inputValue","selectValue","selectOptionItemRender","buttonProps","onInputChange","onSelectChange","setTokens","fromCoins","toCoins","isDisabled","handleInputChange","handleSelectChange","placeholder","maxHeight","select","click","Boost","handle","setAmount","useStableCoins","otherCoins","useOtherCoins","onReload","BoostModal","apy","setApy","priceLoading","tradeInfo","amountNumber","amountTips","amountCount","tokenCount","fromCount","toCount","boost","minPrice","uniswapAddress","smartWalletContract","fromAddress","toAddress","uniswapWrapper","exchangeData","userHandleBoostEncode","execute","useBoost","Repay","supplyCoins","boorowCoins","fromToeknInfo","toToeknInfo","fromEthPrice","fromAmount","toEthPrice","getRepayMax","RepayModal","repay","userHandleRepayEncode","useRepay","Advanced","useTokenBalances","setStaus","setBalance","erc20Contract","getTokenBalance","balanceOf","isAuthorize","setToken","approve","MaxUint256","useApprove","allowance","setAllowance","getAllowanceValue","useAllowance","reloadAllowance","isShowAuthorizeBtn","Supply","loadingButton","setLoadingButton","useSupplyCoins","ethStatus","ethBalances","supplyStatus","supplayBalances","reloadTokenBalances","TokenStatusEnums","deposit","aaveAddress","userHandleDepositEncode","isGas","estimateGas","useDeposit","handleClick","Withdraw","totalCollateral","totalDebt","prev","getWithdrawMax","withdraw","userHandleWithdrawEncode","useWithdraw","Collateral","WarnWrapper","Borrow","borrowCoins","useBorrowCoins","userHandleBorrowEncode","useBorrow","maxWidth","WARNING_SVG","Payback","payback","userHandlePaybackEncode","usePayback","Debt","ContorlWrapper","TabWrapper","TabTitle","TabPanel","Tab","propsActive","content","Control","TableContext","createContext","TableWrapper","TableRow","border","TableHeader","TableBody","TableColumnWrapper","TableAfter","bg","TableColumn","first","dataKey","useContext","header","index","Table","afterBg","afterColor","afterSource","Provider","ICON_DATA","CoinIconStyle","CoinIcon","icon_url","Title","renderCoinIcon","renderRatioText","renderAmountTips","renderPriceTips","renderRatioTips","MarketInfo","getTableTheme","supplyData","borrowData","afterSupply","afterSupplyMap","useAfterSupply","afterBorrow","afterBorrowMap","useAfterBorrow","_","__","opacity","renderRatioDisabledTips","renderSupplyTips","circulate","renderApplyTips","HomeWrapper","TitleWrapper","TitleAction","Home","reset","updateMarketState","updateUserState","useReset","fetch","json","useMarketInit","getLibrary","provider","Web3Provider","withRouter","path","component","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5d81fd1c.chunk.js","sourcesContent":["var map = {\n\t\"./en-US.po\": [\n\t\t189,\n\t\t9\n\t],\n\t\"./zh-CN.po\": [\n\t\t190,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 160;\nmodule.exports = webpackAsyncContext;","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport { AppDispatch, AppState } from './index';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<AppState> = useSelector;","import { createReducer, createAction } from '@reduxjs/toolkit';\n\nimport { SupportedLocale } from '../hooks/lang';\n\nimport { AppState } from './index';\nimport { useAppSelector } from './hooks';\n\n\n\ninterface LangState {\n    readonly locale: SupportedLocale | null\n}\n\nconst initialState: LangState = {\n    locale: null,\n}\n\nexport const updateUserLocale = createAction<SupportedLocale | null>('lang/updateUserLocale');\n\nexport function useUserLocale(): SupportedLocale | null {\n    return useAppSelector((state: AppState) => state.lang.locale);\n}\n\nexport const langReducer = createReducer(initialState, (builder) =>\n    builder\n        .addCase(updateUserLocale, (state, action) => {\n            state.locale = action.payload;\n        })\n);","import { useMemo, useRef } from \"react\";\nimport { useUserLocale } from \"../../state/lang\";\n\n\n\nexport const SUPPORTED_LOCALES = [\n    'en-US',\n    'zh-CN',\n] as const\n\nexport type SupportedLocale = typeof SUPPORTED_LOCALES[number];\n\nexport const DEFAULT_LOCALE: SupportedLocale = 'zh-CN';\n\nexport function navigatorLocale(): SupportedLocale | undefined {\n    if (!navigator.language) return undefined\n\n    // @ts-ignore\n    return navigator.language;\n}\n\nexport function useActiveLocale(closeUpdate?: boolean): SupportedLocale {\n    const userLocale = useUserLocale()\n\n    const localeRef = useRef<SupportedLocale>();\n\n    localeRef.current = useMemo(() => {\n        if (closeUpdate && localeRef.current) return localeRef.current;\n\n        return userLocale ?? navigatorLocale() ?? DEFAULT_LOCALE;\n    }, [userLocale])\n\n    return localeRef.current;\n}","import React, { useState, useEffect } from 'react';\nimport { I18nProvider } from '@lingui/react';\nimport { i18n } from '@lingui/core';\n\nimport { SupportedLocale, useActiveLocale } from './hooks/lang';\n\n\nasync function dynamicActivate(locale: SupportedLocale) {\n    const { messages } = await import(`@lingui/loader!./locales/${locale}.po`)\n    // i18n.loadLocaleData(locale, { plurals: () => plurals[locale] })\n    i18n.load(locale, messages);\n    i18n.activate(locale);\n}\n\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\n    const locale = useActiveLocale(true);\n    const [loaded, setLoaded] = useState(false);\n\n    useEffect(() => {\n        dynamicActivate(locale)\n            .then(() => {\n                setLoaded(true)\n            })\n            .catch((error) => {\n                console.error('Failed to activate locale', locale, error)\n            })\n    }, [locale])\n\n    if (!loaded) return null;\n\n    return (\n        <I18nProvider forceRenderOnLocaleChange={false} i18n={i18n}>\n            {children}\n        </I18nProvider>\n    )\n}","import { createReducer, createAction } from '@reduxjs/toolkit';\nimport { AppState } from './index';\nimport { useAppSelector } from './hooks';\nimport React from 'react';\n\n\nexport enum WalletStatusEnums {\n    OFFLINE,\n    LOADING,\n    SUCEESS,\n}\n\nexport enum WalletBalancesEnums {\n    FINISH,\n    LOADING,\n    ERROR,\n}\n\ninterface WalletState {\n    readonly status: WalletStatusEnums\n    readonly balancesStatus: WalletBalancesEnums\n    readonly balances?: string\n    readonly network?: string\n    readonly error?: string | React.ReactNode\n}\n\nconst initialState: WalletState = {\n    status: WalletStatusEnums.OFFLINE,\n    balancesStatus: WalletBalancesEnums.FINISH,\n}\n\nexport const updateStatus = createAction<WalletStatusEnums>('wallet/updateStatus');\nexport const updateBalancesStatus = createAction<WalletBalancesEnums>('wallet/updateBalancesStatus');\nexport const updateETHBalances = createAction<string>('wallet/updateETHBalances');\nexport const updateNetwork = createAction<string>('wallet/updateNetwork');\nexport const updateError = createAction<string | React.ReactNode>('wallet/updateError');\n\nexport function useState(): WalletState {\n    return useAppSelector((state: AppState) => state.wallet);\n}\n\nexport function useETHBalances(): string | undefined {\n    return useAppSelector((state: AppState) => state.wallet.balances)\n}\n\nexport const walletReducer = createReducer(initialState, (builder) =>\n    builder\n        .addCase(updateStatus, (state, action) => {\n            state.status = action.payload;\n        })\n        .addCase(updateBalancesStatus, (state, action) => {\n            state.balancesStatus = action.payload;\n        })\n        .addCase(updateETHBalances, (state, action) => {\n            state.balances = action.payload;\n        })\n        .addCase(updateNetwork, (state, action) => {\n            state.network = action.payload;\n        })\n        .addCase(updateError, (state, action) => {\n            state.error = action.payload;\n        })\n);","import { createReducer, createAction } from '@reduxjs/toolkit';\nimport { AppState } from './index';\nimport { useAppDispatch, useAppSelector } from './hooks';\n\n\nexport enum UserStatusEnums {\n    CREATE,\n    LOADING,\n    SUCCESS,\n    ERROR,\n}\n\ninterface UserState {\n    readonly address: string | null\n    readonly status: UserStatusEnums\n    readonly dataInfo?: any\n}\n\nconst initialState: UserState = {\n    address: null,\n    status: UserStatusEnums.CREATE\n}\n\nexport const updateState = createAction<UserState | undefined>('user/updateState');\nexport const updateAddress = createAction<string>('user/updateAddress');\nexport const updateStatus = createAction<UserStatusEnums>('user/updateStatus');\nexport const updateDataInfo = createAction<any>('user/updateDataInfo');\n\nexport function useAddress(): string | null {\n    return useAppSelector((state: AppState) => state.user.address);\n}\n\nexport function useUserInfo(): any {\n    return useAppSelector((state: AppState) => state.user.dataInfo);\n}\n\nexport function useState(): UserState {\n    return useAppSelector((state: AppState) => state.user);\n}\n\nexport const userReducer = createReducer(initialState, (builder) =>\n    builder\n        .addCase(updateState, (state, action) => {\n            Object.entries(action.payload ?? initialState).forEach(([key, value]) => {\n                // @ts-ignore\n                state[key] = value;\n            });\n        })\n        .addCase(updateAddress, (state, action) => {\n            state.address = action.payload;\n        })\n        .addCase(updateStatus, (state, action) => {\n            state.status = action.payload;\n        })\n        .addCase(updateDataInfo, (state, action) => {\n            state.dataInfo = action.payload;\n        })\n);","import { useMemo } from 'react';\nimport { createReducer, createAction } from '@reduxjs/toolkit';\n\nimport { TokenMapKey } from '../hooks/contract/hooks';\n\nimport { AppState } from './index';\nimport { useAppDispatch, useAppSelector } from './hooks';\n\nimport { useState as useUserState } from './user';\n\nexport enum MarketStatusEnums {\n    INIT,\n    LOADING,\n    SUCCESS,\n    ERROR,\n}\n\ninterface MarketState {\n    readonly marketData: any[]\n    readonly marketStatus: MarketStatusEnums\n    readonly loanData: any[]\n    readonly loanStatus: MarketStatusEnums\n    readonly ethPrice?: number,\n}\n\nconst initialState: MarketState = {\n    marketData: [],\n    marketStatus: MarketStatusEnums.INIT,\n    loanData: [],\n    loanStatus: MarketStatusEnums.INIT\n}\n\nexport const updateState = createAction<MarketState | undefined>('market/updateState');\nexport const updateEthPrice = createAction<number | undefined>('market/updateEthPrice');\nexport const updateMaeketData = createAction<any[]>('market/updateMaeketData');\nexport const updateMarketStatus = createAction<MarketStatusEnums>('market/updateMarketStatus');\nexport const updateLoanData = createAction<any[]>('market/updateLoanData');\nexport const updateLoanStatus = createAction<MarketStatusEnums>('market/updateLoanStatus');\n\n// loanType: 1 质押 2 固定汇率贷款 3 动态汇率贷款\nexport function useEthPrice(): number | undefined {\n    return useAppSelector((state: AppState) => state.market.ethPrice);\n}\n\nexport function useMarketMap(): { [k: string]: any } | null {\n    const market = useAppSelector((state: AppState) => state.market.marketData);\n\n    return useMemo(() => {\n        if (!market?.length) return null;\n\n        const data: { [k: string]: any } = {};\n\n        [...market].sort((a, b) => b.totalSupply - a.totalSupply).forEach((item: any) => {\n            const { symbol, ...other } = item;\n\n            if (symbol === \"WETH\") {\n                data[\"ETH\"] = { symbol: \"ETH\", ...other }\n            } else {\n                data[symbol] = item;\n            }\n        });\n\n        return data;\n    }, [market]);\n}\n\nexport function useSupplyMap(): { [k: string]: any } | null {\n    const marketMap = useMarketMap();\n    const supply = useAppSelector((state: AppState) => state.market.loanData.filter((item: any) => item.loanType === 1));\n\n    return useMemo(() => {\n        if (!marketMap || !supply?.length) return null;\n\n        const data: { [k: string]: any } = {};\n\n        supply.forEach((item: any) => {\n            const { symbol } = item;\n\n            const { price, collateralFactor, liquidationRatio } = marketMap[symbol];\n\n            data[symbol] = {\n                ...item,\n                price,\n                collateralFactor,\n                liquidationRatio,\n            };\n        });\n\n        return data;\n    }, [marketMap, supply]);\n}\n\nexport function useBorrowMap(): { [k: string]: any } | null {\n    const { dataInfo } = useUserState();\n    const marketMap = useMarketMap();\n    const borrow = useAppSelector((state: AppState) => state.market.loanData.filter((item: any) => [2, 3].indexOf(item.loanType) >= 0));\n\n    return useMemo(() => {\n        if (!dataInfo || !marketMap || !borrow?.length) return null;\n\n        const data: { [k: string]: any } = {};\n\n        const { totalDebtETH, availableBorrowsETH } = dataInfo\n\n        const totalLoan = Number(totalDebtETH) + Number(availableBorrowsETH);\n\n        borrow.forEach((item: any) => {\n            const { symbol, priceETH, loanType } = item;\n\n            const { price, collateralFactor, liquidationRatio } = marketMap[symbol];\n\n            data[`${symbol}_${loanType}`] = {\n                ...item,\n                ratio: priceETH / totalLoan,\n                price,\n                collateralFactor,\n                liquidationRatio,\n            };\n        });\n        return data;\n    }, [marketMap, borrow, dataInfo]);\n}\n\nexport function useSupplyRatio(): any[] | null {\n    const { dataInfo } = useUserState();\n    const supplyMap = useSupplyMap();\n\n    return useMemo(() => {\n        if (!dataInfo || !supplyMap) return null;\n\n        const { totalCollateralETH } = dataInfo\n\n        return Object.values(supplyMap).map((item: any) => ({\n            ratio: item.priceETH / totalCollateralETH,\n            symbol: item.symbol,\n            amount: item.amount,\n        })).sort((a, b) => b.ratio - a.ratio)\n    }, [dataInfo, supplyMap]);\n}\n\nexport function useBorrowRatio(): any[] | null {\n    const borrowMap = useBorrowMap();\n\n    return useMemo(() => {\n        if (!borrowMap) return null;\n\n        return Object.values(borrowMap).map((item: any) => ({\n            ratio: item.ratio,\n            symbol: item.symbol,\n            amount: item.amount,\n        })).sort((a, b) => b.ratio - a.ratio)\n    }, [borrowMap]);\n}\n\nconst stableCoins = [\"DAI\", \"USDT\", \"USDC\", \"BUSD\", \"TUSD\", \"SUSD\"];\n\nexport function useStableCoins() {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap) return null;\n\n        return Object.values(marketMap)\n            .filter((item: any) => item.borrowinEnabled && stableCoins.indexOf(item.symbol) >= 0)\n            .map(item => item.symbol);\n    }, [marketMap]);\n}\n\nexport function useOtherCoins() {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap) return null;\n\n        return Object.values(marketMap)\n            .filter((item: any) => item.usageAsCollateralEnabled && stableCoins.indexOf(item.symbol) < 0)\n            .map(item => item.symbol);\n    }, [marketMap]);\n}\n\nexport function useCoinAddress(token?: string | null): string {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap || !token) return;\n\n        if (token === \"ETH\") {\n            return \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\";\n        }\n\n        return marketMap[token].underlyingTokenAddress;\n    }, [marketMap, token]);\n}\n\nexport function useCoinAddressArray(tokens?: string[]): string[] | undefined {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap || !tokens || !tokens?.length) return;\n\n        return tokens.map(item => {\n            if (item === \"ETH\") {\n                return \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\";\n            }\n\n            return marketMap[item] ? marketMap[item].underlyingTokenAddress : null\n        });\n    }, [marketMap, tokens]);\n}\n\nexport function useTokenInfo(token?: TokenMapKey | string): any {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => token && marketMap ? marketMap[token] : null, [token, marketMap]);\n}\n\nexport function useSupplyCoins() {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap) return null;\n\n        return Object.values(marketMap).filter(item => item.usageAsCollateralEnabled).map(item => item.symbol);\n    }, [marketMap]);\n}\n\nexport function useBorrowCoins() {\n    const marketMap = useMarketMap();\n\n    return useMemo(() => {\n        if (!marketMap) return null;\n\n        return Object.values(marketMap).filter(item => item.borrowinEnabled).map(item => item.symbol);\n    }, [marketMap]);\n}\n\nexport function useLiquidationInfo() {\n    const marketMap = useMarketMap();\n    const supplyMap = useSupplyMap();\n\n    return useMemo(() => {\n        if (!marketMap || !supplyMap) return null;\n\n        return Object.values(supplyMap).reduce(([borrowETH, liquidationETH], current) => {\n            const { symbol, priceETH } = current;\n            const { collateralFactor, liquidationRatio } = marketMap[symbol];\n\n            return [borrowETH + priceETH * collateralFactor, liquidationETH + priceETH * liquidationRatio]\n        }, [0, 0]);\n    }, [marketMap, supplyMap]);\n}\n\nexport function useState(): MarketState {\n    return useAppSelector((state: AppState) => state.market);\n}\n\nexport const marketReducer = createReducer(initialState, (builder) =>\n    builder\n        .addCase(updateState, (state, action) => {\n            Object.entries(action.payload ?? initialState).forEach(([key, value]) => {\n                // @ts-ignore\n                state[key] = value;\n            });\n        })\n        .addCase(updateEthPrice, (state, action) => {\n            state.ethPrice = action.payload;\n        })\n        .addCase(updateMarketStatus, (state, action) => {\n            state.marketStatus = action.payload;\n        })\n        .addCase(updateLoanStatus, (state, action) => {\n            state.loanStatus = action.payload;\n        })\n        .addCase(updateMaeketData, (state, action) => {\n            state.marketData = [...action.payload];\n        })\n        .addCase(updateLoanData, (state, action) => {\n            state.loanData = [...action.payload];\n        })\n)\n","import { getAddress } from '@ethersproject/address';\nimport { AddressZero } from '@ethersproject/constants';\nimport { Contract } from '@ethersproject/contracts';\nimport { JsonRpcSigner, Web3Provider } from '@ethersproject/providers';\nimport { AbiCoder } from '@ethersproject/abi';\nimport { formatUnits, parseUnits } from '@ethersproject/units';\n\nimport { Unit, HandleType } from '../types';\n\nexport function stringAndNumber(value: number | string): [string, number] {\n    return typeof value === \"number\" ? [String(value), value] : [value, Number(value)];\n}\n\nexport function getRatio(value?: number): string {\n    return (number2fixed(fullNumber(value), 2) ?? \"0\") + \"%\";\n}\n\nexport function getFormatNumber(value: number | string, unit?: Unit | number) {\n    return formatUnits(value, unit ?? \"ether\");\n}\n\nexport function getWei(value: any, unit?: Unit) {\n    return parseUnits(value, unit ?? \"ether\");\n}\n\nexport function toFixed(value?: number) {\n    if (value) return value.toFixed(2);\n    return 0;\n}\n\nexport function accountSplit(account?: string | null): string {\n    if (!account) return \"\";\n    if (account.length < 15) return account;\n\n    const start = account.substring(0, 8);\n    const end = account.substring(account.length - 4);\n\n    return start + \"...\" + end;\n}\n\nexport function numberUnit(num: number): [number, string | undefined] {\n    if (num > 1e12) {\n        return [num / 1e12, \"T\"];\n    } else if (num > 1e9) {\n        return [num / 1e9, \"B\"];\n    } else if (num > 1e6) {\n        return [num / 1e6, \"M\"];\n    } else if (num > 1e3) {\n        return [num / 1e3, \"K\"];\n    } else {\n        return [num, undefined]\n    }\n}\n\nexport function numberRuler(value?: string | number) {\n    if (!value) return;\n\n    if (typeof value === \"string\") value = Number(value);\n\n    const [amount, unit] = numberUnit(value);\n\n    return (number2fixed(amount) ?? \"\") + (unit ?? \"\");\n}\n\nexport function numberDelimiter(value?: string) {\n    if (!value) return;\n\n    if (Number(value) > 1e3) {\n        const [integer, decimal] = value.split(\".\");\n\n        const integerSplit = [];\n\n        let i, j;\n        for (j = integer.length, i = j - 3; i > 0; i -= 3) {\n\n            integerSplit.unshift(integer.substring(i, j));\n            j = i;\n        }\n\n        integerSplit.unshift(integer.substring(i, j));\n\n        return integerSplit.join(\",\") + (decimal ? \".\" + decimal : \"\");\n    } else {\n        return fullNumber(value);\n    }\n}\n\nexport function number2fixed(value?: string | number, len?: number) {\n    if (!value) return \"0\";\n\n    if (typeof value === \"number\") value = String(value);\n\n    var [integer, decimal] = value.split(/\\./);\n\n    if (!decimal) return value;\n\n    if (len) {\n        decimal = decimal.substring(0, len);\n    } else if (Math.abs(Number(value)) >= 1e-2) {\n        decimal = decimal.substring(0, 2);\n    } else if (Math.abs(Number(value)) >= 1e-4) {\n        decimal = decimal.substring(0, 4);\n    } else {\n        decimal = \"0\";\n    }\n\n    if (/^0+$/.test(decimal)) return integer;\n\n    return `${integer}.${decimal}`;\n}\n\nexport function fullNumber(value?: string | number, exact?: boolean) {\n    if (!value) return;\n\n    const [valueStr, valueNum] = stringAndNumber(value);\n\n    if (valueNum === 0) return \"0\";\n\n    if (isNaN(valueNum)) return \"NaN\";\n\n    if (!/e/i.test(valueStr)) return valueStr;\n\n    const strArr = valueStr.split(/[.\\e]/);\n\n    if (strArr.length === 3) {\n        var [integer, decimal, power] = strArr;\n    } else {\n        var [integer, power] = strArr;\n    }\n\n    const powerNum = Number(power);\n\n    if (powerNum > 0) {\n        return `${integer}${decimal ?? \"\"}${\"0\".repeat(Math.abs(powerNum) - decimal?.length ?? 0)}`;\n    } else {\n        return `0.${\"0\".repeat(Math.abs(powerNum) - integer?.length ?? 0)}${integer}${decimal ?? \"\"}`;\n    }\n}\n\nexport function ethToPrice(count?: number, price?: number): string[] {\n    if (!count) return [\"0\", \"$\"];\n    if (!price) return [String(count), \"ETH\"];\n\n    return [fullNumber(count * price) ?? \"\", \"$\"];\n}\n\nexport function ethToPriceTips(count?: string | number, price?: number): string[] {\n    if (!count) return [\"0\", \"0\", \"$\"];\n\n    const [countStr, countNum] = stringAndNumber(count);\n\n    if (!price) return [numberDelimiter(number2fixed(countStr)) ?? \"\", numberDelimiter(countStr) ?? \"\", \"ETH\"];\n\n    const [priceStr, priceUnit] = ethToPrice(countNum, price);\n\n    return [numberDelimiter(number2fixed(priceStr)) ?? \"\", numberDelimiter(priceStr) ?? \"\", priceUnit];\n}\n\nexport function isAddress(value: any): string | false {\n    try {\n        return getAddress(value)\n    } catch {\n        return false\n    }\n}\n\nexport function isInvalidAddress(value: string): boolean {\n    const invalid = [\"0x0000000000000000000000000000000000000000\"];\n\n    if (isAddress(value) && invalid.indexOf(value) < 0) return false;\n\n    return true;\n}\n\nexport function getContainer(container: any) {\n    return typeof container === 'function' ? container() : container;\n}\n\n// account is not optional\nexport function getSigner(library: Web3Provider, account: string): JsonRpcSigner {\n    return library.getSigner(account).connectUnchecked()\n}\n\n// account is optional\nexport function getProviderOrSigner(library: Web3Provider, account?: string): Web3Provider | JsonRpcSigner {\n    return account ? getSigner(library, account) : library\n}\n\n// account is optional\nexport function getContract(address: string, ABI: any, library: Web3Provider, account?: string): Contract {\n    if (!isAddress(address) || address === AddressZero) {\n        throw Error(`Invalid 'address' parameter '${address}'.`)\n    }\n\n    return new Contract(address, ABI, getProviderOrSigner(library, account) as any)\n}\n\nexport function abiEncode(type: any, value: any) {\n    const Abi = new AbiCoder();\n\n    return Abi.encode(type, value);\n}\n\nexport function getBoostMax(value: number, ratio: number, isFirst?: boolean): number {\n    if (!value || !ratio) return value;\n\n    if (isFirst) {\n        return value + getBoostMax(value, ratio);\n    } else {\n        const val = value * ratio;\n        if (val <= 1e-5) return 0;\n\n        return val + getBoostMax(val, ratio);\n    }\n}\n\nexport function getRepayMax(from: any, to: any) {\n    const { priceETH: fromEthPrice, amount: fromAmount, price } = from;\n    const { priceETH: toEthPrice } = to;\n\n    if (fromEthPrice <= toEthPrice) return fromAmount;\n\n    const max = toEthPrice / price * 1.02;\n\n    return fullNumber(max > fromAmount ? fromAmount : max);\n}\n\nexport function getWithdrawMax(supplyMap: any, token: string, totalCollateral: number, totalDebt: number) {\n    const totalSupply = Object.values(supplyMap).reduce((prev: number, item: any) => {\n        if (item.symbol === token) return prev;\n\n        return prev + item.priceETH * item.liquidationRatio;\n    }, 0);\n\n    const { amount, price, priceETH, liquidationRatio } = supplyMap[token];\n\n    if (totalSupply >= totalDebt) return amount;\n\n    return fullNumber((priceETH - (totalDebt - totalSupply) / liquidationRatio * 1.01) / price);\n}\n\nexport function getHandleTheme(type?: HandleType) {\n    if (!type) return;\n\n    if ([\"Boost\", \"Supply\", \"Borrow\"].indexOf(type) >= 0) return \"#14bd88\";\n    if ([\"Repay\", \"Withdraw\", \"Payback\"].indexOf(type) >= 0) return \"#cc5e47\";\n}\n\nexport function getTableTheme(type?: HandleType) {\n    if (!type) return;\n\n    if ([\"Boost\", \"Supply\", \"Borrow\"].indexOf(type) >= 0) return [\"#1e5a48\", \"#14bd88\"];\n    if ([\"Repay\", \"Withdraw\", \"Payback\"].indexOf(type) >= 0) return [\"#714238\", \"#cc5e47\"];\n}","import { useMemo } from 'react';\nimport { createReducer, createAction } from '@reduxjs/toolkit';\n\nimport { AppState } from './index';\nimport { useAppDispatch, useAppSelector } from './hooks';\nimport { useMarketMap, useSupplyMap, useBorrowMap } from './market';\n\nimport { HandleType } from '../types';\nimport { fullNumber } from '../utils';\n\nconst isAdd = (type: HandleType) => {\n    if ([\"Boost\", \"Supply\", \"Borrow\"].indexOf(type) >= 0) return true;\n    if ([\"Repay\", \"Withdraw\", \"Payback\"].indexOf(type) >= 0) return false;\n}\n\ninterface AfterState {\n    readonly loading: boolean\n    readonly type?: HandleType\n    readonly supply?: {\n        symbol: string\n        amount: string\n        price: string\n    }\n    readonly borrow?: {\n        symbol: string\n        amount: string\n        price: string\n    }\n}\n\nconst initialState: AfterState = {\n    loading: false,\n    supply: undefined,\n    borrow: undefined,\n}\n\nexport const updateLoading = createAction<boolean>('after/updateLoading');\nexport const updateState = createAction<AfterState | undefined>('after/updateState');\n\nexport function useAfterUserInfo() {\n    const supplyMap = useAfterSupplyMap();\n    const borrowMap = useAfterBorrowMap();\n\n    return useMemo(() => {\n        let totalCollateralETH = 0, totalLiquidationETH = 0, totalDebtETH = 0, totalBorrowETH = 0;\n\n        if (supplyMap) {\n            Object.values(supplyMap).forEach((item) => {\n                totalCollateralETH += Number(item.priceETH);\n                totalBorrowETH += Number(item.priceETH) * Number(item.collateralFactor);\n                totalLiquidationETH += Number(item.priceETH) * Number(item.liquidationRatio);\n            });\n        }\n\n        if (borrowMap) {\n            Object.values(borrowMap).forEach((item) => {\n                totalDebtETH += Number(item.priceETH);\n            });\n        }\n\n        return {\n            totalDebtETH,\n            totalBorrowETH,\n            totalCollateralETH,\n            totalLiquidationETH\n        }\n    }, [supplyMap, borrowMap]);\n}\n\nexport function useAfterSupplyMap() {\n    const marketMap = useMarketMap();\n    const supplyMap = useSupplyMap();\n\n    const { type, supply } = useAppSelector((state: AppState) => state.after);\n\n    return useMemo(() => {\n        if (!type || !marketMap || !supplyMap) return null;\n\n        if (!supply) return supplyMap;\n\n        const { symbol, amount, price } = supply;\n\n        if (supplyMap[symbol]) {\n            const { amount: supplyAmount, price: supplyPrice, priceETH: supplyPriceETH, ...other } = supplyMap[symbol];\n\n            const totalAmount = Number(supplyAmount) + (isAdd(type) ? 1 : -1) * Number(amount);\n\n            supplyMap[symbol] = {\n                price,\n                amount: fullNumber(totalAmount),\n                priceETH: fullNumber(totalAmount * Number(price)),\n                ...other\n            }\n        } else if (marketMap[symbol]) {\n            const { supplyRate, collateralFactor, liquidationRatio } = marketMap[symbol];\n\n            supplyMap[symbol] = {\n                price,\n                amount,\n                symbol,\n                collateralFactor,\n                liquidationRatio,\n                rate: supplyRate,\n                priceETH: fullNumber(Number(price) * Number(amount)),\n            }\n        }\n\n        return supplyMap;\n    }, [marketMap, supplyMap, type, supply]);\n}\n\nexport function useAfterBorrowMap() {\n    const marketMap = useMarketMap();\n    const borrowMap = useBorrowMap();\n\n    const { type, borrow } = useAppSelector((state: AppState) => state.after);\n\n    return useMemo(() => {\n        if (!type || !marketMap || !borrowMap) return null;\n\n        if (!borrow) return borrowMap;\n\n        const { symbol, amount, price } = borrow;\n\n\n\n        if (borrowMap[symbol]) {\n            const { amount: borrowAmount, price: borrowPrice, priceETH: borrowPriceETH, ...other } = borrowMap[symbol];\n\n            const totalAmount = Number(borrowAmount) + (isAdd(type) ? 1 : -1) * Number(amount);\n\n            borrowMap[symbol] = {\n                price,\n                amount: fullNumber(totalAmount),\n                priceETH: fullNumber(totalAmount * Number(price)),\n                ...other\n            }\n        } else if (marketMap[symbol]) {\n            const { borrowRateVariable, collateralFactor, liquidationRatio } = marketMap[symbol];\n\n            borrowMap[symbol] = {\n                price,\n                amount,\n                symbol,\n                collateralFactor,\n                liquidationRatio,\n                loanType: 3,\n                rate: borrowRateVariable,\n                priceETH: fullNumber(Number(price) * Number(amount)),\n            }\n        }\n\n        return borrowMap;\n    }, [marketMap, borrowMap, type, borrow]);\n}\n\nexport function useAfterSupplyRatio() {\n    const userInfo = useAfterUserInfo();\n    const supplyMap = useAfterSupplyMap();\n\n    return useMemo(() => {\n        if (!userInfo || !supplyMap) return null;\n\n        const { totalCollateralETH } = userInfo\n\n        return Object.values(supplyMap).map((item: any) => ({\n            ratio: item.priceETH / totalCollateralETH,\n            symbol: item.symbol,\n            amount: item.amount,\n        })).sort((a, b) => b.ratio - a.ratio)\n    }, [userInfo, supplyMap]);\n}\n\nexport function useAfterBorrowRatio() {\n    const userInfo = useAfterUserInfo();\n    const borrowMap = useAfterBorrowMap();\n\n    return useMemo(() => {\n        if (!userInfo || !borrowMap) return null;\n\n        const { totalBorrowETH } = userInfo\n\n        return Object.values(borrowMap).map((item: any) => ({\n            ratio: item.priceETH / totalBorrowETH,\n            symbol: item.symbol,\n            amount: item.amount,\n        })).sort((a, b) => b.ratio - a.ratio)\n    }, [userInfo, borrowMap]);\n}\n\nexport function useAfterSupply() {\n    const supplyMap = useSupplyMap();\n    const afterSupplyMap = useAfterSupplyMap();\n\n    const { type, supply } = useAppSelector((state: AppState) => state.after);\n\n    return useMemo(() => {\n        if (!type || !supplyMap || !afterSupplyMap || !supply) return null;\n\n        const { symbol } = supply;\n\n        if (supplyMap[symbol]) {\n            return {\n                ...supplyMap[symbol],\n                after: { ...afterSupplyMap[symbol] }\n            };\n        }\n\n        return {\n            ...afterSupplyMap[symbol],\n            amount: \"0\",\n            priceETH: \"0\",\n            after: { ...afterSupplyMap[symbol] }\n        };\n    }, [supplyMap, afterSupplyMap, type, supply]);\n}\n\nexport function useAfterBorrow() {\n    const borrowMap = useBorrowMap();\n    const afterBorrowMap = useAfterBorrowMap();\n    const borrowRatio = useAfterBorrowRatio();\n\n    const { type, borrow } = useAppSelector((state: AppState) => state.after);\n\n    return useMemo(() => {\n        if (!type || !borrowMap || !afterBorrowMap || !borrow || !borrowRatio) return null;\n\n        const { symbol } = borrow;\n\n        let ratio = 0;\n\n        borrowRatio.forEach((item) => {\n            if (item.symbol === symbol) ratio = item.ratio;\n        });\n\n\n        if (borrowMap[symbol]) {\n            return {\n                ...borrowMap[symbol],\n                after: { ratio, ...afterBorrowMap[symbol] }\n            };\n        }\n\n        return {\n            ...afterBorrowMap[symbol],\n            amount: \"0\",\n            priceETH: \"0\",\n            after: { ratio, ...afterBorrowMap[symbol] }\n        };\n    }, [borrowMap, afterBorrowMap, borrowRatio, type, borrow]);\n}\n\nexport function useState(): AfterState {\n    return useAppSelector((state: AppState) => state.after);\n}\n\nexport const afterReducer = createReducer(initialState, (builder) =>\n    builder\n        .addCase(updateState, (state, action) => {\n            Object.entries(action.payload ?? initialState).forEach(([key, value]) => {\n                // @ts-ignore\n                state[key] = value;\n            });\n        })\n);","import { configureStore } from '@reduxjs/toolkit';\nimport { save, load } from 'redux-localstorage-simple';\n\nimport { walletReducer as wallet } from './wallet';\nimport { userReducer as user } from './user';\nimport { marketReducer as market } from './market';\nimport { afterReducer as after } from './after';\nimport { langReducer as lang } from './lang';\n\nconst PERSISTED_KEYS: string[] = ['lang'];\n\nconst store = configureStore({\n    reducer: {\n        wallet,\n        user,\n        market,\n        after,\n        lang\n    },\n    middleware: (getDefaultMiddleware) =>\n        getDefaultMiddleware({ thunk: true })\n            .concat(save({ states: PERSISTED_KEYS, debounce: 1000 })),\n    preloadedState: load({ states: PERSISTED_KEYS, disableWarnings: process.env.NODE_ENV === 'test' }),\n});\n\nexport default store\n\nexport type AppState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;","import React from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\n\nconst withShowDom = (WrappedComponent: any, props: any, unmount: () => void) => {\n    return class extends React.Component {\n\n        render() {\n            return <WrappedComponent {...props} onCloseAfter={unmount} />\n        }\n    }\n}\n\nexport const showDom = (WrappedComponent: any, props: any) => {\n    const container = document.createElement('div');\n    document.body.appendChild(container);\n\n    const unmount = () => {\n        setTimeout(() => {\n            // unmountComponentAtNode(container);\n            // container.parentNode && container.parentNode.removeChild(container);\n        }, 1000);\n    }\n\n    const NodeWithShow = withShowDom(WrappedComponent, props, unmount);\n\n    render(<NodeWithShow />, container);\n}\n\n\n","import React, { useEffect, useState } from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\n\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nimport { showDom } from '../../HOC/show';\n\nconst Alert = (props: any) => {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport type Color = 'success' | 'info' | 'warning' | 'error';\n\ninterface SnackbarOrigin {\n    vertical: 'top' | 'bottom';\n    horizontal: 'left' | 'center' | 'right';\n}\n\ninterface MessageProps {\n    open?: boolean\n    text: string | React.ReactNode\n    severity: Color\n    anchorOrigin?: SnackbarOrigin\n    onClose?: () => any\n    onCloseAfter?: () => any\n}\n\nconst Message: React.FC<MessageProps> = ({ open: propsOpen, text, severity, onClose, onCloseAfter }) => {\n    const [open, setOpen] = useState<boolean>(propsOpen ?? true);\n\n    const close = () => {\n        if (onClose) {\n            onClose();\n        } else {\n            setOpen(false);\n        }\n        onCloseAfter && onCloseAfter();\n    }\n\n    useEffect(() => {\n        setOpen(propsOpen ?? true);\n    }, [propsOpen]);\n\n    return <Snackbar open={open} anchorOrigin={{ vertical: 'top', horizontal: 'center' }} autoHideDuration={2000} onClose={close}>\n        <Alert variant=\"filled\" icon={false} severity={severity}>{text}</Alert>\n    </Snackbar>\n}\n\n\nconst message = {\n    success(text: string | React.ReactNode) {\n        showDom(Message, { text, severity: \"success\" });\n    },\n    error(text: string) {\n        showDom(Message, { text, severity: \"error\" });\n    }\n}\n\n\nexport default Message;\nexport { message };","import React, { useState } from \"react\"\nimport PopoverUi from '@material-ui/core/Popover';\n\nexport interface PopoverOrigin {\n    vertical: 'top' | 'center' | 'bottom' | number;\n    horizontal: 'left' | 'center' | 'right' | number;\n}\n\nconst anchorOriginDefault = {\n    vertical: 'bottom',\n    horizontal: 'center',\n};\n\nconst transformOriginDefault = {\n    vertical: 'top',\n    horizontal: 'center',\n}\n\ninterface PopoverInterface {\n    style?: any\n    anchorOrigin?: PopoverOrigin | undefined;\n    transformOrigin?: PopoverOrigin | undefined;\n}\n\nconst usePopover = (): { open: boolean, setAnchorEl: (e: Element | null) => any, Popover: React.FC<React.ReactNode & PopoverInterface> } => {\n    const [anchorEl, setAnchorEl] = useState<Element | null>(null);\n\n    const open = Boolean(anchorEl);\n\n    const Popover = (props: PopoverInterface) => {\n        const { anchorOrigin, transformOrigin, ...other } = props;\n\n        return <PopoverUi\n            open={open}\n            anchorEl={anchorEl}\n            onClose={() => setAnchorEl(null)}\n            // @ts-ignore\n            anchorOrigin={anchorOrigin ?? anchorOriginDefault}\n            // @ts-ignore\n            transformOrigin={transformOrigin ?? transformOriginDefault}\n            {...other}\n        />\n    }\n\n    return {\n        open, setAnchorEl, Popover\n    }\n}\n\n\nexport default usePopover;","export default __webpack_public_path__ + \"static/media/aave.0db2befe.svg\";","export default __webpack_public_path__ + \"static/media/warning.402d65de.svg\";","import { InjectedConnector } from '@web3-react/injected-connector'\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector'\nimport { WalletLinkConnector } from '@web3-react/walletlink-connector'\nimport { PortisConnector } from '@web3-react/portis-connector'\nimport { FortmaticConnector } from '@web3-react/fortmatic-connector'\n\nimport { AAVE_SVG } from '../utils/images';\n\nconst SUPPORTED_CHAIN_IDS = [1, 4, 3, 42, 5];\n\nconst INFURA_KEY = process.env.REACT_APP_INFURA_KEY;\nconst PORTIS_DAPP_ID = process.env.REACT_APP_PORTIS_DAPP_ID as string;\nconst FORTMATIC_API_KEY = process.env.REACT_APP_FORTMATIC_API_KEY as string;\nconst WALLETCONNECT_BRIDGE_URL = process.env.REACT_APP_WALLETCONNECT_BRIDGE_URL as string;\n\nconst NETWORK_URLS: {\n  [chainId: number]: string\n} = {\n  1: `https://mainnet.infura.io/v3/${INFURA_KEY}`,\n  4: `https://rinkeby.infura.io/v3/${INFURA_KEY}`,\n  3: `https://ropsten.infura.io/v3/${INFURA_KEY}`,\n  5: `https://goerli.infura.io/v3/${INFURA_KEY}`,\n  42: `https://kovan.infura.io/v3/${INFURA_KEY}`,\n}\n\nexport const injected = new InjectedConnector({\n  supportedChainIds: SUPPORTED_CHAIN_IDS\n});\n\nexport const walletconnect = new WalletConnectConnector({\n  supportedChainIds: SUPPORTED_CHAIN_IDS,\n  infuraId: INFURA_KEY, // obviously a hack\n  bridge: WALLETCONNECT_BRIDGE_URL,\n  qrcode: true,\n  pollingInterval: 15000,\n});\n\nexport const walletlink = new WalletLinkConnector({\n  url: NETWORK_URLS[1],\n  appName: 'DAISM',\n  appLogoUrl: AAVE_SVG,\n});\n\nexport const portis = new PortisConnector({ dAppId: PORTIS_DAPP_ID, networks: [1, 100] })\n\nexport const fortmatic = new FortmaticConnector({ apiKey: FORTMATIC_API_KEY, chainId: 4 })\n","import { useWeb3React } from '@web3-react/core';\n\nexport function useWeb3ReactCore() {\n    const context = useWeb3React()\n    return context;\n}\n\nexport default useWeb3ReactCore","import { useAppDispatch } from '../../state/hooks';\n\nimport { WalletBalancesEnums, updateBalancesStatus, updateETHBalances } from '../../state/wallet';\n\nimport { getFormatNumber } from '../../utils';\n\nimport useWeb3ReactCore from './useWeb3ReactCore';\n\nexport const useEthBalances = () => {\n    const dispatch = useAppDispatch();\n    const { library, account } = useWeb3ReactCore();\n\n    return () => {\n        dispatch(updateBalancesStatus(WalletBalancesEnums.LOADING));\n\n        library\n            .getBalance(account)\n            .then((balance: any) => {\n                dispatch(updateETHBalances(getFormatNumber(balance)));\n                dispatch(updateBalancesStatus(WalletBalancesEnums.FINISH));\n            })\n            .catch((error: any) => {\n                dispatch(updateBalancesStatus(WalletBalancesEnums.ERROR));\n                console.error(error);\n            });\n    }\n}\n\nexport default useEthBalances;","import { useEffect, useRef, useState } from 'react';\nimport { UnsupportedChainIdError } from '@web3-react/core';\nimport { AbstractConnector } from '@web3-react/abstract-connector';\nimport { InjectedConnector } from '@web3-react/injected-connector'\n\nimport { message } from '../../components/Message';\n\nimport { injected } from '../../connectors';\n\nimport { useAppDispatch } from '../../state/hooks';\nimport { WalletStatusEnums, updateStatus, updateNetwork, updateError } from '../../state/wallet';\n\nimport useWeb3ReactCore from './useWeb3ReactCore';\nimport useEthBalances from './useEthBalances';\n\nconst NETWORK_LABELS: { [chainId: number]: string } = {\n    [4]: 'Rinkeby',\n    [3]: 'Ropsten',\n    [5]: 'Görli',\n    [42]: 'Kovan',\n}\n\nfunction useWallet(): (connector: AbstractConnector | undefined) => void {\n    const dispatch = useAppDispatch();\n    const { active, account, library, chainId, activate, deactivate } = useWeb3ReactCore();\n\n    const [injectedStatus, setInjectedStatus] = useState(false);\n\n    const balances = useEthBalances();\n\n    const initRef = useRef(true);\n\n    const tryActivation = (connector: AbstractConnector | undefined) => {\n\n        if (connector instanceof InjectedConnector && injectedStatus && chainId !== 42) {\n            message.error(\"请将 MetaMask 网络设置为 Kovan\");\n            return;\n        }\n\n        dispatch(updateStatus(WalletStatusEnums.LOADING));\n\n        connector &&\n            activate(connector, (error) => console.log(error), true).catch((error) => {\n                if (error instanceof UnsupportedChainIdError) {\n                    activate(connector) // a little janky...can't use setError because the connector isn't set\n                } else {\n                    message.error(error.message);\n                    dispatch(updateStatus(WalletStatusEnums.OFFLINE));\n                }\n            });\n    }\n\n    useEffect(() => {\n        if (!!account && !!library) {\n            balances();\n        }\n    }, [account, library]);\n\n    useEffect(() => {\n        if (initRef.current) {\n            initRef.current = false;\n            return;\n        }\n        // console.log(active, chainId);\n\n        if (!active) {\n            dispatch(updateStatus(WalletStatusEnums.OFFLINE));\n            dispatch(updateError(\"已断开连接\"));\n        } else if (chainId !== 42) {\n            dispatch(updateStatus(WalletStatusEnums.OFFLINE));\n            dispatch(updateError(\"请将 MetaMask 网络设置为 Kovan\"));\n        } else {\n            chainId && dispatch(updateNetwork(NETWORK_LABELS[chainId]));\n            dispatch(updateStatus(active ? WalletStatusEnums.SUCEESS : WalletStatusEnums.OFFLINE));\n        }\n    }, [active, chainId]);\n\n    useEffect(() => {\n        injected.isAuthorized().then(isAuthorized => {\n            // console.log(\"isAuthorized: \" + isAuthorized);\n\n            setInjectedStatus(isAuthorized);\n\n            if (isAuthorized) {\n                tryActivation(injected);\n            }\n        });\n    }, []);\n\n    return tryActivation;\n}\n\n\n\nexport default useWallet;","import { AbstractConnector } from '@web3-react/abstract-connector';\n\nexport enum WalletStatus {\n    OFFLINE = \"offline\",\n    LOADING = \"loading\",\n    SUCEESS = \"success\",\n}\n\nexport interface WalletInterface {\n    account: string | null\n    balance: string | null\n    network: string | null\n}\n\nexport interface useWalletInterface {\n    status: WalletStatus,\n    account?: string | null\n    network?: string | null\n    tryActivation: (connector: AbstractConnector | undefined) => void\n}","import useWallet from './useWallet';\n\nexport * from './useEthBalances';\nexport * from './useWeb3ReactCore';\nexport * from './types';\n\nexport default useWallet;\n","import styled from \"styled-components\";\n\nexport const Body = styled.div`\nbackground: var(--bg);\nmin-height: 100vh;\n`;\n\ninterface ContentInterface {\n    width?: string\n}\n\n\nexport const Content = styled.div<ContentInterface>`\nwidth:${({ width = \"1100px\" }) => width};\nheight: 100%;\nmargin: 0 auto;\n`;\n\nexport const Font = styled.div<{\n    fontWeight?: \"300\" | \"400\" | \"500\" | \"700\"\n    fontSize?: string\n    color?: string\n    align?: \"left\" | \"center\" | \"right\"\n    lineHeight?: string\n    letterSpacing?: string\n}>`\n${({ fontWeight }) => fontWeight && `font-weight: ${fontWeight};`}\nfont-size: ${({ fontSize }) => fontSize ?? \"inherit\"};\ncolor: ${({ color }) => color ?? \"#fff\"};\n\n${({ align }) => align && `text-align:  ${align};`}\n${({ lineHeight }) => lineHeight && `line-height:  ${lineHeight};`}\n${({ letterSpacing }) => `letter-spacing: ${letterSpacing};`};\nvertical-align: top;\n`;\n\n\nexport const Flex = styled.div<{\n    flex?: any\n    flexDirection?: 'row' | 'row-reverse' | 'column' | 'column-reverse'\n    alignItems?: 'flex-start' | 'flex-end' | 'center' | 'baseline' | 'stretch'\n    justifyContent?: 'flex-start' | 'flex-end' | 'center' | 'space-between' | 'space-around'\n}>`\ndisplay: flex;\n\n${({ flex, flexDirection, alignItems, justifyContent }) =>\n        `\n${flex ? `flex: ${flex};` : ''}\n${flexDirection ? `flex-direction: ${flexDirection};` : ''}\n${justifyContent ? `justify-content: ${justifyContent};` : ''}\n${alignItems ? `align-items: ${alignItems};` : ''}\n`}\n\n`\n\n\nexport const Grid = styled.div<{\n    inline?: boolean\n    template?: string\n    columGap?: string\n    rowGap?: string\n    alignItems?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\n}>`\ndisplay: ${({ inline }) => inline ? \"inline-grid\" : \"grid\"};\n${({ template }) => template ? `grid-template-columns: ${template};` : ''}\n${({ columGap }) => columGap ? `grid-column-gap: ${columGap};` : ''}\n${({ rowGap }) => rowGap ? `grid-row-gap: ${rowGap};` : ''} \n${({ alignItems }) => alignItems ? `align-items: ${alignItems};` : ''}\n`;\n\n\nexport const TextOverflowWrapper = styled.div`\nflex: 0 1 auto;\nwhite-space: nowrap;\ntext-overflow: ellipsis;\noverflow: hidden;\n`;\n\nexport const DropWrapper = styled.div`\nbackground-color: var(--wallet-menu);\n`;\n\nexport const DropOption = styled.div<{ width?: string }>`\ndisplay: flex;\nalign-items: center;\n${({ width }) => width ? `width: ${width};` : \"\"}\nfont-size: 14px;\ncolor: #fff;\npadding: 10px;\ncursor: pointer;\n\n&:not(.active):hover {\n    background: var(--wallet-option-hover);\n}\n\n&.active {\n    background: var(--wallet-option-active);\n}\n`;\n\n","export default __webpack_public_path__ + \"static/media/metamask.67b147ea.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect.58449504.svg\";","export default __webpack_public_path__ + \"static/media/coinbase.c33e96df.svg\";","export default __webpack_public_path__ + \"static/media/fortmatic.e8f3452e.svg\";","export default __webpack_public_path__ + \"static/media/portis.f44aba13.png\";","\nimport { AbstractConnector } from '@web3-react/abstract-connector';\nimport { injected, portis, walletconnect, walletlink, fortmatic } from '../../connectors';\n\nimport MetaMaskIcon from '../../assets/wallet/metamask.svg';\nimport WalletConnectIcon from '../../assets/wallet/walletconnect.svg';\nimport CoinbaseIcon from '../../assets/wallet/coinbase.svg';\nimport FortmaticIcon from '../../assets/wallet/fortmatic.svg';\nimport PortisIcon from '../../assets/wallet/portis.png';\n\n\nexport interface WalletInfo {\n    connector?: AbstractConnector\n    name: string\n    iconURL: string\n}\n\nexport const SUPPORTED_WALLETS: { [key: string]: WalletInfo } = {\n    METAMASK: {\n        connector: injected,\n        name: 'MetaMask',\n        iconURL: MetaMaskIcon,\n    },\n    FORTMATIC: {\n        connector: fortmatic,\n        name: 'Fortmatic',\n        iconURL: FortmaticIcon,\n    },\n    WALLETCONNECT: {\n        connector: walletconnect,\n        name: 'WalletConnect',\n        iconURL: WalletConnectIcon,\n    },\n    COINBASE: {\n        connector: walletlink,\n        name: 'Coinbase',\n        iconURL: CoinbaseIcon,\n    },\n    PORTIS: {\n        connector: portis,\n        name: 'Portis',\n        iconURL: PortisIcon,\n    },\n}\n\nexport default SUPPORTED_WALLETS;","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Trans } from '@lingui/macro';\n\nimport Message, { Color } from '../Message';\n\nimport usePopover from '../../hooks/popover';\nimport useWallet, { useWeb3ReactCore } from '../../hooks/wallet';\n\nimport { WalletStatusEnums, useState as useWalletState, useETHBalances } from '../../state/wallet';\n\nimport { Font, Flex, Grid, DropWrapper, DropOption } from '../../styled'\n\nimport { accountSplit, number2fixed } from '../../utils';\n\nimport SUPPORTED_WALLETS from './options';\n\nconst WalletButton = styled.div`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\npadding: 0 12px;\nheight: 38px;\nborder-radius: 3px;\nbackground: var(--wallet-button);\ncursor: pointer;\n`;\n\nconst WalletAddress = styled.div`\nline-height: 18px;\nmargin-bottom: 2px;\n`;\n\nconst WalletAccount = styled.div`\nline-height: 15px;\nmargin-left: 4px;\n`;\n\nconst WalletNetwork = styled.div`\nline-height: 15px;\npadding: 0 4px;\nborder-radius: 2px;\nbackground: var(--wallet-network);\n`;\n\nconst WalletIcon = styled.div`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nwidth: 38px;\nheight: 38px;\nmargin-left: 8px;\nborder-radius: 3px;\nbackground: var(--wallet-button);\ncursor: pointer;\n\nimg {\n    width: 24px;\n}\n`;\n\ntype WalletOptions = 'METAMASK' | 'FORTMATIC' | 'WALLETCONNECT' | 'COINBASE' | 'PORTIS';\n\nconst defaultOptions = ['METAMASK', 'FORTMATIC', 'WALLETCONNECT', 'COINBASE', 'PORTIS'];\n\nconst WalletInfo: React.FC<{\n    active?: WalletOptions | null\n    handleOpen: (e: any) => void\n}> = ({ active, handleOpen }) => {\n    const { account } = useWeb3ReactCore();\n    const { network } = useWalletState();\n\n    const balances = useETHBalances();\n\n    return <Flex>\n\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <WalletAddress>\n                <Font fontSize=\"14px\" color=\"#939DA7\">{accountSplit(account ?? \"\")}</Font>\n            </WalletAddress>\n\n            <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n                {network ? <WalletNetwork>\n                    <Font fontSize=\"12px\">{network}</Font>\n                </WalletNetwork> : \"\"}\n\n                {balances ?\n                    <WalletAccount>\n                        <Font fontSize=\"12px\" color=\"#939DA7\">{number2fixed(balances) + \" ETH\"}</Font>\n                    </WalletAccount> : \"\"}\n            </Flex>\n        </Flex>\n\n        {active ? <WalletIcon onClick={handleOpen}>\n            <img src={SUPPORTED_WALLETS[active].iconURL} />\n        </WalletIcon> : \"\"}\n    </Flex>\n}\n\nexport default function Wallet({ options = defaultOptions }: { options?: any[] }) {\n    const [active, setActive] = useState<WalletOptions | null>(null);\n    const { setAnchorEl, Popover } = usePopover();\n    const { status } = useWalletState();\n\n    const tryActivation = useWallet();\n\n    useEffect(() => {\n        if (status === WalletStatusEnums.SUCEESS && !active) setActive(\"METAMASK\");\n        if (status === WalletStatusEnums.OFFLINE && active) setActive(null);\n    }, [status]);\n\n    return <>\n        {status === WalletStatusEnums.OFFLINE &&\n            <WalletButton onClick={(e) => setAnchorEl(e.currentTarget)}>\n                <Font fontSize=\"14px\">\n                    <Trans>连接您的钱包</Trans>\n                </Font>\n            </WalletButton>}\n\n        {status === WalletStatusEnums.LOADING &&\n            <WalletButton>\n                <Font fontSize=\"14px\">\n                    <Trans>正在连接...</Trans>\n                </Font>\n            </WalletButton>}\n\n        {status === WalletStatusEnums.SUCEESS &&\n            <WalletInfo\n                {...{ active, handleOpen(e) { setAnchorEl(e.currentTarget) } }}\n            />}\n\n        <Popover\n            style={{ marginTop: 5 }}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n        >\n            <DropWrapper>\n                {options.map(item => {\n                    const option = SUPPORTED_WALLETS[item];\n\n                    return <DropOption\n                        key={item}\n                        className={item === active ? \"active\" : \"\"}\n                        onClick={() => {\n                            setActive(item);\n                            setAnchorEl(null);\n                            tryActivation(option.connector);\n                        }}\n                    >\n                        <Grid template=\"auto auto\" columGap=\"10px\">\n                            <img src={option.iconURL} alt=\"\" style={{ width: 20 }} />\n                            {option.name}\n                        </Grid>\n                    </DropOption>\n                })}\n            </DropWrapper>\n        </Popover>\n    </>\n}\n\nexport function WalletManager() {\n    const { account, active } = useWeb3ReactCore();\n    const { status, error } = useWalletState();\n\n    const [message, setMessage] = useState<string | React.ReactNode>(\"\");\n    const [severity, setSeverity] = useState<Color | null>(null);\n    const [open, setOpen] = useState(false);\n\n    const showMessage = (severity: Color, message: string | React.ReactNode) => {\n        setOpen(true);\n        setSeverity(severity);\n        setMessage(message);\n    }\n\n    useEffect(() => {\n        if (status && active) {\n            showMessage(\"success\", <Font fontSize=\"16px\" lineHeight=\"24px\" align=\"center\" ><Trans>MetaMask 账户已连接</Trans> <br /> {account}</Font>);\n        }\n    }, [active]);\n\n    useEffect(() => {\n        if (!status && error) {\n            showMessage(\"error\", <Font fontSize=\"16px\" lineHeight=\"24px\" align=\"center\" >{error}</Font>);\n        }\n    }, [status, error]);\n\n    return <div>\n        <Message\n            open={open}\n            text={message}\n            severity={severity ?? \"success\"}\n            onClose={() => setOpen(false)}\n        />\n    </div>\n}","import styled from \"styled-components\";\n\nimport { Font } from \"../../styled\";\n\nimport usePopover from '../../hooks/popover';\n\nimport { SupportedLocale, useActiveLocale } from \"../../hooks/lang\";\n\nimport { useAppDispatch } from '../../state/hooks';\nimport { updateUserLocale } from \"../../state/lang\";\n\n\nimport { DropWrapper, DropOption } from \"../../styled\";\n\nconst LangButton = styled.div`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nwidth: 38px;\nheight: 38px;\nborder-radius: 3px;\nbackground: var(--wallet-button);\ncursor: pointer;\n`;\n\nconst LANG_LIST: { [key in SupportedLocale]: string[] } = {\n    \"zh-CN\": [\"中文\", \"ZH\"],\n    \"en-US\": [\"English\", \"EN\"],\n}\n\nconst Lang = () => {\n    const dispatch = useAppDispatch();\n    const locale = useActiveLocale();\n\n    const { setAnchorEl, Popover } = usePopover();\n\n    const changeLocale = (val: SupportedLocale) => {\n        dispatch(updateUserLocale(val));\n        setTimeout(() => {\n            window.location.reload();\n        }, 1000);\n    }\n\n    return <>\n        <LangButton onClick={(e) => setAnchorEl(e.currentTarget)}>\n            <Font fontSize=\"14px\">{LANG_LIST[locale][1]}</Font>\n        </LangButton>\n        <Popover\n            style={{ marginTop: 5 }}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n        >\n            <DropWrapper>\n                {Object.entries(LANG_LIST).map(([key, value]) => {\n                    return <DropOption\n                        key={key}\n                        width=\"100px\"\n                        className={key === locale ? \"active\" : \"\"}\n                        onClick={() => {\n                            if (key === locale) return;\n                            // setActive(item);\n                            setAnchorEl(null);\n                            // @ts-ignore\n                            changeLocale(key);\n                        }}\n                    >\n                        {value[0]}\n                    </DropOption>\n                })}\n            </DropWrapper>\n        </Popover>\n    </>\n\n}\n\n\n\nexport default Lang;","\nexport enum SupportedChainId {\n    MAINNET = 1,\n    ROPSTEN = 3,\n    RINKEBY = 4,\n    GOERLI = 5,\n    KOVAN = 42,\n    ARBITRUM_KOVAN = 144545313136048,\n    ARBITRUM_ONE = 42161,\n}\n\nexport interface Call {\n    address: string\n    callData: string\n    gasRequired?: number\n}\n\nexport interface AddressMap { [chainId: number]: string };\n\nexport type Address = string | AddressMap | undefined;\n\nfunction constructSameAddressMap<T extends string>(address: T): { [chainId: number]: T } {\n    return {\n        [SupportedChainId.MAINNET]: address,\n        [SupportedChainId.ROPSTEN]: address,\n        [SupportedChainId.RINKEBY]: address,\n        [SupportedChainId.GOERLI]: address,\n        [SupportedChainId.KOVAN]: address,\n    }\n}\n\nexport const BAT = {\n    [SupportedChainId.KOVAN]: \"0x2d12186fbb9f9a8c28b3ffdd4c42920f8539d738\",\n}\n\nexport const UNI = {\n    [SupportedChainId.MAINNET]: \"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\",\n    [SupportedChainId.KOVAN]: \"0x075a36ba8846c6b6f53644fdd3bf17e5151789dc\",\n}\n\nexport const DAI = {\n    [SupportedChainId.MAINNET]: \"0x6B175474E89094C44Da98b954EedeAC495271d0F\",\n    [SupportedChainId.KOVAN]: \"0xFf795577d9AC8bD7D90Ee22b6C1703490b6512FD\",\n}\n\nexport const USDT = {\n    [SupportedChainId.MAINNET]: \"0xdAC17F958D2ee523a2206206994597C13D831ec7\",\n    [SupportedChainId.KOVAN]: \"0x13512979ADE267AB5100878E2e0f485B568328a4\",\n}\n\nexport const USDC = constructSameAddressMap('0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48');\nexport const WBTC = constructSameAddressMap('0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599');\nexport const FEI = constructSameAddressMap('0x956F47F50A910163D8BF957Cf5846D573E7f87CA');\nexport const TRIBE = constructSameAddressMap('0xc7283b66Eb1EB5FB86327f08e1B5816b0720212B');\nexport const FRAX = constructSameAddressMap('0x853d955aCEf822Db058eb8505911ED77F175b99e');\nexport const FXS = constructSameAddressMap('0x3432B6A60D23Ca0dFCa7761B7ab56459D9C964D0');\nexport const renBTC = constructSameAddressMap('0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D');\nexport const UMA = constructSameAddressMap('0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828');\nexport const UST = constructSameAddressMap('0xa47c8bf37f92abed4a126bda807a7b7498661acd');\nexport const MIR = constructSameAddressMap('0x09a3ecafa817268f77be1283176b946c4ff2e608');\n\nexport const AAVE_MARKET = {\n    [SupportedChainId.KOVAN]: \"0x88757f2f99175387aB4C6a4b3067c77A695b0349\",\n}\n\nexport const UNISWAP_WRAPPER = {\n    [SupportedChainId.KOVAN]: \"0x7994f28499c0f7226E21D4827D5DD4158F816230\",\n}\n\nexport const MARKET_ADDRESS = constructSameAddressMap('0x662328eEdA8A5Cb019587081e898E35D70512262');\nexport const USER_INFO_ADDRESS = constructSameAddressMap('0x64A436ae831C1672AE81F674CAb8B6775df3475C');\nexport const USER_HANDLE_ADDRESS = constructSameAddressMap('0x1389E35b1830c7B258B18875D8c4B5C03c391f51');\nexport const USER_HANDLE_OTHER_ADDRESS = constructSameAddressMap('0x19d29022d94b191372445e0485b5f1b7130dd0E4');","import { useMemo } from 'react';\nimport { Interface } from '@ethersproject/abi';\n\nimport useWeb3ReactCore from '../wallet/useWeb3ReactCore';\n\nimport { AAVE_MARKET, UNISWAP_WRAPPER, BAT, UNI, DAI, USDC, USDT, WBTC, FEI, TRIBE, FRAX, FXS, renBTC, UMA, UST, MIR } from './addresses';\nimport { MARKET_ADDRESS, USER_INFO_ADDRESS, USER_HANDLE_ADDRESS, USER_HANDLE_OTHER_ADDRESS } from './addresses';\n\nimport USER_INFO_ABI from '../../abis/user_info.json';\nimport USER_HANDLE_ABI from '../../abis/user_handle.json';\nimport USER_HANDLE_OTHER_ABI from '../../abis/user_handle_other.json';\nimport SMART_WALLET_ABI from '../../abis/smart_wallet.json';\nimport MARKET_ABI from '../../abis/market.json';\nimport ERC20_ABI from '../../abis/erc20.json';\n\nexport type TokenMapKey = \"AAVE_MARKET\" | \"UNISWAP_WRAPPER\" | \"BAT\" | \"UNI\" | \"DAI\" | \"USDC\" | \"USDT\" | \"WBTC\" | \"FEI\" | \"TRIBE\" | \"FRAX\" | \"FXS\" | \"renBTC\" | \"UMA\" | \"UST\" | \"MIR\";\nexport type ContractMapKey = \"ERC20\" | \"MARKET\" | \"USER_INFO\" | \"USER_HANDLE\" | \"USER_HANDLE_OTHER\" | \"SMART_WALLET\";\n\nconst contractMap = {\n    ERC20: { address: null, abi: ERC20_ABI },\n    MARKET: { address: MARKET_ADDRESS, abi: MARKET_ABI },\n    USER_INFO: { address: USER_INFO_ADDRESS, abi: USER_INFO_ABI },\n    USER_HANDLE: { address: USER_HANDLE_ADDRESS, abi: USER_HANDLE_ABI },\n    USER_HANDLE_OTHER: { address: USER_HANDLE_OTHER_ADDRESS, abi: USER_HANDLE_OTHER_ABI },\n    SMART_WALLET: { address: null, abi: SMART_WALLET_ABI },\n};\n\nconst tokenMap: any = { AAVE_MARKET, UNISWAP_WRAPPER, BAT, UNI, DAI, USDC, USDT, WBTC, FEI, TRIBE, FRAX, FXS, renBTC, UMA, UST, MIR };\n\nexport const useAddressAndABI = (key: ContractMapKey) => {\n    const { chainId } = useWeb3ReactCore();\n\n    const { address, abi } = contractMap[key];\n\n    return useMemo(() => chainId ? { address: address ? address[chainId] : \"\", abi } : {}, [chainId]);\n}\n\nexport const useTokenAddress = (key?: TokenMapKey | string | null) => {\n    const { chainId } = useWeb3ReactCore();\n\n    const addressMap = useMemo(() => key && tokenMap.hasOwnProperty(key) ? tokenMap[key] : null, [key]);\n\n    return useMemo(() => chainId && addressMap ? addressMap[chainId] : null, [chainId, addressMap]);\n}\n\nexport const useFuncEncode = (ABI: any, methodName: string, options: any[]) => {\n    const { active } = useWeb3ReactCore();\n\n    const contractInterface = useMemo(() => active ? new Interface(ABI) : null, [active, ABI]);\n\n    const fragment = useMemo(() => active ? contractInterface?.getFunction(methodName) : null, [contractInterface, methodName]);\n\n    return useMemo(() => active && options?.length ? contractInterface?.encodeFunctionData(fragment ?? \"\", options) : undefined, [fragment, options]);\n}","import { useMemo } from 'react';\nimport { Contract } from '@ethersproject/contracts';\n\nimport useWeb3ReactCore from '../wallet/useWeb3ReactCore';\n\nimport { getContract } from '../../utils';\n\n\nimport { ContractMapKey, useAddressAndABI, TokenMapKey, useTokenAddress } from './hooks';\n\n\nexport function useContract<T extends Contract = Contract>(\n    contractKey: ContractMapKey,\n    otherAddress?: string | null,\n    withSignerIfPossible = true\n): T | null {\n    const { library, account, chainId } = useWeb3ReactCore();\n\n    let { address, abi } = useAddressAndABI(contractKey);\n\n    if (otherAddress) address = otherAddress;\n\n    return useMemo(() => {\n        if (!address || !abi || !library || !chainId) return null\n\n        try {\n            return getContract(address, abi, library, withSignerIfPossible && account ? account : undefined)\n        } catch (error) {\n            console.error('Failed to get contract', error)\n            return null\n        }\n    }, [address, abi, library, chainId, withSignerIfPossible, account]) as T\n}\n\nexport const useMarketContract = () => {\n    return useContract(\"MARKET\");\n}\n\nexport const useUserInfoContract = () => {\n    return useContract(\"USER_INFO\");\n}\n\nexport const useUserHandleContract = () => {\n    return useContract(\"USER_HANDLE\");\n}\n\nexport const useUserHandleOtherContract = () => {\n    return useContract(\"USER_HANDLE_OTHER\");\n}\n\nexport const useSmartWalletContract = (address: string | null) => {\n    return useContract(\"SMART_WALLET\", address);\n}\n\nexport const useERC20Contract = (token?: TokenMapKey | string | null) => {\n    const address = useTokenAddress(token);\n\n    return useContract(\"ERC20\", address);\n}","import { useEffect, useMemo } from \"react\";\nimport { useWeb3ReactCore } from '../wallet';\n\n\nimport { useUserInfoContract } from \"./index\";\n\nimport { useAppDispatch } from '../../state/hooks';\nimport { updateAddress, updateStatus, UserStatusEnums } from '../../state/user';\n\nimport { isInvalidAddress } from \"../../utils\";\n\n\nexport enum UserStatusEnmus {\n    CREATE = \"create\",\n    LOADING = \"loading\",\n    SUCEESS = \"success\",\n}\n\nexport const useUserInfo = (status: boolean) => {\n    const { account } = useWeb3ReactCore();\n\n    const proxies = useProxies();\n\n    useEffect(() => {\n        if (status && account) {\n            proxies();\n        }\n    }, [account, status]);\n}\n\nexport const useBuild = () => {\n    const { account } = useWeb3ReactCore();\n\n    const userInfoContract = useUserInfoContract();\n\n    // console.log(\"userInfoContract\", userInfoContract);\n\n    return async () => {\n        if (!userInfoContract) return;\n\n        try {\n            return userInfoContract[\"build(address)\"](account);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const useProxies = () => {\n    const dispatch = useAppDispatch();\n    const { account } = useWeb3ReactCore();\n\n    const userInfoContract = useUserInfoContract();\n\n    return async () => {\n        if (!userInfoContract || !account) return;\n\n        dispatch(updateStatus(UserStatusEnums.LOADING));\n\n        const address = await userInfoContract.proxies(account);\n\n        if (address && !isInvalidAddress(address)) {\n            dispatch(updateAddress(address));\n            dispatch(updateStatus(UserStatusEnums.SUCCESS));\n        } else {\n            dispatch(updateStatus(UserStatusEnums.CREATE));\n        }\n    }\n}","import { useState, useEffect } from \"react\";\n\nimport { useMarketContract } from \"./index\";\nimport { useTokenAddress } from \"./hooks\";\n\n\nimport { useAppDispatch } from '../../state/hooks';\nimport { useState as useUserState, updateDataInfo } from '../../state/user';\nimport {\n    MarketStatusEnums,\n    updateEthPrice,\n    updateMaeketData,\n    updateMarketStatus,\n    updateLoanData,\n    updateLoanStatus\n} from '../../state/market';\n\nimport { getFormatNumber } from \"../../utils\";\n\nexport const useMarketData = () => {\n    const dispatch = useAppDispatch();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n\n    const marketInfoContract = useMarketContract();\n\n    return async () => {\n        if (!marketInfoContract) return;\n\n        dispatch(updateMarketStatus(MarketStatusEnums.LOADING));\n\n        try {\n            const market = await marketInfoContract.getAaveMarketInfo(marketAddress);\n\n            const data = market.map((\n                { totalSupply, totalBorrow, supplyRate, liquidationRatio, collateralFactor, borrowRateVariable, borrowRateStable, availableLiquidity, price,\n                    symbol, aTokenAddress, underlyingTokenAddress, usageAsCollateralEnabled, stableBorrowRateEnabled, borrowinEnabled }: any\n            ) => ({\n                symbol: symbol.toLocaleUpperCase(),\n                totalSupply: getFormatNumber(totalSupply),\n                totalBorrow: getFormatNumber(totalBorrow),\n                supplyRate: getFormatNumber(supplyRate, 27),\n                liquidationRatio: getFormatNumber(liquidationRatio, 4),\n                collateralFactor: getFormatNumber(collateralFactor, 4),\n                borrowRateVariable: getFormatNumber(borrowRateVariable, 27),\n                borrowRateStable: getFormatNumber(borrowRateStable, 27),\n                availableLiquidity: getFormatNumber(availableLiquidity, \"wei\"),\n                price: getFormatNumber(price),\n                aTokenAddress,\n                underlyingTokenAddress,\n                usageAsCollateralEnabled,\n                stableBorrowRateEnabled,\n                borrowinEnabled\n            }));\n\n            console.log(\"use\", market, data);\n\n            dispatch(updateMaeketData(data));\n            dispatch(updateMarketStatus(MarketStatusEnums.SUCCESS));\n        } catch (error) {\n            dispatch(updateMarketStatus(MarketStatusEnums.ERROR));\n            console.error(error);\n        }\n    }\n}\n\nexport const useUserData = () => {\n    const dispatch = useAppDispatch();\n    const { address } = useUserState();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n\n    const marketInfoContract = useMarketContract();\n\n    return async () => {\n        if (!marketInfoContract || !address) return;\n\n        dispatch(updateLoanStatus(MarketStatusEnums.LOADING));\n\n        try {\n            const loan = await marketInfoContract.getUserLoanData(marketAddress, address);\n            const account = await marketInfoContract.getUserAccountData(marketAddress, address);\n            const ratio = await marketInfoContract.getRatio(marketAddress, address);\n\n            const data = loan.filter((item: any) => item.symbol).map((\n                { amount, priceETH, rate, loanType, symbol }: any\n            ) => ({\n                loanType,\n                symbol: symbol.toLocaleUpperCase(),\n                amount: getFormatNumber(amount),\n                priceETH: getFormatNumber(priceETH),\n                rate: getFormatNumber(rate, 27),\n            }));\n\n            console.log(\"use\", data);\n\n            const { totalCollateralETH, totalDebtETH, availableBorrowsETH, currentLiquidationThreshold, healthFactor } = account;\n\n            dispatch(updateDataInfo({\n                totalCollateralETH: getFormatNumber(totalCollateralETH),\n                availableBorrowsETH: getFormatNumber(availableBorrowsETH),\n                totalDebtETH: getFormatNumber(totalDebtETH),\n                currentLiquidationThreshold: getFormatNumber(currentLiquidationThreshold, \"wei\"),\n                healthFactor: getFormatNumber(healthFactor),\n                ratio: getFormatNumber(ratio),\n            }));\n            dispatch(updateLoanData(data));\n            dispatch(updateLoanStatus(MarketStatusEnums.SUCCESS));\n        } catch (error) {\n            dispatch(updateLoanStatus(MarketStatusEnums.ERROR));\n            console.error(error);\n        }\n    }\n}\n\nexport const useTokenPrice = (tokens?: string[] | string) => {\n    const [loading, setLoading] = useState(false);\n    const [prices, setPrices] = useState<string[]>();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n\n    const marketInfoContract = useMarketContract();\n\n    const getTokenPrice = async () => {\n        if (!marketInfoContract || !tokens?.length) return;\n        setLoading(true);\n\n        try {\n            const prices = await marketInfoContract.getPrices(marketAddress, tokens instanceof Array ? tokens : [tokens]);\n\n            setPrices(prices.map((item: number) => getFormatNumber(item)));\n            setLoading(false);\n        } catch (error) {\n            setLoading(false);\n            console.error(error);\n        }\n    }\n\n    useEffect(() => {\n        getTokenPrice();\n    }, [tokens, marketInfoContract]);\n\n    return {\n        loading,\n        prices\n    }\n}\n\nexport const useMarketInit = (status: boolean) => {\n    const dispatch = useAppDispatch();\n\n    const { address } = useUserState();\n\n    const marketInfoContract = useMarketContract();\n\n    const marketData = useMarketData();\n    const userData = useUserData();\n\n    const getPrices = async () => {\n        fetch(\"https://dapp.wuliff.com/prices\")\n            .then((body) => {\n                return body.json()\n            })\n            .then(([res]) => {\n                dispatch(updateEthPrice(res));\n            });\n    }\n\n    useEffect(() => {\n        if (status) {\n            marketData();\n        }\n    }, [marketInfoContract, status])\n\n    useEffect(() => {\n        if (status) {\n            userData();\n        }\n    }, [marketInfoContract, address, status]);\n\n    useEffect(() => {\n        getPrices();\n    }, [status]);\n}","import { useMarketData, useUserData } from \"./useMarketInfo\";\nimport { useEthBalances } from \"../wallet\";\n\nimport { useAppDispatch } from '../../state/hooks';\n\nimport { updateState as updateMarketState } from \"../../state/market\";\nimport { updateState as updateUserState } from \"../../state/user\";\n\n\nexport const useReload = () => {\n    const marketData = useMarketData();\n    const userData = useUserData();\n    const balances = useEthBalances();\n\n    return () => {\n        userData();\n        marketData();\n        balances();\n    }\n}\n\nexport const useReset = () => {\n    const dispatch = useAppDispatch();\n\n\n    return () => {\n        dispatch(updateMarketState());\n        dispatch(updateUserState());\n    }\n}","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\n\ninterface IconProps extends React.SVGAttributes<SVGSVGElement> {\n    className?: string\n    name: string\n    link?: string\n    blank?: boolean\n    isHover?: boolean\n}\n\nconst Base: React.FC<IconProps> = (props) => {\n    const { className, name: propsName, isHover, ...other } = props;\n    const [name, setName] = useState(propsName);\n\n\n    useEffect(() => {\n        setName(propsName ?? name);\n    }, [propsName]);\n\n    useEffect(() => {\n        setName(propsName);\n    }, [propsName]);\n\n    return <svg\n        className={\"dapp-icon \" + (className || \"\")}\n        aria-hidden=\"true\"\n        {...other}>\n        <use xlinkHref={\"#\" + name} />\n    </svg>\n};\n\nconst Icon: React.FC<IconProps> = (props) => {\n    const { link, blank, ...other } = props;\n    return link ?\n        <a href={link} target={blank ? \"_blank\" : \"\"}>\n            <Base {...other} />\n        </a> :\n        <Base {...other} />\n}\n\n\nexport const IconWrapper = styled(({ className, style, name, ...other }: {\n    className?: string\n    fontSize?: string\n    color?: string\n    name: string\n    style?: any\n}) => {\n    return <div {...{ className, style }}><Base name={name} /></div>\n})`\nfont-size:  ${({ fontSize }) => fontSize ?? \"inherit\"};\ncolor: ${({ color }) => color ?? \"inherit\"};\nline-height: 1em;\n`;\n\n\nexport const LoadingIcon = styled(({ className, style, ...other }: {\n    className?: string\n    fontSize?: string\n    color?: string\n    style?: any\n}) => {\n    return <div {...{ className, style }}><Base name=\"dapp-loading\" /></div>\n})`\nfont-size:  ${({ fontSize }) => fontSize ?? \"50px\"};\ncolor: ${({ color }) => color ?? \"#37B06F\"};\nheight: 1em;\nanimation: 2s linear 0s infinite normal none running LoadingAnimation;\n`;\n\nexport const SuccessIcon = styled(({ className, style, ...other }: {\n    className?: string\n    fontSize?: string\n    background?: string\n    style?: any\n}) => {\n    return <div {...{ className, style }}><Base name=\"dapp-checked\" /></div>\n})`\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nfont-size:  ${({ fontSize }) => fontSize ?? \"12px\"};\ncolor: #fff;\nwidth: 1.5em;\nheight: 1.5em;\nbackground: ${({ background }) => background ?? \"#0CA700\"};\nborder-radius: 50%;\n`;\n\n\n\n\nexport default Icon;","import React from 'react';\nimport styled from 'styled-components';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport { IconWrapper } from '../Icon';\n\nimport { Font, Flex, TextOverflowWrapper } from '../../styled';\n\nconst TipsWrapper = styled.div`\nmin-height: 25px;\nline-height: 24px;\ntext-align: center;\npadding: 0 8px;\nbackground-color: var(--tips);\nborder-bottom: 1px solid var(--theme);\n`;\n\nconst TipsInfoWrapper = styled.div`\nmargin-right: 4px;\ncursor: pointer;\n\nimg {\n    display: block;\n    width: 16px;\n    opacity: .5;\n}\n\n&:hover img {\n    opacity: .8;\n}\n`;\n\nconst Tips: React.FC<{\n    text?: string | React.ReactNode\n    children: React.ReactElement<any, any>;\n}> = ({ text, children }) => {\n\n    return text ?\n        <Tooltip title={<TipsWrapper><Font fontSize=\"14px\" fontWeight=\"700\">{text}</Font></TipsWrapper>} placement=\"top\">\n            {children}\n        </Tooltip> :\n        <>{children}</>\n}\n\nexport const TipsInfo: React.FC<{\n    text?: string | React.ReactNode\n}> = ({ text }) => {\n    return <Tips text={text}>\n        <TipsInfoWrapper>\n            <IconWrapper name=\"dapp-info\" />\n        </TipsInfoWrapper>\n    </Tips>\n}\n\nexport const TipsPrice: React.FC<{\n    price: (number | string | undefined)[]\n}> = ({ price }) => {\n    const [priceStr, priceTips, unit] = price;\n\n    const Util = () => <span>{unit}</span>;\n    const Text = () => <TextOverflowWrapper>{priceStr ?? \"\"}</TextOverflowWrapper>;\n\n    return <Tips text={priceTips}>\n        <Flex>\n            {priceStr ?\n                (unit === \"ETH\" ?\n                    <>\n                        <Text />\n                        <Util />\n                    </> :\n                    <>\n                        <Util />\n                        <Text />\n                    </>)\n                : \"-\"}\n        </Flex>\n    </Tips>\n}\n\nexport default Tips;\n\n","import React from 'react';\nimport styled from 'styled-components';\nimport ButtonUi from '@material-ui/core/Button';\nimport { LoadingIcon } from '../Icon';\n\nconst ButtonWrapper = styled.div<{ theme: string[] }>`\n.button-box {\n    display: flex;\n    align-items: center;\n    color: #fff;\n    line-height: 16px;\n    padding: 14px 32px;\n    border-radius: 3px;\n    background-color: ${({ theme }) => theme[0]};\n    transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n\nbutton:disabled .button-box {\n    background-color:  ${({ theme }) => theme[2]};\n    color: ${({ theme }) => theme[3]};\n    cursor: not-allowed;\n}\n\nbutton:not(:disabled):hover .button-box{\n    background-color:  ${({ theme }) => theme[1]};\n}\n`;\n\nconst ThemeList = {\n    primary: [\"#37B06F\", \"#239C5B\", \"#1A4A30\", \"#89A998\"],\n    gray: [\"#61717E\", \"#7F8F9C\", \"#61717E\", \"#89939D\"],\n    buy: [\"#318D70\", \"#14bd88\", \"#61717E\", \"#89939D\"],\n    sell: [\"#C26E5C\", \"#ca604a\", \"#61717E\", \"#89939D\"],\n}\n\nconst Button: React.FC<{\n    disabled?: boolean\n    loading?: boolean\n    theme: \"primary\" | \"gray\" | \"buy\" | \"sell\"\n    style?: any\n    onClick?: () => void\n}> = ({ theme, children, disabled, loading, ...other }) => {\n\n    return <ButtonWrapper className=\"button-wrap\" theme={ThemeList[theme]}>\n        <ButtonUi {...other} disabled={disabled || loading}  >\n            <div className=\"button-box\">\n                {loading ? <LoadingIcon fontSize=\"14px\" color=\"#89939D\" style={{ marginRight: 4 }} /> : null}\n                {children}\n            </div>\n        </ButtonUi>\n    </ButtonWrapper >\n}\n\nexport default Button;","\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Trans, t } from '@lingui/macro';\n\nimport Icon, { LoadingIcon } from '../Icon';\n\nimport { Font } from '../../styled';\n\nconst EmptyWrapper = styled.div`\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding: 50px 0 30px;\n`;\n\nconst NoDataWrapper = styled.div`\nfont-size: 100px;\ncolor: rgb(125 125 125 / 20%);\n`\n\nexport const EmptyLoading = ({ text }: { text?: string | React.ReactNode }) => {\n    return <EmptyWrapper>\n        <div style={{ marginBottom: 10 }}><LoadingIcon /></div>\n        {text ?? <Font color=\"#7d7d7d\" fontSize=\"12px\"><Trans>加载中~</Trans></Font>}\n    </EmptyWrapper>\n}\n\nexport const EmptyNoData = ({ text }: { text?: string | React.ReactNode }) => {\n    return <EmptyWrapper>\n        <NoDataWrapper><Icon name=\"dapp-no-data\" /></NoDataWrapper>\n        {text ?? <Font color=\"#7d7d7d\" fontSize=\"12px\"><Trans>暂无数据~</Trans></Font>}\n    </EmptyWrapper>\n}","import React, { useEffect, useState, cloneElement, isValidElement } from 'react';\nimport styled from 'styled-components';\n\nimport { IconWrapper } from '../Icon';\n\nimport usePopover from '../../hooks/popover';\nimport { Font } from '../../styled';\n\n\nconst selectDefaultDatasource = (dataSource: (string | SelectValueInterface)[]) => {\n    return dataSource.map(item => (typeof item === \"string\" ? { name: item, value: item } : item));\n}\n\nconst selectDefaultValue = (defaultValue: string | SelectValueInterface) => {\n    return typeof defaultValue === \"string\" ? { value: defaultValue, name: defaultValue } : defaultValue;\n}\n\nconst SelectStyle = styled.div<{ width?: string, height?: string }>`\nwidth: ${({ width }) => width ?? \"100%\"};\nheight: ${({ height }) => height ?? \"100%\"};\nbackground-color: var(--select);\n\n&.active {\n    background-color: var(--select-active);\n}\n`;\n\nconst SelectValueStyle = styled.div<{ disabled?: boolean }>`\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\nheight: 100%;\npadding-left: 15px;\n\n${({ disabled }) => disabled ? \"pointer-events: none;\" : \"cursor: pointer;\"}\n\nimg {\n    flex: 0 1 auto;\n    margin: 8px;\n}\n`;\n\nconst OptionWrapper = styled.div`\nwidth: 100px;\n`;\n\nconst OptionItemList = styled.div`\nbackground-color: var(--select-option);\n`;\n\nexport const OptionItemWrapper = styled.div`\ndisplay: grid;\nalign-content: center;\ngrid-row-gap: 2px;\npadding: 10px;\ncursor: pointer;\n\n&:not(.active):hover {\n    background: var(--select-option-hover);\n}\n\n&.active {\n    background: var(--select-option-active);\n}\n`;\n\ninterface SelectValueInterface {\n    name: string | React.ReactNode,\n    value: number | string\n}\n\ninterface OptionitemInterface {\n    className?: string\n    name: string\n    onClick: () => void\n}\n\n\nconst OptionItem: React.FC<OptionitemInterface> = ({ name, ...other }) => {\n    return <OptionItemWrapper {...other}><Font fontSize=\"14px\">{name}</Font></OptionItemWrapper>\n}\n\n\nconst Select: React.FC<{\n    width?: string\n    height?: string\n    dataSource: (SelectValueInterface | string)[]\n    defaultValue?: any\n    disabled?: boolean\n    value?: string | SelectValueInterface\n    render?: string | React.ReactNode\n    optionItemRender?: React.ReactNode\n    optionPopoverProps?: {}\n    onChange?: (value: SelectValueInterface) => void\n}> = ({ dataSource: propsDataSource, defaultValue: propsDefaultValue, value: propsValue, render, optionItemRender, optionPopoverProps, disabled, onChange, ...other }) => {\n    const [dataSource, setDataSource] = useState(selectDefaultDatasource(propsDataSource));\n    const [value, setValue] = useState(selectDefaultValue(propsDefaultValue));\n    const { open, setAnchorEl, Popover } = usePopover();\n\n    const handleChange = (value: any) => {\n        onChange && onChange(value);\n        setValue(value);\n        setAnchorEl(null);\n    }\n\n    useEffect(() => {\n        setDataSource(selectDefaultDatasource(propsDataSource));\n    }, [propsDataSource]);\n\n\n    useEffect(() => {\n        setValue(selectDefaultValue(propsDefaultValue));\n    }, [propsDefaultValue])\n\n    useEffect(() => {\n        if (propsValue) {\n            setValue(selectDefaultValue(propsValue));\n        }\n    }, [propsValue]);\n\n    return <SelectStyle className={open ? \"active\" : \"\"} {...other} >\n        <SelectValueStyle disabled={disabled} onClick={(e) => setAnchorEl(e.currentTarget)}>\n            <div>{render || <Font fontSize=\"16px\">{value?.name}</Font>}</div>\n            <IconWrapper name=\"dapp-drop-down\" style={{ color: \"#fff\", flex: \"0 1 auto\", margin: 8 }} />\n        </SelectValueStyle>\n\n        <Popover\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n        >\n            <OptionWrapper {...optionPopoverProps}>\n                <OptionItemList>\n                    {dataSource?.map((item: any) => {\n                        if (isValidElement(optionItemRender)) {\n                            return cloneElement(optionItemRender, { active: value && value.value === item.value, item, handleChange });\n                        }\n\n                        return <OptionItem\n                            className={value && value.value === item.value ? \"active\" : \"\"}\n                            name={item.name}\n                            key={item.value}\n                            onClick={() => handleChange(item)}\n                        />\n                    })}\n                </OptionItemList>\n            </OptionWrapper>\n        </Popover>\n    </SelectStyle>\n}\n\n\nexport default Select;","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { t } from '@lingui/macro';\n\n\nimport Tips from \"../../components/Tips\";\nimport { IconWrapper } from '../../components/Icon';\nimport { OptionItemWrapper } from '../../components/Select';\n\nimport { Font, Flex } from '../../styled';\nimport { getRatio, number2fixed } from '../../utils';\n\nexport const TabPanelGrid = styled.div`\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\ncolumn-gap: 60px;\n`;\n\nexport const PercentageGraphConetnt = styled.div`\nposition: relative;\n`;\n\nexport const PercentageGraphWrapper = styled.div<{ size?: \"lg\" | \"sm\" }>`\ndisplay: flex;\n${({ size }) => size === \"sm\" ? \"height: 8px; margin-bottom: 22px;\" : \"height: 38px; margin: 22px 0;\"}\nborder-radius: 3px;\nbackground-color: var(--percentage-bg);\noverflow: hidden;\n`;\n\nexport const PercentageGraphItem = styled.div<{\n    width: string\n    background: string\n}>`\nflex: 0 0 ${({ width }) => width};\nbackground: ${({ background }) => background} ;\ncursor: pointer;\n`;\n\nexport const PercentageGraphLabel = styled(Flex)`\nposition: absolute;\ntop: 2px;\nleft: 0;\nwidth: 100%;\njustify-content: space-between;\n`;\n\nexport const PercentagePointWrapper = styled.div<{ left?: number, size?: \"lg\" | \"sm\", color: string }> `\nposition: absolute;\nleft: ${({ left }) => left || left === 0 ? getRatio(left * 100) : \"\"};\n${({ size }) => size === \"sm\" ? \"height: 8px;\" : \"top: 22px; height: 42px;\"}\nwidth: 4px;\nbackground: ${({ color }) => color};\ncursor: pointer;\n\nspan {\n    position: absolute;\n    ${({ size }) => size === \"sm\" ? \"top: 10px;\" : \"top: 42px;\"}\n    ${({ left }) => left === 0 ? \"left: 0;\" : \"right: 0;\"};\n    font-weight: 700;\n    font-size: 14px;\n    color: ${({ color }) => color};\n}\n`;\n\nexport const HandleText = styled.div`\ndisplay: flex;\njustify-content: space-between;\nheight: 18px;\nmargin-bottom: 4px;\n`;\n\nexport const HandleWrapper = styled.div`\nposition: relative;\ndisplay: flex;\nheight: 64px;\nmargin-bottom: 10px;\nborder-radius: 3px;\nborder: 1px solid var(--handle-border);\nbackground: var(--handle-bg);\ntransition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);\n\n&:before {\n    position: absolute;\n    top: -1px;\n    left: -1px;\n    content: '';\n    width: 10px;\n    height: calc(100% + 2px);\n    border-radius: 3px 0 0 3px;\n    background-color: ${({ theme }) => theme ?? \"#C379FF\"};\n}\n`;\n\nexport const InputControl = styled.div`\nflex: 1;\n\n.input-label {\n    flex: 1 0 auto;\n    padding: 0 10px 0 20px;\n    line-height: 62px;\n}\n\ninput {\n    display: block;\n    width: 100%;\n    height: 62px;\n    font-weight: bold;\n    font-size: 20px;\n    color: ${({ theme }) => theme ?? \"#fff\"};;\n    text-align: right;\n    padding: 0 10px  0 0;\n    border: none;\n    background: transparent;\n    min-width: 0;\n}\n`;\n\nexport const SelectControl = styled.div`\nflex: 0 0 auto;\nwidth: 100px;\nborder-left: 1px solid var(--handle-border);\n`;\n\n\nexport const EmptyContainer = styled.div`\ndisplay: flex;\nflex-direction: column;\njustify-content: space-around;\nalign-items: flex-end;\nheight: 62px;\npadding: 14px 12px 5px 10px;\n`;\n\nexport const EmptyWrapper = styled.div<{ size?: \"small\" | \"normal\" | \"large\" }>`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nborder-radius: 3px;\nbackground: var(--handle-empty);\n${({ size = \"normal\" }) => {\n        if (size === \"small\") {\n            return `width: 100%; height: 20px;`\n        } else {\n            return `width: 75px; height: 42px; margin: 10px 10px 10px 0;`\n        }\n    }}\n\ncursor: not-allowed;\n\nimg {\n    ${({ size = \"normal\" }) => {\n        if (size === \"small\") {\n            return `width: 10px;`\n        }\n    }}\n    opacity: 0.7;\n    transition: all .3s ease;\n}\n\n&:hover img {\n    opacity: 1;\n}\n`;\n\nconst InputMaxWrapper = styled.div`\ncursor: pointer;\ntransition: all .3s ease;\n\n&:hover {\n    opacity: .7;\n}\n`;\n\nconst APYWrapper = styled.div`\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\ngrid-column-gap: 5px;\nline-height: 32px;\nmargin: 25px 15px 0 15px;\npadding: 7px;\nborder-radius: 3px;\nbackground: var(--apy);\n`;\n\nconst APYItemWrapper = styled.div`\ntext-align: center;\nborder-radius: 3px;\ncursor: pointer;\n\n&:hover {\n    background: var(--apy-item-hover);\n}\n\n&.active {\n    background: var(--apy-item-active);\n}\n\n&.disabled {\n    pointer-events: none;\n}\n`;\n\nexport const InputMax: React.FC<{\n    max?: string\n}> = ({ max }) => {\n    return max ?\n        <Tips text={max}><InputMaxWrapper>{`(${t`最大值`} ${number2fixed(max, 2)})`}</InputMaxWrapper></Tips> :\n        <>{t`加载中~`}</>;\n}\n\nexport const SelectEmpty: React.FC<{\n    text?: string\n}> = ({ text }) => {\n\n    return text ? <EmptyContainer>\n        <Tips text={t`此操作无可用的抵押品或借贷资产。`}>\n            <EmptyWrapper size=\"small\">\n                <IconWrapper name=\"dapp-disable\" color=\"#b1b4b7\" />\n            </EmptyWrapper>\n        </Tips>\n        <Font fontSize=\"12px\" color=\"#939DA7\">{text}</Font>\n    </EmptyContainer> :\n        <Tips text={t`此操作无可用的抵押品或借贷资产。`}>\n            <EmptyWrapper>\n                <IconWrapper name=\"dapp-disable\" fontSize=\"24px\" color=\"#b1b4b7\" />\n            </EmptyWrapper>\n        </Tips>\n}\n\nexport const SelectOptionItem = (props: any) => {\n    const { active, item, handleChange } = props;\n    const { name, loanType } = item;\n\n    return <OptionItemWrapper className={active ? \"active\" : \"\"} onClick={() => handleChange(item)}>\n        <Font fontSize=\"14px\">{name}</Font>\n        <Font fontSize=\"12px\" color=\"#939DA7\">{loanType === 2 ? t`Stable` : t`Variable`}</Font>\n    </OptionItemWrapper>\n}\n\nexport const APYSelect = ({ stable, onChange }: { stable?: boolean, onChange?: (value: number) => void }) => {\n    const data = [\n        { value: 1, name: t`Stable`, disabled: stable },\n        { value: 2, name: t`Variable` },\n    ];\n\n    const [value, setValue] = useState<number>();\n\n    const handleChange = (val: number) => {\n        setValue(val);\n        onChange && onChange(val);\n    }\n\n    useEffect(() => {\n        handleChange(stable ? 2 : 1);\n    }, []);\n\n    return <APYWrapper>\n        {data.map(item =>\n            <APYItemWrapper\n                className={`${value === item.value ? \"active\" : \"\"} ${item.disabled ? \"disabled\" : \"\"}`}\n                key={item.value}\n                onClick={() => handleChange(item.value)}\n            >\n                <Font fontSize=\"14px\">{item.name}</Font>\n            </APYItemWrapper>\n        )}\n    </APYWrapper>\n}\n","import { Trans } from '@lingui/macro';\n\nimport Tips from '../../components/Tips';\n\nimport { useSupplyRatio } from '../../state/market';\nimport { useState as useAfterState, useAfterSupplyRatio } from '../../state/after';\n\nimport { Font } from '../../styled';\n\nimport { getRatio, numberRuler } from '../../utils';\n\nimport { PercentageGraphWrapper, PercentageGraphItem } from \"./styled\";\n\n\nconst SupplyPercentage = ({ theme }: { theme: string[] }) => {\n    const { type, loading } = useAfterState();\n\n    const supplyRatio = useSupplyRatio();\n    const afterSupplyRatio = useAfterSupplyRatio();\n\n    // console.log(\"SupplyPercentage\", supplyRatio, afterSupplyRatio);\n\n    return <>\n        <Font fontSize=\"20px\" color=\"#939DA7\" lineHeight=\"32px\"><Trans>Supply composition:</Trans></Font>\n        <PercentageGraphWrapper>\n            {supplyRatio?.length ? supplyRatio.map(({ ratio, amount, symbol }, i) => {\n                const ratioText = getRatio(ratio * 100);\n\n                return <Tips text={`${numberRuler(amount)} ${symbol} (${ratioText})`} key={symbol}>\n                    <PercentageGraphItem width={ratioText} background={theme[i % 2]} key={i} />\n                </Tips>\n            }) : \"\"}\n        </PercentageGraphWrapper>\n\n        {type && <>\n            <Font fontSize=\"14px\" color=\"#939DA7\" lineHeight=\"25px\"><Trans>之后</Trans></Font>\n            <PercentageGraphWrapper size=\"sm\">\n                {afterSupplyRatio?.length ? afterSupplyRatio.map(({ ratio, amount, symbol }, i) => {\n                    const ratioText = getRatio(ratio * 100);\n\n                    return <Tips text={`${numberRuler(amount)} ${symbol} (${ratioText})`} key={symbol}>\n                        <PercentageGraphItem width={ratioText} background={theme[i % 2]} key={i} />\n                    </Tips>\n                }) : \"\"}\n            </PercentageGraphWrapper>\n        </>}\n    </>\n}\n\nexport default SupplyPercentage;","import { useMemo } from 'react';\nimport { Trans, t } from '@lingui/macro';\n\nimport Tips from '../../components/Tips';\n\nimport { useUserInfo } from '../../state/user';\nimport { useEthPrice, useBorrowRatio, useLiquidationInfo } from '../../state/market';\nimport { useState as useAfterState, useAfterBorrowRatio, useAfterUserInfo } from '../../state/after';\n\nimport { Font } from '../../styled';\n\nimport { getRatio, numberRuler, ethToPrice, fullNumber, number2fixed } from '../../utils';\n\nimport {\n    PercentageGraphConetnt,\n    PercentageGraphWrapper,\n    PercentageGraphItem,\n    PercentageGraphLabel,\n    PercentagePointWrapper\n} from \"./styled\";\n\ninterface PercentageInfoProps {\n    totalDebtETH: number\n    borrowETH: number\n    liquidationETH: number\n}\n\nconst usePercentageInfo = ({ totalDebtETH, borrowETH, liquidationETH }: PercentageInfoProps) => {\n    const price = useEthPrice();\n\n    const max = useMemo(() => liquidationETH && borrowETH ? liquidationETH / borrowETH : null, [liquidationETH, borrowETH]);\n\n    const totalPercent = useMemo(() => {\n        if (!max) return null;\n\n        const percent = totalDebtETH / borrowETH;\n        const left = percent / max;\n\n        return [left < 0 ? 0 : left, percent < 0 ? 0 : percent];\n    }, [max, totalDebtETH, borrowETH]);\n\n    const percentText = useMemo(() => max ? [1 / max, 1] : null, [max]);\n    const percentPrice = useMemo(() => {\n        if (!borrowETH) return null;\n\n        let [priceStr, priceUnit] = ethToPrice(borrowETH, price);\n\n        priceStr = number2fixed(priceStr);\n\n        return priceUnit === \"ETH\" ? `${priceStr} ${priceUnit}` : `${priceUnit}${priceStr}`;\n    }, [price, borrowETH]);\n\n    return { max, totalPercent, percentText, percentPrice };\n}\n\nconst PercentagePoint = ({ tips, left, color, text, size }: { tips: (value: string) => string, left?: number, color: string, text?: number, size?: \"lg\" | \"sm\" }) => {\n    const value = text || text === 0 ? getRatio(text * 100) : \"\";\n\n    return <Tips text={tips(value)}>\n        <PercentagePointWrapper {...{ color, left, size }}>\n            <span>{value}</span>\n        </PercentagePointWrapper>\n    </Tips>\n};\n\nconst BorrowPercentage = ({ theme }: { theme: string[] }) => {\n    const { type, loading } = useAfterState();\n\n    const { totalDebtETH } = useUserInfo() ?? {};\n    const [borrowETH, liquidationETH] = useLiquidationInfo() || [];\n\n    const { totalDebtETH: afterTotalDebtETH, totalBorrowETH, totalLiquidationETH } = useAfterUserInfo() ?? {};\n\n    const borrowRatio = useBorrowRatio();\n    const afterBorrowRatio = useAfterBorrowRatio();\n\n    const { max, totalPercent, percentText, percentPrice } = usePercentageInfo({ totalDebtETH, borrowETH, liquidationETH });\n\n    const { max: afterMax, totalPercent: afterTotalPercent, percentText: afterPercentText, percentPrice: afterPercentPrice } =\n        usePercentageInfo({ totalDebtETH: afterTotalDebtETH, borrowETH: totalBorrowETH, liquidationETH: totalLiquidationETH });\n\n    // console.log(\"BorrowPercentage\", borrowRatio, afterBorrowRatio);\n\n    return <>\n        <Font fontSize=\"20px\" color=\"#939DA7\" lineHeight=\"32px\"><Trans>已使用借款额度:</Trans></Font>\n        <PercentageGraphConetnt>\n            <PercentageGraphWrapper>\n                {borrowRatio?.length && max && <>\n                    <PercentageGraphLabel>\n                        <Font fontSize=\"14px\" color=\"#939DA7\">0%</Font>\n                        {max &&\n                            <Tips text=\"Liquidation\">\n                                <Font fontSize=\"14px\" color=\"#939DA7\">{getRatio(max * 100)}</Font>\n                            </Tips>}\n                    </PercentageGraphLabel>\n\n                    <PercentagePoint\n                        color=\"#FFF000\"\n                        left={totalPercent?.[0]}\n                        text={totalPercent?.[1]}\n                        tips={(value) => t`总计 (${value})`}\n                    />\n\n                    <PercentagePoint\n                        color=\"#fff\"\n                        left={percentText?.[0]}\n                        text={percentText?.[1]}\n                        tips={(value) => t`贷款限额: ${percentPrice} (${value})`}\n                    />\n\n                    {borrowRatio.map(({ ratio, amount, symbol }, i) => {\n                        const width = getRatio(ratio / max * 100);\n                        const text = getRatio(ratio * 100);\n\n                        return <Tips text={`${numberRuler(amount)} ${symbol} (${text})`} key={text}>\n                            <PercentageGraphItem width={width} background={theme[i % 2]} key={i} />\n                        </Tips>\n                    })}\n                </>}\n            </PercentageGraphWrapper>\n        </PercentageGraphConetnt>\n\n        {type && <>\n            <Font fontSize=\"14px\" color=\"#939DA7\" lineHeight=\"25px\"><Trans>之后</Trans></Font>\n            <PercentageGraphConetnt>\n                <PercentageGraphWrapper size=\"sm\">\n                    {afterBorrowRatio?.length && afterMax && <>\n                        <PercentagePoint\n                            size=\"sm\"\n                            color=\"#FFF000\"\n                            left={afterTotalPercent?.[0]}\n                            text={afterTotalPercent?.[1]}\n                            tips={(value) => t`总计 (${value})`}\n                        />\n\n                        <PercentagePoint\n                            size=\"sm\"\n                            color=\"#fff\"\n                            left={afterPercentText?.[0]}\n                            text={afterPercentText?.[1]}\n                            tips={(value) => t`贷款限额: ${afterPercentPrice} (${value})`}\n                        />\n\n                        {afterBorrowRatio.map(({ ratio, amount, symbol }, i) => {\n                            const width = getRatio(ratio / afterMax * 100);\n                            const text = getRatio(ratio * 100);\n\n                            return <Tips text={`${numberRuler(amount)} ${symbol} (${text})`} key={text}>\n                                <PercentageGraphItem width={width} background={theme[i % 2]} key={i} />\n                            </Tips>\n                        })}\n                    </>}\n                </PercentageGraphWrapper>\n            </PercentageGraphConetnt>\n        </>}\n\n    </>\n}\n\nexport default BorrowPercentage;","import React, { useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport { Trans, t } from '@lingui/macro';\n\n// Import Swiper React components\nimport SwiperCore, { Pagination } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\n// Import Swiper styles\nimport 'swiper/swiper.scss';\nimport 'swiper/components/pagination/pagination.scss';\n\nimport Tips, { TipsInfo, TipsPrice } from '../../components/Tips';\nimport Button from '../../components/Button';\nimport { message } from '../../components/Message';\nimport { EmptyLoading } from '../../components/Empty';\n\nimport { useBuild, useProxies } from '../../hooks/contract/useUserInfo';\n\nimport { WalletStatusEnums, useState as useWalletState } from '../../state/wallet';\nimport { UserStatusEnums, useState as useUserState, useUserInfo } from '../../state/user';\nimport { useEthPrice, useLiquidationInfo } from '../../state/market';\nimport { useState as useAfterState, useAfterUserInfo } from '../../state/after';\n\nimport { Font, Flex, Grid, TextOverflowWrapper } from '../../styled';\n\nimport { getRatio, ethToPriceTips, number2fixed, getHandleTheme } from '../../utils';\n\nimport SupplyPercentage from './SupplyPercentage';\nimport BorrowPercentage from './BorrowPercentage';\n\nSwiperCore.use([Pagination]);\n\nconst Wrapper = styled.div`\nmargin-bottom: 25px;\nborder-radius: 3px;\nbackground: var(--user-info);\noverflow: hidden;\n`;\n\nconst WalletHeader = styled.div`\ndisplay: flex;\nalign-items: center;\nheight: 52px;\npadding: 0 20px;\nbackground: var(--user-info-header);\n`;\n\nconst WalletBody = styled.div`\ndisplay: flex;\nheight: 330px;\n`;\n\nconst SupplyBalance = styled.div`\nflex: 0 0 auto;\nmax-width: 280px;\nmin-width: 255px;\npadding: 0 20px;\nbackground: var(--user-info-supply);\n`;\n\nconst BorrowBlance = styled.div`\nflex: 1;\npadding: 0 20px;\n`;\n\nconst DataBoxWrapper = styled.div`\ndisplay: flex;\njustify-content: space-between;\nheight: 135px;\nborder-bottom: 1px solid var(--theme);\n`;\n\nconst GraphBoxWrapper = styled.div`\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nheight: 194px;\n`;\n\nconst DataItemWrapper = styled.div`\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nheight: 135px;\nmax-width: 240px;\n`;\n\nconst LabelItemWrapper = styled.div`\ndisplay: grid;\ngrid-template-columns: auto minmax(auto, 160px);\nalign-items: center;\n`;\n\nconst SwiperWrapper = styled(Swiper)`\ndisplay: flex;\nflex-direction: column-reverse;\njustify-content: center;\nwidth: 280px;\nmargin: 0;\n\n.swiper-wrapper {\n    height: auto;\n}\n\n.swiper-pagination {\n    position: relative;\n    bottom: 0;\n    text-align: right;\n\n    .swiper-pagination-bullet {\n        width: 10px;\n        height: 10px;\n        margin: 0;\n        background: none !important;\n        border: 3px solid transparent;\n\n        &:after {\n            content: \"\";\n            display: block;\n            width: 100%;\n            height: 100%;\n            border-radius: 50%;\n            background: #939DA7;\n        }\n\n        &.swiper-pagination-bullet-active:after {\n            background: var(--theme);\n        }\n    }\n}\n`;\n\nconst SwiperSlideWrapper = styled.div`\ndisplay: grid;\nalign-content: center;\ngrid-row-gap: 10px;\nheight: 100%;\npadding: 0 5px;\n`;\n\nconst HighlightedWrapper = styled.div`\npadding: 0 20px;\nbackground: var(--user-info-highlighted);\n\n&.active {\n    background: var(--user-info-highlighted-active);\n}\n`;\n\nconst Loading = () => {\n    return <Wrapper>\n        <EmptyLoading />\n    </Wrapper>\n}\n\n\nconst Create = () => {\n    const { status } = useWalletState();\n\n    const [loading, setLoading] = useState(false);\n\n    const build = useBuild();\n    const proxies = useProxies();\n\n    const handleBuild = () => {\n        if (status !== WalletStatusEnums.SUCEESS) {\n            message.error(t`请先连接钱包`);\n            return;\n        }\n\n        setLoading(true);\n\n        build().then(res => {\n            res.wait().then((res: any) => {\n                setLoading(false);\n                message.success(t`创建成功`);\n                proxies();\n            }).catch((error: any) => {\n                setLoading(false);\n                message.error(error.message);\n                console.error(error);\n            });\n        }).catch((error: any) => {\n            setLoading(false);\n            message.error(error.message);\n            console.error(error);\n        });\n    }\n\n    return <Wrapper>\n        <div style={{ padding: 45 }}>\n            <h2><Font fontSize=\"20px\" fontWeight=\"700\"><Trans>创建智能钱包</Trans></Font></h2>\n            <br />\n            <p>\n                <Font fontSize=\"14px\" color=\"#939DA7\" fontWeight=\"500\">\n                    <Trans>\n                        为了使用应用的高级功能，您首先需要创建一个智能钱包 —— 您的个人智能合约钱包可以使用高级功能。<br />\n                        请注意，使用智能钱包，您将无法与其他 app 兼容。\n                    </Trans>\n                </Font>\n            </p>\n            <br />\n            <div><Button loading={loading} theme=\"primary\" onClick={handleBuild}><Trans>创建</Trans></Button></div>\n        </div>\n    </Wrapper>\n}\n\ninterface LabelProps {\n    text: string | React.ReactNode\n    tips?: string | React.ReactNode\n}\n\nconst Label = ({ text, tips }: LabelProps) => {\n    return <Flex alignItems=\"center\">\n        {tips && <TipsInfo text={tips} />}\n        <span>{text}</span>\n    </Flex>\n}\n\nconst Ratio = ({ ratio }: { ratio: number | null }) => {\n    return ratio ? <Tips text={ratio * 100}>\n        <Flex>\n            <TextOverflowWrapper>{number2fixed(ratio * 100)}</TextOverflowWrapper>\n            <span>%</span>\n        </Flex>\n    </Tips> : <>-</>\n}\n\nconst DataItem: React.FC<{\n    label: string | React.ReactNode\n    quantity: string | number | React.ReactNode\n    className?: string\n    color?: string\n    after?: boolean\n    afterValue?: string | React.ReactNode\n}> = ({ className, label, quantity, color, after, afterValue }) => {\n\n    return <DataItemWrapper className={className}>\n        <Font fontSize=\"14px\" color=\"#939DA7\">{label}</Font>\n        <Font fontSize=\"42px\" color=\"#fff\">{quantity}</Font>\n\n        {after && <Grid template=\"repeat(2, max-content)\" columGap=\"5px\" alignItems=\"center\">\n            <Font fontSize=\"14px\" color=\"rgba(255, 255, 255, .5)\"><Trans>之后</Trans>:</Font>\n            <Font fontSize=\"20px\" color={color}>{afterValue}</Font>\n        </Grid>}\n    </DataItemWrapper>\n}\n\nconst LabelItem: React.FC<{\n    label: string | React.ReactNode\n    quantity: string | number | React.ReactNode\n    color?: string\n    after?: boolean\n    afterValue?: string | React.ReactNode\n}> = ({ label, quantity, color, after, afterValue }) => {\n    return <LabelItemWrapper>\n        <Font fontSize=\"14px\" color=\"rgba(255, 255, 255, .5)\">{label}</Font>\n        <Font fontSize=\"25px\" color=\"#fff\" style={{ display: \"flex\", justifyContent: \"flex-end\" }}>{quantity}</Font>\n\n        {after && <>\n            <Font fontSize=\"14px\" color=\"rgba(255, 255, 255, .5)\"><Trans>之后</Trans>:</Font>\n            <Font fontSize=\"15px\" color={color} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>{afterValue}</Font>\n        </>}\n    </LabelItemWrapper>\n}\n\nconst Info: React.FC<{\n    address: string | null\n}> = ({ address }) => {\n    const price = useEthPrice();\n    const [borrowETH, liquidationETH] = useLiquidationInfo() || [];\n\n    const { type, loading } = useAfterState();\n    const color = useMemo(() => getHandleTheme(type), [type]);\n\n    let userInfo;\n    const { totalCollateralETH, totalDebtETH, availableBorrowsETH, ratio } = userInfo = useUserInfo() ?? {};\n\n    const {\n        totalCollateralETH: afterTotalCollateralETH,\n        totalDebtETH: afterTotalDebtETH,\n        totalBorrowETH,\n        totalLiquidationETH,\n    } = useAfterUserInfo() ?? {};\n\n    console.log(\"UserInfo\", userInfo);\n\n    const liquidationRatio = useMemo(() => borrowETH && liquidationETH ? borrowETH / liquidationETH * 100 : null, [borrowETH, liquidationETH]);\n\n    const afterRatio = useMemo(() => totalBorrowETH && totalLiquidationETH ? totalLiquidationETH / totalBorrowETH : null, [totalBorrowETH, totalLiquidationETH]);\n    const afterLiquidationRatio = useMemo(() => totalBorrowETH && totalLiquidationETH ? totalBorrowETH / totalLiquidationETH * 100 : null, [totalBorrowETH, totalLiquidationETH]);\n\n    const afterProps = { color, after: Boolean(type) };\n\n    return <Wrapper>\n        <WalletHeader>\n            <Font fontSize=\"14px\" fontWeight=\"700\"><Trans>智能钱包</Trans></Font><Font fontSize=\"13px\">: {address ?? \"\"}</Font>\n        </WalletHeader>\n        <WalletBody>\n            <SupplyBalance>\n                <DataBoxWrapper>\n                    <DataItem\n                        label={<Label text={t`储蓄余额:`} tips={t`您提供的抵押品总数。`} />}\n                        quantity={<TipsPrice price={ethToPriceTips(totalCollateralETH, price)} />}\n                        afterValue={<TipsPrice price={ethToPriceTips(afterTotalCollateralETH, price)} />}\n                        {...afterProps}\n                    />\n                </DataBoxWrapper>\n\n                <GraphBoxWrapper>\n                    <SupplyPercentage theme={[\"#36b4c4\", \"#0e8c9c\"]} />\n                </GraphBoxWrapper>\n            </SupplyBalance>\n            <BorrowBlance>\n                <DataBoxWrapper>\n                    <DataItem\n                        label={<Label text={t`贷款总额:`} tips={t`您的借贷资金总额。`} />}\n                        quantity={<TipsPrice price={ethToPriceTips(totalDebtETH, price)} />}\n                        afterValue={<TipsPrice price={ethToPriceTips(afterTotalDebtETH, price)} />}\n                        {...afterProps}\n                    />\n                    <HighlightedWrapper>\n                        <DataItem\n                            label={<Label text={t`安全比率 (最小值 100%):`} tips={liquidationRatio ? t`您的借款限额与借贷资金的比率低于${getRatio(liquidationRatio)}将被清算。` : \"\"} />}\n                            quantity={<Ratio ratio={ratio} />}\n                            afterValue={<Ratio ratio={afterRatio} />}\n                            {...afterProps}\n                        />\n                    </HighlightedWrapper>\n\n                    <SwiperWrapper\n                        loop\n                        pagination={{ clickable: true }}\n                    // onSlideChange={() => console.log('slide change')}\n                    // onSwiper={(swiper) => console.log(swiper)}\n                    >\n                        <SwiperSlide>\n                            <SwiperSlideWrapper>\n                                <LabelItem\n                                    label={<Label text={t`贷款限额:`} tips={t`您可以借贷的最大金额。`} />}\n                                    quantity={<TipsPrice price={ethToPriceTips(Number(totalDebtETH) + Number(availableBorrowsETH), price)} />}\n                                    afterValue={<TipsPrice price={ethToPriceTips(totalBorrowETH, price)} />}\n                                    {...afterProps}\n                                />\n                                <LabelItem\n                                    label={<Label text={t`剩余可借款额:`} />}\n                                    quantity={<TipsPrice price={ethToPriceTips(availableBorrowsETH, price)} />}\n                                    afterValue={<TipsPrice price={ethToPriceTips(totalBorrowETH - afterTotalDebtETH, price)} />}\n                                    {...afterProps}\n                                />\n                            </SwiperSlideWrapper>\n                        </SwiperSlide>\n                        <SwiperSlide>\n                            <SwiperSlideWrapper>\n                                <LabelItem\n                                    label={<Label text={t`Liquidation ratio:`} tips={t`Safety ratio below which your position will face liquidation.`} />}\n                                    quantity={<Tips text={liquidationRatio}><div>{liquidationRatio ? getRatio(liquidationRatio) : \"-\"}</div></Tips>}\n                                    afterValue={<Tips text={afterLiquidationRatio}><div>{afterLiquidationRatio ? getRatio(afterLiquidationRatio) : \"-\"}</div></Tips>}\n                                    {...afterProps}\n                                />\n                                <LabelItem\n                                    label={<Label text={t`Liquidation limit:`} tips={t`Value of borrowed funds above which your position will face liquidation.`} />}\n                                    quantity={<TipsPrice price={ethToPriceTips(liquidationETH, price)} />}\n                                    afterValue={<TipsPrice price={ethToPriceTips(totalLiquidationETH, price)} />}\n                                    {...afterProps}\n                                />\n                            </SwiperSlideWrapper>\n                        </SwiperSlide>\n                    </SwiperWrapper>\n                </DataBoxWrapper>\n\n                <GraphBoxWrapper>\n                    <BorrowPercentage theme={[\"#68b3eb\", \"#3b9de7\"]} />\n                </GraphBoxWrapper>\n            </BorrowBlance>\n        </WalletBody>\n    </Wrapper >\n}\n\nconst UserInfo = () => {\n    const { status, address } = useUserState();\n\n    if (UserStatusEnums.CREATE === status) return <Create />;\n\n    if (UserStatusEnums.LOADING === status) return <Loading />;\n\n    return <Info address={address} />\n}\n\nexport default UserInfo;","import React from 'react';\n\n\nexport function setRef<T>(\n    ref: React.MutableRefObject<T | null> | ((instance: T | null) => void) | null | undefined,\n    value: T | null,\n): void {\n    if (typeof ref === 'function') {\n        ref(value);\n    } else if (ref) {\n        ref.current = value;\n    }\n}\n\nexport function useForkRef<Instance>(\n    refA: React.Ref<Instance> | null | undefined,\n    refB: React.Ref<Instance> | null | undefined,\n): React.Ref<Instance> | null {\n    return React.useMemo(() => {\n        if (refA == null && refB == null) {\n            return null;\n        }\n        return (refValue) => {\n            setRef(refA, refValue);\n            setRef(refB, refValue);\n        };\n    }, [refA, refB]);\n}\n\nexport const useEnhancedEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n","import React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { useEnhancedEffect } from '../../hooks/enhancedHooks';\nimport { getContainer } from '../../utils';\n\n\ninterface PortalInterface {\n    disablePortal?: boolean\n    container?: React.ReactNode\n    children?: React.ReactNode\n}\n\nexport default function Portal(props: PortalInterface) {\n    const { children, container, disablePortal = false } = props;\n    const [mountNode, setMountNode] = useState<Element>(document.body);\n\n    useEnhancedEffect(() => {\n        if (!disablePortal && container) {\n            setMountNode(getContainer(container));\n        }\n    }, [container, disablePortal]);\n\n    if (!disablePortal) return <></>;\n\n    return mountNode ? createPortal(children, mountNode) : mountNode;\n}","import { useState, useEffect } from 'react';\nimport { MaxUint256 } from \"@ethersproject/constants\";\n\nimport { useState as useUserState } from '../../state/user';\n\nimport { useWeb3ReactCore } from '../wallet';\nimport { getFormatNumber, getWei } from '../../utils';\n\nimport { useERC20Contract } from './index';\nimport { TokenMapKey } from './hooks';\n\nexport enum StatusEnums {\n    FINISH,\n    LOADING,\n    ERROR,\n}\n\nexport const useTokenBalances = (token?: TokenMapKey | string) => {\n    const { account } = useWeb3ReactCore();\n\n    const [status, setStaus] = useState<StatusEnums>(StatusEnums.FINISH);\n    const [balance, setBalance] = useState<string>();\n\n    const erc20Contract = useERC20Contract(token);\n\n    // console.log(\"erc20Contract\", erc20Contract);\n\n    const getTokenBalance = async () => {\n        if (!erc20Contract || !account || !token) return;\n\n        setStaus(StatusEnums.LOADING);\n\n        try {\n            const balance = await erc20Contract.balanceOf(account);\n\n            setBalance(getFormatNumber(balance));\n            setStaus(StatusEnums.FINISH);\n        } catch (error) {\n            setStaus(StatusEnums.ERROR);\n\n            console.error(error);\n        }\n    }\n\n    useEffect(() => {\n        getTokenBalance();\n    }, [erc20Contract, token]);\n\n    return { status, balance, reload: getTokenBalance };\n};\n\n\nexport const useApprove = (token: string | null) => {\n    const erc20Contract = useERC20Contract(token);\n\n    return async (address: string | null) => {\n        if (!erc20Contract || !address) return;\n\n        try {\n            return erc20Contract.approve(address, MaxUint256);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const useAllowance = (token: string | null) => {\n    const { address } = useUserState();\n    const { account } = useWeb3ReactCore();\n    const [allowance, setAllowance] = useState<string>();\n\n    const erc20Contract = useERC20Contract(token);\n\n    // console.log(\"erc20Contract\", erc20Contract);\n\n    const getAllowanceValue = async () => {\n        if (!erc20Contract || !address || !account || !token) return;\n\n        try {\n            const value = await erc20Contract.allowance(account, address);\n            setAllowance(getFormatNumber(value));\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    useEffect(() => {\n        getAllowanceValue();\n    }, [erc20Contract, token]);\n\n    return { allowance, reload: getAllowanceValue };\n}","import React from 'react';\nimport styled from 'styled-components';\n\nimport { t } from '@lingui/macro';\n\nimport Button from '../Button';\nimport Portal from '../Portal';\nimport { showDom } from '../../HOC/show';\n\nconst ModalWrapper = styled.div`\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nz-index: 9;\n`;\n\nconst ModalContent = styled.div`\nmin-width: 350px;\nborder-radius: 3px 3px 0 0;\nbackground: var(--modal);\nbox-shadow: var(--modal-shadow);\n`;\n\nconst ModalTitle = styled.div`\ndisplay: flex;\njustify-content: flex-start;\nfont-weight: 600;\ncolor: #fff;\nalign-items: center;\nline-height: 17px;\npadding: 15px 20px;\nborder-radius: 3px 3px 0 0;\nbackground-color: var(--modal-title);\n`;\n\nconst ModalBody = styled.div`\npadding: 30px 20px;\nbackground: var(--modal-body);\n`;\n\nconst ModalFooter = styled.div`\ndisplay: inline-flex;\nfloat: right;\n\n.button-wrap  {\n    &:first-child .button-box {\n        border-radius: 0;\n        border-bottom-left-radius: 3px;\n    }\n\n    &:last-child .button-box {\n        border-radius: 0;\n        border-bottom-right-radius: 3px;\n    }\n}\n`;\n\ninterface ButtonInterface {\n    text?: string\n    disabled?: boolean\n    loading?: boolean\n    onClick?: () => void\n}\n\ninterface ModalContainerInterface {\n    title?: string | React.ReactNode\n    width?: number | string\n    cancelButtonProps?: ButtonInterface\n    confirmButtonProps?: ButtonInterface\n}\n\nconst ModalWrap: React.FC<ModalContainerInterface> = ({ children, title, width, cancelButtonProps, confirmButtonProps }) => {\n\n    return <ModalWrapper>\n        <div style={{ width }}>\n            <ModalContent>\n                <ModalTitle>{title ?? \"\"}</ModalTitle>\n                <ModalBody>{children}</ModalBody>\n            </ModalContent>\n            <ModalFooter>\n                <Button\n                    theme=\"gray\"\n                    disabled={confirmButtonProps?.loading}\n                    onClick={cancelButtonProps?.onClick}\n                >\n                    {cancelButtonProps?.text ?? t`取消`}\n                </Button>\n                <Button\n                    theme=\"primary\"\n                    disabled={confirmButtonProps?.disabled}\n                    loading={confirmButtonProps?.loading}\n                    onClick={confirmButtonProps?.onClick}\n                >\n                    {confirmButtonProps?.text ?? t`确认`}\n                </Button>\n            </ModalFooter>\n        </div>\n    </ModalWrapper>\n}\n\ninterface ModalInterface extends ModalContainerInterface {\n    open?: boolean\n}\n\ninterface ModalFuncProps extends ModalContainerInterface {\n    content?: string | React.ReactNode\n}\n\nconst Modal: React.FC<ModalInterface> = ({ open, ...other }) => {\n\n    return <Portal disablePortal={open}>\n        <ModalWrap {...other} />\n    </Portal>\n}\n\n\nexport default Modal;\n\nexport const modal = {\n    show({ content, ...other }: ModalFuncProps) {\n        showDom(ModalWrap, { children: content, ...other });\n    }\n}\n\n","import { useMemo } from \"react\";\n\nimport { useSmartWalletContract } from \"./index\";\nimport { useAddressAndABI, useFuncEncode, useTokenAddress } from \"./hooks\";\n\nimport { useWeb3ReactCore } from \"../wallet\";\n\nimport { useAddress } from \"../../state/user\";\nimport { getWei, abiEncode } from '../../utils';\n\nconst offchainData = [\"0x0000000000000000000000000000000000000000\", \"0x0000000000000000000000000000000000000000\", \"0x0000000000000000000000000000000000000000\", 0, 0, 0];\n\nexport const useBoost = (tokenAddressArray?: string[], amount?: string, minPrice?: string, apy?: number) => {\n    const { account } = useWeb3ReactCore();\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const uniswapAddress = useTokenAddress(\"UNISWAP_WRAPPER\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    const [fromAddress, toAddress] = tokenAddressArray ?? [];\n\n    // console.log(\"smartWalletContract\", smartWalletContract);\n\n    const { address: USER_HANDLE_OTHER_ADDRESS, abi: USER_HANDLE_OTHER_ABI } = useAddressAndABI(\"USER_HANDLE_OTHER\");\n\n    const uniswapWrapper = useMemo(() => fromAddress && toAddress ? abiEncode([\"address[]\"], [[fromAddress, toAddress]]) : \"\", [fromAddress, toAddress]);\n\n    const exchangeData = [fromAddress, toAddress, getWei(amount ?? \"0\"), 0, getWei(minPrice ?? \"0\"), 400, account, uniswapAddress, uniswapWrapper, offchainData];\n\n    const userHandleBoostEncode = useFuncEncode(USER_HANDLE_OTHER_ABI, \"boost\", fromAddress && toAddress && amount && apy ? [marketAddress, exchangeData, apy, 0, 1] : []);\n\n    // console.log(apy, userHandleBoostEncode);\n\n    return () => {\n        if (!smartWalletContract) return;\n\n        try {\n            return smartWalletContract.execute(USER_HANDLE_OTHER_ADDRESS, userHandleBoostEncode);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const useRepay = (tokenAddressArray?: string[], amount?: string, minPrice?: string, apy?: number) => {\n    const { account } = useWeb3ReactCore();\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const uniswapAddress = useTokenAddress(\"UNISWAP_WRAPPER\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    const [fromAddress, toAddress] = tokenAddressArray ?? [];\n\n    // console.log(\"smartWalletContract\", smartWalletContract);\n\n    const { address: USER_HANDLE_OTHER_ADDRESS, abi: USER_HANDLE_OTHER_ABI } = useAddressAndABI(\"USER_HANDLE_OTHER\");\n\n    const uniswapWrapper = useMemo(() => fromAddress && toAddress ? abiEncode([\"address[]\"], [[fromAddress, toAddress]]) : \"\", [fromAddress, toAddress]);\n\n    const exchangeData = [fromAddress, toAddress, getWei(amount ? amount : \"0\"), 0, getWei(minPrice ?? \"0\"), 400, account, uniswapAddress, uniswapWrapper, offchainData];\n\n    // console.log(exchangeData);\n\n    const userHandleRepayEncode = useFuncEncode(USER_HANDLE_OTHER_ABI, \"repay\", fromAddress && toAddress && amount && apy ? [marketAddress, exchangeData, apy, 0, 1] : []);\n\n    // console.log(apy, userHandleRepayEncode);\n\n    return () => {\n        if (!smartWalletContract) return;\n\n        try {\n            return smartWalletContract.execute(USER_HANDLE_OTHER_ADDRESS, userHandleRepayEncode);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\n\nexport const useDeposit = (aaveAddress?: string, amount?: string) => {\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    // console.log(\"smartWalletContract\", smartWalletContract);\n\n    const { address: USER_HANDLE_ADDRESS, abi: USER_HANDLE_ABI } = useAddressAndABI(\"USER_HANDLE\");\n\n    const userHandleDepositEncode = useFuncEncode(USER_HANDLE_ABI, \"deposit\", amount && aaveAddress ? [marketAddress, aaveAddress, getWei(amount)] : []);\n\n    return (token: any, isGas?: boolean,) => {\n        if (!smartWalletContract) return;\n\n        try {\n            if (token === \"ETH\") {\n                if (isGas) {\n                    return smartWalletContract.estimateGas.execute(USER_HANDLE_ADDRESS, userHandleDepositEncode, { value: getWei(amount) });\n                } else {\n                    return smartWalletContract.execute(USER_HANDLE_ADDRESS, userHandleDepositEncode, { value: getWei(amount) });\n                }\n\n            } else {\n                if (isGas) {\n                    return smartWalletContract.estimateGas.execute(USER_HANDLE_ADDRESS, userHandleDepositEncode);\n                } else {\n                    return smartWalletContract.execute(USER_HANDLE_ADDRESS, userHandleDepositEncode);\n                }\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const useWithdraw = (aaveAddress?: string, amount?: string) => {\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    // console.log(\"smartWalletContract\", smartWalletContract);\n\n    const { address: USER_HANDLE_ADDRESS, abi: USER_HANDLE_ABI } = useAddressAndABI(\"USER_HANDLE\");\n\n    const userHandleWithdrawEncode = useFuncEncode(USER_HANDLE_ABI, \"withdraw\", amount && aaveAddress ? [marketAddress, aaveAddress, getWei(amount)] : []);\n\n    return () => {\n        if (!smartWalletContract) return;\n\n        try {\n            return smartWalletContract.execute(USER_HANDLE_ADDRESS, userHandleWithdrawEncode);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const useBorrow = (aaveAddress?: string, amount?: string, apy?: number) => {\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    const { address: USER_HANDLE_ADDRESS, abi: USER_HANDLE_ABI } = useAddressAndABI(\"USER_HANDLE\");\n\n    // 1 固定汇率 2 动态汇率\n    const userHandleBorrowEncode = useFuncEncode(USER_HANDLE_ABI, \"borrow\", amount && aaveAddress && apy ? [marketAddress, aaveAddress, getWei(amount), apy] : []);\n\n    return () => {\n        if (!smartWalletContract) return;\n\n        try {\n            return smartWalletContract.execute(USER_HANDLE_ADDRESS, userHandleBorrowEncode);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport const usePayback = (aaveAddress?: string, amount?: string, apy?: number) => {\n    const address = useAddress();\n\n    const marketAddress = useTokenAddress(\"AAVE_MARKET\");\n    const smartWalletContract = useSmartWalletContract(address);\n\n    const { address: USER_HANDLE_ADDRESS, abi: USER_HANDLE_ABI } = useAddressAndABI(\"USER_HANDLE\");\n\n    // 1 固定汇率 2 动态汇率\n    const userHandlePaybackEncode = useFuncEncode(USER_HANDLE_ABI, \"payback\", aaveAddress && amount && apy ? [marketAddress, aaveAddress, getWei(amount), apy] : []);\n\n    // console.log(\"usePayback\", marketAddress, aaveAddress, amount, apy);\n\n    return () => {\n        if (!smartWalletContract) return;\n\n        // console.log(USER_HANDLE_ADDRESS, userHandlePaybackEncode);\n\n        try {\n            return smartWalletContract.execute(USER_HANDLE_ADDRESS, userHandlePaybackEncode);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}","import { useEffect } from 'react';\n\nimport { useTokenPrice } from '../contract/useMarketInfo';\n\nimport { useAppDispatch } from '../../state/hooks';\nimport { useState as useAfterState, updateState } from '../../state/after';\nimport { fullNumber } from '../../utils';\n\nimport { HandleType } from '../../types';\n\nexport const useReloadAfter = () => {\n    const dispatch = useAppDispatch();\n\n    return () => {\n        dispatch(updateState({ loading: false, type: undefined, supply: undefined, borrow: undefined }));\n    }\n}\n\nexport const useAdvancedAfter = (type: HandleType, amount?: string, tokens?: string[], tokenAddressArray?: string[]) => {\n    const dispatch = useAppDispatch();\n    const reloadAfter = useReloadAfter();\n\n    const { type: afterType } = useAfterState();\n    const { loading, prices } = useTokenPrice(tokenAddressArray);\n\n    const change = () => {\n        if (afterType && afterType !== type && !amount) return;\n\n        if (!amount || !Number(amount) || !tokens || !tokenAddressArray) {\n            reloadAfter();\n            return;\n        }\n\n        dispatch(updateState({ type, loading }));\n\n        if (!loading && prices) {\n            const [from, to] = tokens;\n            const [fromPrice, toPrice] = prices;\n\n            const toAmount = fullNumber(Number(amount) * Number(fromPrice) / Number(toPrice));\n\n            if (!toAmount) {\n                console.log(toAmount);\n                return\n            }\n\n            const fromInfo = { price: fromPrice, amount, symbol: from, };\n            const toInfo = { price: toPrice, amount: toAmount, symbol: to, };\n\n            dispatch(updateState({\n                type,\n                loading,\n                supply: type === \"Boost\" ? toInfo : fromInfo,\n                borrow: type === \"Boost\" ? fromInfo : toInfo,\n            }))\n        }\n    }\n\n    useEffect(() => {\n        change();\n    }, [prices, amount, tokens, tokenAddressArray]);\n}\n\nexport const useCollateralAfter = (type: HandleType, amount?: string, token?: string, tokenAddress?: string) => {\n    const dispatch = useAppDispatch();\n    const reloadAfter = useReloadAfter();\n\n    const { type: afterType } = useAfterState();\n    let { loading, prices } = useTokenPrice(tokenAddress);\n\n    const change = () => {\n        if (afterType && afterType !== type && !amount) return;\n\n        if (!amount || !Number(amount) || !token || !tokenAddress) {\n            reloadAfter();\n            return;\n        }\n\n        dispatch(updateState({ type, loading }));\n\n        const [price] = token === \"ETH\" ? [\"1\"] : prices ?? [];\n\n        if (!loading && price) {\n            dispatch(updateState({\n                type,\n                loading,\n                supply: { price, amount, symbol: token, },\n                borrow: undefined\n            }))\n        }\n    }\n\n    useEffect(() => {\n        change();\n    }, [prices, amount, token, tokenAddress]);\n}\n\nexport const useDebtAfter = (type: HandleType, amount?: string, token?: string, tokenAddress?: string) => {\n    const dispatch = useAppDispatch();\n    const reloadAfter = useReloadAfter();\n\n    const { type: afterType } = useAfterState();\n    let { loading, prices } = useTokenPrice(tokenAddress);\n\n    const change = () => {\n        if (afterType && afterType !== type && !amount) return;\n\n        if (!amount || !Number(amount) || !token || !tokenAddress) {\n            reloadAfter();\n            return;\n        }\n\n        dispatch(updateState({ type, loading }));\n\n        const [price] = token === \"ETH\" ? [\"1\"] : prices ?? [];\n\n        if (!loading && price) {\n            dispatch(updateState({\n                type,\n                loading,\n                supply: undefined,\n                borrow: { price, amount, symbol: token, },\n            }))\n        }\n    }\n\n    useEffect(() => {\n        change();\n    }, [prices, amount, token, tokenAddress]);\n}\n\n\n\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\n\nimport Button from \"../../components/Button\";\nimport Select from '../../components/Select';\nimport Modal from \"../../components/Modal\";\nimport Tips, { TipsInfo } from \"../../components/Tips\";\nimport { EmptyLoading } from \"../../components/Empty\";\nimport { message } from \"../../components/Message\";\n\nimport { useReload } from \"../../hooks/contract/reload\";\nimport { useBoost, useRepay } from '../../hooks/contract/handle';\nimport { useTokenPrice } from \"../../hooks/contract/useMarketInfo\";\n\nimport { useReloadAfter, useAdvancedAfter } from \"../../hooks/after\";\n\nimport { useUserInfo } from \"../../state/user\";\nimport {\n    useStableCoins,\n    useOtherCoins,\n    useSupplyMap,\n    useBorrowMap,\n    useCoinAddressArray,\n    useTokenInfo,\n} from '../../state/market';\nimport { useState as useAfterState } from \"../../state/after\";\n\nimport { Font, Flex } from '../../styled';\nimport { numberDelimiter, numberRuler, fullNumber, getBoostMax, getRepayMax, getHandleTheme } from \"../../utils\";\nimport { HandleType } from \"../../types\";\n\n\nimport {\n    TabPanelGrid,\n    HandleText,\n    HandleWrapper,\n    InputControl,\n    SelectControl,\n    SelectEmpty,\n    InputMax,\n    SelectOptionItem,\n    APYSelect\n} from './styled';\n\nconst SelectRender: React.FC<{\n    value: string\n    text: string\n}> = ({ value, text }) => {\n    return <Flex flexDirection=\"column\">\n        <Font>{value}</Font>\n        <Font fontSize=\"12px\" color=\"#939DA7\">{text}</Font>\n    </Flex>\n}\n\nconst Handle: React.FC<{\n    type: HandleType\n    max: string\n    labelText: string | React.ReactNode\n    labelTips: string | React.ReactNode\n    coins: any[][]\n    leftText?: string | React.ReactNode\n    rightText?: string | React.ReactNode\n    inputValue?: string\n    selectText: string[]\n    selectValue?: string[]\n    selectOptionItemRender?: React.ReactNode\n    buttonProps: {\n        text: string | React.ReactNode\n        theme: \"primary\" | \"gray\" | \"buy\" | \"sell\"\n        loading?: boolean\n        click?: () => void\n    }\n    onInputChange?: (value?: string) => void\n    onSelectChange?: (value: (string | null)[]) => void\n\n}> = ({\n    type,\n    labelText,\n    labelTips,\n    max,\n    leftText,\n    rightText,\n    coins,\n    selectText,\n    inputValue,\n    selectValue,\n    selectOptionItemRender,\n    buttonProps,\n    onInputChange,\n    onSelectChange\n}) => {\n        const [[from, to], setTokens] = useState<(string | null)[]>([]);\n        const [value, setValue] = useState<string | null>(null);\n\n        const [symbol] = to ? to.split(\"_\") : [];\n\n        const [fromCoins, toCoins] = coins;\n\n        const theme = useMemo(() => getHandleTheme(type), [type]);\n\n        const isDisabled = useMemo(() => {\n            if (!coins.length) {\n                return { tips: t`暂无可操作币种`, disabled: true }\n            } else if (!value) {\n                return { tips: t`未输入值`, disabled: true }\n            } else if (Number(value) > Number(max)) {\n                return { tips: t`数值大于最大值`, disabled: true }\n            } else if (Number(value) <= 0) {\n                return { tips: t`数值不能小于0`, disabled: true }\n            } else return { tips: \"\", disabled: false }\n        }, [coins, value, max]);\n\n        const handleInputChange = (value: any) => {\n            setValue(value);\n            onInputChange && onInputChange(value);\n        };\n\n        const handleSelectChange = (value: any) => {\n            setTokens(value);\n            onSelectChange && onSelectChange(value);\n        };\n\n        useEffect(() => {\n            if (inputValue !== value) {\n                setValue(inputValue ?? null);\n            }\n        }, [inputValue]);\n\n        useEffect(() => {\n            if (!selectValue || selectValue[0] !== from || selectValue[1] !== to) {\n                setTokens(selectValue ?? []);\n            }\n        }, [selectValue]);\n\n        return <div>\n            <HandleText>\n                <Font fontSize=\"13px\" color=\"#939DA7\">{leftText}</Font>\n                <Font fontSize=\"13px\" color=\"#939DA7\" onClick={() => handleInputChange(max)}>{rightText}</Font>\n            </HandleText>\n            <HandleWrapper theme={theme}>\n                <InputControl theme={theme}>\n                    <label>\n                        <Flex alignItems=\"center\">\n                            <div className=\"input-label\">\n                                <Font {...{ fontSize: \"16px\", color: \"rgba(255, 255, 255, .5)\" }}>\n                                    <Flex alignItems=\"center\">\n                                        <TipsInfo text={labelTips} />\n                                        <span>{labelText}</span>\n                                    </Flex>\n                                </Font>\n                            </div>\n                            <input type=\"number\" placeholder=\"0\" value={value ?? \"\"} onChange={(e: any) => handleInputChange(e.target.value)} />\n                        </Flex>\n                    </label>\n                </InputControl>\n\n                <SelectControl>\n                    {fromCoins?.length ?\n                        <Select\n                            render={<SelectRender value={from ?? \"\"} text={selectText[0]} />}\n                            value={from ?? \"\"}\n                            dataSource={fromCoins}\n                            optionPopoverProps={{ style: { maxHeight: 240 } }}\n                            onChange={(select: any) => handleSelectChange([select.value, to])}\n                        /> :\n                        <SelectEmpty text={selectText[0]} />}\n                </SelectControl>\n\n                <SelectControl>\n                    {toCoins?.length ?\n                        <Select\n                            render={<SelectRender value={symbol ?? \"\"} text={selectText[1]} />}\n                            value={to ?? \"\"}\n                            dataSource={toCoins}\n                            optionItemRender={selectOptionItemRender}\n                            optionPopoverProps={{ style: { maxHeight: 240 } }}\n                            onChange={(select: any) => handleSelectChange([from, select.value])}\n                        /> :\n                        <SelectEmpty text={selectText[1]} />}\n                </SelectControl>\n            </HandleWrapper>\n            <Flex justifyContent=\"flex-end\">\n                <Button\n                    theme={buttonProps.theme}\n                    disabled={isDisabled.disabled}\n                    loading={buttonProps.loading}\n                    onClick={buttonProps.click}\n                >\n                    <Tips text={isDisabled.tips} >\n                        <div>{buttonProps.text}</div>\n                    </Tips>\n                </Button>\n            </Flex>\n        </div>\n    }\n\nconst Boost = ({ handle }: { handle: HandleType }) => {\n    const [open, setOpen] = useState<boolean>(false);\n    const [tokens, setTokens] = useState<string[]>();\n    const [amount, setAmount] = useState<string>();\n\n    const tokenAddressArray = useCoinAddressArray(tokens);\n    useAdvancedAfter(handle, amount, tokens, tokenAddressArray);\n    const { type } = useAfterState();\n\n    const stableCoins = useStableCoins() ?? [];\n    const otherCoins = useOtherCoins() ?? [];\n\n    const { availableBorrowsETH } = useUserInfo() ?? {};\n\n    const [from, to] = tokens ?? [];\n\n    const { price, stableBorrowRateEnabled } = useTokenInfo(from) ?? {};\n    const { collateralFactor } = useTokenInfo(to) ?? {};\n\n    const max = useMemo(() =>\n        availableBorrowsETH && collateralFactor && price ?\n            fullNumber(getBoostMax(Number(availableBorrowsETH), Number(collateralFactor), true) / price) : undefined,\n        [availableBorrowsETH, collateralFactor, price]);\n\n    const reload = useReload();\n\n    const handleClick = () => {\n        if (!tokens || !amount) return;\n\n        setOpen(true);\n    }\n\n    const handleReload = () => {\n        reload();\n        setAmount(undefined);\n    }\n\n    useEffect(() => {\n        if (!tokens && stableCoins?.length && otherCoins?.length) {\n            setTokens([stableCoins[0], otherCoins[0]])\n        }\n    }, [stableCoins, otherCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <>\n        <Handle\n            type={handle}\n            max={max ?? \"0\"}\n            labelText={<Trans>加杠杆：</Trans>}\n            labelTips={<Trans>在单笔交易中完成增加债务购买更多抵押品 <br />并将其添加到储蓄中这三个步骤。</Trans>}\n            leftText={tokens ? t`Borrow ${tokens[0]} → Swap → Supply ${tokens[1]}` : \"\"}\n            rightText={<InputMax max={max} />}\n            coins={[stableCoins, otherCoins]}\n            selectText={[t`借币`, t`质押`]}\n            inputValue={amount ?? \"\"}\n            selectValue={tokens}\n            buttonProps={{\n                text: t`加杠杆`,\n                theme: \"buy\",\n                click: handleClick\n            }}\n            onInputChange={setAmount}\n            onSelectChange={(value: any) => setTokens(value)}\n        />\n\n        {open &&\n            <BoostModal\n                {...{ open, amount, tokens, tokenAddressArray, stable: stableBorrowRateEnabled }}\n                onClose={() => setOpen(false)}\n                onReload={handleReload}\n            />}\n    </>\n}\n\nconst BoostModal: React.FC<{\n    open: boolean\n    amount?: string\n    tokens?: string[]\n    tokenAddressArray?: string[]\n    stable?: boolean\n    onClose: () => void\n    onReload: () => void\n}> = ({ open, amount, tokens, tokenAddressArray, stable, onClose, onReload }) => {\n    const [apy, setApy] = useState<number>();\n    const [loading, setLoading] = useState<boolean>(false);\n\n    const { loading: priceLoading, prices } = useTokenPrice(tokenAddressArray);\n\n    const [from, to] = tokens ?? [];\n\n    let [fromPrice, toPrice]: (number | string)[] = prices ?? [];\n\n    const tradeInfo = useMemo(() => {\n        if (!fromPrice || !toPrice || !amount) return null;\n\n        fromPrice = Number(fromPrice);\n        toPrice = Number(toPrice);\n\n        const amountNumber = Number(amount);\n        const amountTips = numberDelimiter(amount);\n        const amountCount = numberRuler(amountNumber);\n\n        const tokenCount = fromPrice * amountNumber / toPrice;\n        const fromCount = numberRuler(toPrice / fromPrice);\n        const toCount = numberRuler(fromPrice / toPrice);\n\n        return { amountCount, amountTips, tokenCount, fromCount, toCount }\n    }, [amount, fromPrice, toPrice]);\n\n    const boost = useBoost(tokenAddressArray, amount, undefined, apy);\n\n    // console.log(\"BoostModal\", priceLoading, fromPrice, toPrice, tradeInfo);\n\n    const handle = () => {\n        setLoading(true);\n\n        boost().then((res: any) => {\n            console.log(res);\n\n            res.wait().then((res: any) => {\n                console.log(res);\n                message.success(t`操作成功`);\n\n                setLoading(false);\n                onReload();\n                onClose();\n            }).catch((error: any) => {\n                setLoading(false);\n                message.error(error.message);\n                console.error(error);\n            });\n        }).catch((error: any) => {\n            setLoading(false);\n            message.error(error.message);\n            console.error(error);\n        });\n    }\n\n    return <Modal\n        open={open}\n        width={470}\n        title={t`加杠杆`}\n        cancelButtonProps={{ onClick: onClose }}\n        confirmButtonProps={{\n            text: t`加杠杆`,\n            disabled: priceLoading,\n            loading,\n            onClick: handle\n        }}\n    >\n        <Font fontSize=\"14px\" color=\"#939DA7\">\n            <Trans>加杠杆是借入更多 {from} 以获得更多的 {to}。这将会以增加你<br />的借贷能力为代价增加了你的杠杆。</Trans>\n        </Font>\n\n        <br />\n        {!priceLoading && tradeInfo ?\n            <>\n                <Font fontSize=\"14px\" color=\"#939DA7\">\n                    <Trans>正在购买</Trans>\n                </Font>\n\n                <Font fontSize=\"30px\"><Tips text={fullNumber(tradeInfo.tokenCount)}><span>{numberRuler(tradeInfo.tokenCount)} {to}</span></Tips></Font>\n\n                <Font fontSize=\"14px\" color=\"#939DA7\">\n                    <Trans>与&nbsp;</Trans>\n\n                    <Tips text={tradeInfo.amountTips}><span> {tradeInfo.amountCount} {from} </span></Tips>\n\n                    <Trans>&nbsp;按价格&nbsp;</Trans>\n\n                    <Tips text={`${tradeInfo.fromCount} ${from}/${to} = ${tradeInfo.toCount} ${to}/${from}`}><span> {tradeInfo.fromCount} {from + \"/\" + to} </span></Tips>\n                </Font>\n\n                <APYSelect stable={!stable} onChange={setApy} />\n            </> : <EmptyLoading />}\n    </Modal>\n}\n\nconst Repay = ({ handle }: { handle: HandleType }) => {\n    const [open, setOpen] = useState<boolean>(false);\n    const [tokens, setTokens] = useState<(string)[]>();\n    const [amount, setAmount] = useState<string>();\n\n    const supplyMap = useSupplyMap();\n    const borrowMap = useBorrowMap();\n\n    const supplyCoins = useMemo(() => supplyMap ? Object.keys(supplyMap) : [], [supplyMap]);\n    const boorowCoins = useMemo(() => borrowMap ? Object.entries(borrowMap).map(([key, item]) => ({ value: key, name: item.symbol, loanType: item.loanType })) : [], [borrowMap]);\n\n    const [from, to] = tokens ?? [];\n    const [symbol, apy] = to ? to.split(\"_\") : [];\n    const tokenCopy = useMemo(() => [from, symbol], [from, symbol]);\n\n    const tokenAddressArray = useCoinAddressArray(tokenCopy);\n    useAdvancedAfter(handle, amount, tokens, tokenAddressArray);\n    const { type } = useAfterState();\n\n    const fromToeknInfo = supplyMap?.[from];\n    const toToeknInfo = borrowMap?.[to];\n\n    const max = useMemo(() => fromToeknInfo && toToeknInfo ? getRepayMax(fromToeknInfo, toToeknInfo) : undefined, [fromToeknInfo, toToeknInfo]);\n\n    const reload = useReload();\n\n    const handleClick = () => {\n        if (!tokens || !amount) return;\n\n        setOpen(true);\n    }\n\n    const handleReload = () => {\n        reload();\n        setAmount(undefined);\n    }\n\n    useEffect(() => {\n        if (!tokens && supplyCoins.length && boorowCoins.length) setTokens([supplyCoins[0], boorowCoins[0].value]);\n    }, [supplyCoins, boorowCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <>\n        <Handle\n            type={handle}\n            max={max ?? \"0\"}\n            labelText={<Trans>减杠杆：</Trans>}\n            labelTips={<Trans>在单笔交易中完成取出储蓄抵押品<br />以购买借入资产并偿还债务三个步骤。</Trans>}\n            leftText={tokens ? t`Withdraw ${from} ${from === symbol ? \"\" : \"→ Swap\"} → Payback ${symbol}` : \"\"}\n            rightText={<InputMax max={max} />}\n            coins={[supplyCoins, boorowCoins]}\n            selectText={[t`减少质押`, t`还币`]}\n            inputValue={amount}\n            selectValue={tokens}\n            selectOptionItemRender={<SelectOptionItem />}\n            buttonProps={{\n                text: t`减杠杆`,\n                theme: \"sell\",\n                click: handleClick\n            }}\n            onInputChange={setAmount}\n            onSelectChange={(value: any) => setTokens(value)}\n        />\n\n        {open &&\n            <RepayModal\n                {...{ open, amount, tokens: [from, symbol], tokenAddressArray, apy }}\n                onClose={() => setOpen(false)}\n                onReload={handleReload}\n            />}\n    </>\n}\n\nconst RepayModal: React.FC<{\n    open: boolean\n    apy: string | null\n    amount?: string\n    tokens?: string[]\n    tokenAddressArray?: string[]\n    onClose: () => void\n    onReload: () => void\n}> = ({ open, apy, amount, tokens, tokenAddressArray, onClose, onReload }) => {\n    const [loading, setLoading] = useState<boolean>(false);\n\n    const [from, to] = tokens ?? [];\n\n    const { loading: priceLoading, prices } = useTokenPrice(tokenAddressArray);\n\n    let [fromPrice, toPrice]: (number | string)[] = prices ?? [];\n\n    const tradeInfo = useMemo(() => {\n        if (!fromPrice || !toPrice || !amount) return null;\n\n        fromPrice = Number(fromPrice);\n        toPrice = Number(toPrice);\n\n        const amountNumber = Number(amount);\n        const amountTips = numberDelimiter(amount);\n        const amountCount = numberRuler(amountNumber);\n\n        const tokenCount = fromPrice * amountNumber / toPrice;\n        const fromCount = numberRuler(toPrice / fromPrice);\n        const toCount = numberRuler(fromPrice / toPrice);\n\n        return { amountCount, amountTips, tokenCount, fromCount, toCount }\n    }, [amount, fromPrice, toPrice]);\n\n    const repay = useRepay(tokenAddressArray, amount, undefined, Number(apy) - 1);\n\n    // console.log(\"RepayModal\", priceLoading, fromPrice, toPrice, tradeInfo);\n\n    const handle = () => {\n        setLoading(true);\n\n        repay().then((res: any) => {\n            console.log(res);\n            res.wait().then((res: any) => {\n                setLoading(false);\n                console.log(res);\n                message.success(t`操作成功`);\n\n                onClose();\n                onReload();\n            }).catch((error: any) => {\n                setLoading(false);\n                message.error(error.message);\n                console.error(error);\n            });\n        }).catch((error: any) => {\n            setLoading(false);\n            message.error(error.message);\n            console.error(error);\n        });\n    }\n\n    return <Modal\n        open={open}\n        width={470}\n        title={t`减杠杆`}\n        cancelButtonProps={{ onClick: onClose }}\n        confirmButtonProps={{\n            text: t`减杠杆`,\n            disabled: priceLoading,\n            loading,\n            onClick: handle\n        }}\n    >\n        <Font fontSize=\"14px\" color=\"#939DA7\">\n            <Trans>减杠杆是使用储蓄的 {from} 还款 {to} 债务。这降低了您的杠杆，<br /> 但也降低了您的借贷能力，让您的仓位更安全。</Trans>\n        </Font>\n\n        <br />\n        {!priceLoading && tradeInfo ?\n            <>\n                <Font fontSize=\"14px\" color=\"#939DA7\">\n                    <Trans>还款中</Trans>\n                </Font>\n\n                <Font fontSize=\"30px\"><Tips text={fullNumber(tradeInfo.tokenCount)}><span>{numberRuler(tradeInfo.tokenCount)} {to}</span></Tips></Font>\n\n                <Font fontSize=\"14px\" color=\"#939DA7\">\n                    <Trans>与&nbsp;</Trans>\n\n                    <Tips text={tradeInfo.amountTips}><span> {tradeInfo.amountCount} {from} </span></Tips>\n\n                    <Trans>&nbsp;按价格&nbsp;</Trans>\n\n                    <Tips text={`${tradeInfo.fromCount} ${from}/${to} = ${tradeInfo.toCount} ${to}/${from}`}><span> {tradeInfo.fromCount} {from + \"/\" + to} </span></Tips>\n                </Font>\n                <Font fontSize=\"14px\" color=\"#939DA7\">\n                    <Tips text={<Trans>If debt is fully paid off by Repay, the remainder of the <br /> Repay amount will be returned to your wallet as DAI</Trans>}>\n                        <span><Trans>(Remainder of collateral will be returned as {to})</Trans></span>\n                    </Tips>\n                </Font>\n            </> : <EmptyLoading />}\n    </Modal>\n}\n\nconst Advanced = () => {\n    const reload = useReloadAfter();\n\n    useEffect(() => {\n        reload();\n    }, []);\n\n    return <TabPanelGrid>\n        <Boost handle=\"Boost\" />\n        <Repay handle=\"Repay\" />\n    </TabPanelGrid>\n}\n\nexport default Advanced;","import { useState, useEffect, useMemo } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\n\nimport Tips, { TipsInfo } from \"../../components/Tips\";\nimport Button from \"../../components/Button\";\nimport Select from '../../components/Select';\nimport { message } from \"../../components/Message\";\n\nimport { useApprove, useAllowance } from '../../hooks/contract/erc20';\n\nimport { useState as useUserState } from \"../../state/user\";\n\nimport { Font, Flex } from '../../styled';\n\nimport { fullNumber, getHandleTheme } from \"../../utils\";\n\nimport { HandleType } from \"../../types\";\n\nimport { HandleText, HandleWrapper, InputControl, SelectControl, SelectEmpty } from './styled';\n\nconst Handle: React.FC<{\n    type: HandleType\n    max?: string\n    labelText: string | React.ReactNode\n    labelTips: string | React.ReactNode\n    coins: any[]\n    theme?: string\n    leftText?: string | React.ReactNode\n    rightText?: string | React.ReactNode\n    isAuthorize?: boolean\n    inputValue?: string\n    selectValue?: string\n    selectOptionItemRender?: React.ReactNode\n    buttonProps: {\n        text: string | React.ReactNode\n        theme: \"primary\" | \"gray\" | \"buy\" | \"sell\"\n        loading?: boolean\n        click?: () => void\n    }\n    onInputChange?: (value: string | undefined) => void\n    onSelectChange?: (value: string) => void\n}> = ({\n    type,\n    labelText,\n    labelTips,\n    max,\n    leftText,\n    rightText,\n    coins,\n    isAuthorize,\n    inputValue,\n    selectValue,\n    selectOptionItemRender,\n    buttonProps,\n    onInputChange,\n    onSelectChange\n}) => {\n        const [value, setValue] = useState<string | null>(null);\n        const [token, setToken] = useState<string | null>(null);\n        const [loading, setLoading] = useState<boolean>(false);\n\n        const { address } = useUserState();\n\n        const [symbol] = token ? token.split(\"_\") : [];\n\n        const approve = useApprove(symbol !== \"ETH\" ? symbol : null);\n\n        const { allowance, reload: reloadAllowance } = useAllowance(symbol);\n\n        // console.log(\"allowance\", allowance);\n\n        const theme = useMemo(() => getHandleTheme(type), [type]);\n\n        const isShowAuthorizeBtn = useMemo(() =>\n            isAuthorize && token && token !== \"ETH\" && Number(allowance) < Number(value)\n            , [isAuthorize, token, value, allowance]);\n\n        const isDisabled = useMemo(() => {\n            if (isShowAuthorizeBtn) {\n                return { tips: t`需要先进行授权操作`, disabled: true }\n            } else if (!coins.length) {\n                return { tips: t`暂无可操作币种`, disabled: true }\n            } else if (!value) {\n                return { tips: t`未输入值`, disabled: true }\n            } else if (Number(value) > Number(max)) {\n                return { tips: t`数值大于最大值`, disabled: true }\n            } else if (Number(value) <= 0) {\n                return { tips: t`数值不能小于0`, disabled: true }\n            } else return { tips: \"\", disabled: false }\n        }, [isShowAuthorizeBtn, coins, value, max]);\n\n        const handleInputChange = (value: any) => {\n            setValue(value);\n            onInputChange && onInputChange(value);\n        };\n\n        const handleSelectChange = (select: any) => {\n            setToken(select.value);\n            onSelectChange && onSelectChange(select.value);\n        }\n\n        const handleApprove = () => {\n            setLoading(true);\n\n            approve(address)\n                .then((res: any) => {\n                    console.log(res);\n                    res.wait()\n                        .then((res: any) => {\n                            console.log(res);\n                            message.success(t`授权成功`);\n                            setLoading(false);\n                            reloadAllowance();\n                        }).catch((error: any) => {\n                            message.error(error.message);\n                            console.error(error);\n                            setLoading(false);\n                        });\n                })\n                .catch((error: any) => {\n                    message.error(error.message);\n                    console.error(error);\n                    setLoading(false);\n                });\n        }\n\n        useEffect(() => {\n            if (inputValue !== value) {\n                setValue(inputValue ?? null);\n            }\n        }, [inputValue])\n\n        useEffect(() => {\n            if (!token || selectValue !== token) {\n                setToken(selectValue ?? null);\n            }\n        }, [selectValue]);\n\n        return <div>\n            <HandleText>\n                <Font fontSize=\"13px\" color=\"#939DA7\">{leftText}</Font>\n                <Font fontSize=\"13px\" color=\"#939DA7\" onClick={() => handleInputChange(max)}>{rightText}</Font>\n            </HandleText>\n            <HandleWrapper theme={theme}>\n                <InputControl theme={theme}>\n                    <label>\n                        <Flex alignItems=\"center\">\n                            <div className=\"input-label\">\n                                <Font {...{ fontSize: \"16px\", color: \"rgba(255, 255, 255, .5)\" }}>\n                                    <Flex alignItems=\"center\">\n                                        <TipsInfo text={labelTips} />\n                                        <span>{labelText}</span>\n                                    </Flex>\n                                </Font>\n                            </div>\n                            <input disabled={loading || buttonProps?.loading} type=\"number\" placeholder=\"0\" value={value ?? \"\"} onChange={(e: any) => handleInputChange(e.target.value)} />\n                        </Flex>\n                    </label>\n                </InputControl>\n\n                {coins?.length ?\n                    <SelectControl>\n                        <Select\n                            disabled={loading || buttonProps?.loading}\n                            render={<Font fontSize=\"16px\">{symbol}</Font>}\n                            value={token ?? \"\"}\n                            dataSource={coins}\n                            optionItemRender={selectOptionItemRender}\n                            optionPopoverProps={{ style: { maxHeight: 240 } }}\n                            onChange={handleSelectChange}\n                        />\n                    </SelectControl> :\n                    <SelectEmpty />}\n            </HandleWrapper>\n            <Flex justifyContent=\"flex-end\">\n                {isShowAuthorizeBtn &&\n                    <Button\n                        theme=\"primary\"\n                        style={{ marginRight: 10 }}\n                        loading={loading}\n                        onClick={handleApprove}\n                    >\n                        <Trans>授权</Trans>\n                    </Button>}\n\n                <Button\n                    disabled={isDisabled.disabled}\n                    theme={buttonProps.theme}\n                    loading={buttonProps.loading}\n                    onClick={buttonProps.click}\n                >\n                    <Tips text={isDisabled.tips} >\n                        <div>{buttonProps.text}</div>\n                    </Tips>\n                </Button>\n\n            </Flex>\n        </div>\n    }\n\n\nexport default Handle;","import { useState, useEffect, useMemo } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\n\nimport { message } from \"../../components/Message\";\n\nimport { useReload } from \"../../hooks/contract/reload\";\nimport { useDeposit, useWithdraw } from '../../hooks/contract/handle';\nimport { StatusEnums as TokenStatusEnums, useTokenBalances } from '../../hooks/contract/erc20';\n\nimport { useReloadAfter, useCollateralAfter } from \"../../hooks/after\";\n\nimport { useUserInfo } from \"../../state/user\";\nimport { useSupplyCoins, useSupplyMap, useCoinAddress } from '../../state/market';\nimport { useState as useWalletState, WalletStatusEnums } from '../../state/wallet';\nimport { useState as useAfterState } from '../../state/after';\n\nimport { fullNumber, getWithdrawMax } from \"../../utils\";\nimport { HandleType } from \"../../types\";\n\nimport Handle from \"./Handle\";\nimport { TabPanelGrid, InputMax } from './styled';\n\nexport const Supply = ({ handle }: { handle: HandleType }) => {\n    const [token, setToken] = useState<string>();\n    const [amount, setAmount] = useState<string>();\n    const [loadingButton, setLoadingButton] = useState<boolean>();\n\n    const supplyCoins = useSupplyCoins() ?? [];\n\n    const address = useCoinAddress(token);\n    useCollateralAfter(handle, amount, token, address);\n    const { type } = useAfterState();\n\n    const { status: ethStatus, balances: ethBalances } = useWalletState();\n    const { status: supplyStatus, balance: supplayBalances, reload: reloadTokenBalances } = useTokenBalances(token === \"ETH\" ? undefined : token);\n\n    const max = useMemo(() => {\n        if (token == \"ETH\" && ethBalances) {\n            return fullNumber(ethBalances);\n        } else if (token !== \"ETH\" && supplayBalances) {\n            return fullNumber(supplayBalances);\n        }\n        return \"0\";\n    }, [token, ethBalances, supplayBalances]);\n\n    const loading = token === \"ETH\" ? ethStatus === WalletStatusEnums.LOADING : supplyStatus === TokenStatusEnums.LOADING;\n\n    // console.log(max, supplayBalances);\n\n    const deposit = useDeposit(address, amount);\n    const reload = useReload();\n\n    const handleClick = async () => {\n        setLoadingButton(true);\n\n        deposit(token).then((res: any) => {\n            console.log(res);\n            res.wait().then((res: any) => {\n                console.log(res);\n                message.success(t`操作成功`);\n\n                setLoadingButton(false);\n                setAmount(undefined);\n                reload();\n                reloadTokenBalances();\n            }).catch((error: any) => {\n                setLoadingButton(false);\n                message.error(error.message);\n                console.error(error.message);\n            });\n        }).catch((error: any) => {\n            setLoadingButton(false);\n            message.error(error.message);\n            console.error(error.message);\n        });\n    }\n\n    useEffect(() => {\n        if (!token && supplyCoins?.length) setToken(supplyCoins[0]);\n    }, [supplyCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <Handle\n        isAuthorize\n        type={handle}\n        max={max}\n        labelText={<Trans>质押：</Trans>}\n        labelTips={<Trans>储蓄您的资产开始赚取收益。</Trans>}\n        rightText={loading ? t`加载中~` : <InputMax max={max} />}\n        coins={supplyCoins}\n        inputValue={amount ?? \"\"}\n        selectValue={token}\n        buttonProps={{\n            text: t`质押`,\n            theme: \"buy\",\n            loading: loadingButton,\n            click: handleClick\n        }}\n        onInputChange={setAmount}\n        onSelectChange={setToken}\n    />\n}\n\nconst Withdraw = ({ handle }: { handle: HandleType }) => {\n    const [token, setToken] = useState<string>();\n    const [amount, setAmount] = useState<string>();\n    const [loadingButton, setLoadingButton] = useState<boolean>();\n\n    const supplyMap = useSupplyMap();\n    const supplyCoins = useMemo(() => supplyMap ? Object.keys(supplyMap) : [], [supplyMap]);\n\n    const address = useCoinAddress(token);\n    useCollateralAfter(handle, amount, token, address);\n    const { type } = useAfterState();\n\n    const { totalCollateralETH, totalDebtETH } = useUserInfo() ?? {};\n\n    const max = useMemo(() => supplyMap && token ? getWithdrawMax(supplyMap, token, totalCollateralETH, totalDebtETH) : \"0\", [supplyMap, token]);\n\n    const withdraw = useWithdraw(address, amount);\n    const reload = useReload();\n\n    const handleClick = () => {\n        setLoadingButton(true);\n\n        withdraw().then((res: any) => {\n            console.log(res);\n            res.wait().then((res: any) => {\n                console.log(res);\n                message.success(t`操作成功`);\n\n                setLoadingButton(false);\n                setAmount(undefined);\n                reload();\n            }).catch((error: any) => {\n                setLoadingButton(false);\n                message.error(error.message);\n                console.error(error.message);\n            });\n        }).catch((error: any) => {\n            setLoadingButton(false);\n            message.error(error.message);\n            console.error(error.message);\n        });\n    }\n\n    useEffect(() => {\n        if (!token && supplyCoins?.length) setToken(supplyCoins[0]);\n    }, [supplyCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <Handle\n        type={handle}\n        max={max}\n        labelText={<Trans>减少质押：</Trans>}\n        labelTips={<Trans>从您的Aave储蓄中提取资产。</Trans>}\n        rightText={<InputMax max={max} />}\n        coins={supplyCoins}\n        inputValue={amount ?? \"\"}\n        selectValue={token}\n        buttonProps={{\n            text: t`减少质押`,\n            theme: \"sell\",\n            loading: loadingButton,\n            click: handleClick\n        }}\n        onInputChange={setAmount}\n        onSelectChange={setToken}\n    />\n}\n\nconst Collateral = () => {\n    const reload = useReloadAfter();\n\n    useEffect(() => {\n        reload();\n    }, []);\n\n    return <TabPanelGrid>\n        <Supply handle=\"Supply\" />\n        <Withdraw handle=\"Withdraw\" />\n    </TabPanelGrid>\n}\n\nexport default Collateral;","import { useState, useEffect, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { Trans, t } from \"@lingui/macro\";\n\nimport { message } from \"../../components/Message\";\nimport Modal from \"../../components/Modal\";\n\nimport { useReload } from \"../../hooks/contract/reload\";\nimport { useBorrow, usePayback } from '../../hooks/contract/handle';\nimport { StatusEnums as TokenStatusEnums, useTokenBalances } from '../../hooks/contract/erc20';\nimport { useReloadAfter, useDebtAfter } from \"../../hooks/after\";\n\nimport { useUserInfo } from \"../../state/user\";\nimport { useBorrowCoins, useBorrowMap, useCoinAddress, useTokenInfo } from '../../state/market';\nimport { useState as useWalletState, WalletStatusEnums } from '../../state/wallet';\nimport { useState as useAfterState } from '../../state/after';\n\nimport { Font } from '../../styled';\n\nimport { fullNumber } from \"../../utils\";\nimport { WARNING_SVG } from \"../../utils/images\";\nimport { HandleType } from \"../../types\";\n\nimport Handle from \"./Handle\";\nimport { TabPanelGrid, InputMax, SelectOptionItem, APYSelect } from './styled';\n\nconst WarnWrapper = styled.div`\ndisplay: grid;\ngrid-template-columns: auto 1fr;\ngrid-column-gap: 10px;\nalign-items: center;\nmargin-top: 25px;\npadding: 12px;\nborder-radius: 3px;\nbackground-color: rgba(242,201,76,0.3);\n`;\n\nexport const Borrow = ({ handle }: { handle: HandleType }) => {\n    const [token, setToken] = useState<string>();\n    const [amount, setAmount] = useState<string>();\n    const [loadingButton, setLoadingButton] = useState<boolean>();\n    const [open, setOpen] = useState<boolean>(false);\n    const [apy, setApy] = useState<number>();\n\n    const { price, stableBorrowRateEnabled } = useTokenInfo(token) ?? {};\n    const { availableBorrowsETH } = useUserInfo() ?? {};\n    const borrowCoins = useBorrowCoins() ?? [];\n\n    const address = useCoinAddress(token);\n    useDebtAfter(handle, amount, token, address);\n    const { type } = useAfterState();\n\n    const max = useMemo(() => availableBorrowsETH && price ? fullNumber(availableBorrowsETH / price) : \"0\", [availableBorrowsETH, price]);\n\n    const borrow = useBorrow(address, amount, apy);\n    const reload = useReload();\n\n    const borrowHandle = () => {\n        setLoadingButton(true);\n\n        borrow().then((res: any) => {\n            console.log(res);\n            res.wait().then((res: any) => {\n                console.log(res);\n                message.success(t`操作成功`);\n\n                setLoadingButton(false);\n                setOpen(false);\n                setAmount(undefined);\n                reload();\n            }).catch((error: any) => {\n                setLoadingButton(false);\n                message.error(error.message);\n                console.error(error);\n            });\n        }).catch((error: any) => {\n            setLoadingButton(false);\n            message.error(error.message);\n            console.error(error);\n        });\n    }\n\n    const handleClick = () => {\n        if (!token || !amount) return;\n\n        setOpen(true);\n    }\n\n    useEffect(() => {\n        if (borrowCoins?.length && !token) setToken(borrowCoins[0]);\n    }, [borrowCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <>\n        <Handle\n            type=\"Borrow\"\n            max={max}\n            labelText={<Trans>借币：</Trans>}\n            labelTips={<Trans>从Aave中借贷。在借款前您需要储蓄资产作为抵押物。</Trans>}\n            rightText={<InputMax max={max} />}\n            coins={borrowCoins}\n            inputValue={amount ?? \"\"}\n            selectValue={token ?? \"\"}\n            buttonProps={{\n                text: t`借币`,\n                theme: \"buy\",\n                click: handleClick\n            }}\n            onInputChange={setAmount}\n            onSelectChange={setToken}\n        />\n\n        <Modal\n            open={open}\n            width={470}\n            title=\"Select your interest rate\"\n            cancelButtonProps={{\n                onClick() {\n                    setOpen(false);\n                }\n            }}\n            confirmButtonProps={{\n                text: t`借币`,\n                loading: loadingButton,\n                onClick: borrowHandle\n            }}\n        >\n            <Font fontSize=\"14px\" color=\"#939DA7\" lineHeight=\"21px\" style={{ maxWidth: 380, margin: \"0 auto\" }}>\n                <Trans>\n                    <Font color=\"#939DA7\" fontWeight=\"700\" style={{ display: \"inline\" }}>Stable</Font> would be a good choice if you need to plan around a non-volatile rate over a longer period of time.\n                    <br />\n                    <br />\n                    <Font color=\"#939DA7\" fontWeight=\"700\" style={{ display: \"inline\" }}>Variable</Font> is based on the supply and demand for the selected asset on Aave and is re-calculated every second, meaning the rate will be lower when there is less demand for the asset.\n                    <br />\n                    <br />\n                    You can also switch between the two rates at any point in the future.\n                </Trans>\n            </Font>\n            {!stableBorrowRateEnabled &&\n                <WarnWrapper>\n                    <img src={WARNING_SVG} alt=\"\" />\n                    <Font fontSize=\"14px\"><Trans>This asset is unsupported for stable rate borrow</Trans></Font>\n                </WarnWrapper>}\n            <APYSelect stable={!stableBorrowRateEnabled} onChange={setApy} />\n        </Modal>\n    </>\n}\n\n\nexport const Payback = ({ handle }: { handle: HandleType }) => {\n    const [token, setToken] = useState<string>();\n    const [amount, setAmount] = useState<string>();\n    const [loadingButton, setLoadingButton] = useState<boolean>();\n\n    const [symbol, apy] = token ? token.split(\"_\") : [];\n\n    const address = useCoinAddress(symbol);\n    useDebtAfter(handle, amount, token, address);\n    const { type } = useAfterState();\n\n    const borrowMap = useBorrowMap();\n    const boorowCoins = useMemo(() => borrowMap ? Object.entries(borrowMap).map(([key, item]) => ({ value: key, name: item.symbol, loanType: item.loanType })) : [], [borrowMap]);\n\n    const { status: ethStatus, balances: ethBalances } = useWalletState();\n    const { status: supplyStatus, balance: supplayBalances, reload: reloadTokenBalances } = useTokenBalances(symbol === \"ETH\" ? undefined : symbol);\n\n    const max = useMemo(() => {\n        if (token == \"ETH\" && ethBalances) {\n            return fullNumber(ethBalances);\n        } else if (token !== \"ETH\" && supplayBalances) {\n            return fullNumber(supplayBalances);\n        }\n        return \"0\";\n    }, [token, ethBalances, supplayBalances]);\n\n    const loading = token === \"ETH\" ? ethStatus === WalletStatusEnums.LOADING : supplyStatus === TokenStatusEnums.LOADING;\n\n    const payback = usePayback(address, amount, apy ? Number(apy) - 1 : undefined);\n    const reload = useReload();\n\n    const handleClick = () => {\n        setLoadingButton(true);\n\n        payback().then((res: any) => {\n            console.log(res);\n            res.wait().then((res: any) => {\n                console.log(res);\n                message.success(t`操作成功`);\n\n                setLoadingButton(false);\n                setAmount(undefined);\n                reload();\n                reloadTokenBalances();\n            }).catch((error: any) => {\n                setLoadingButton(false);\n                message.error(error.message);\n                console.error(error);\n            });\n        }).catch((error: any) => {\n            setLoadingButton(false);\n            message.error(error.message);\n            console.error(error);\n        });\n    }\n\n    useEffect(() => {\n        if (boorowCoins?.length && !token) setToken(boorowCoins[0].value);\n    }, [boorowCoins]);\n\n    useEffect(() => {\n        if (type !== handle) setAmount(undefined);\n    }, [type]);\n\n    return <Handle\n        isAuthorize\n        type=\"Payback\"\n        max={max}\n        labelText={<Trans>还币：</Trans>}\n        labelTips={<Trans>还贷资产。</Trans>}\n        rightText={loading ? t`加载中~` : <InputMax max={max} />}\n        coins={boorowCoins}\n        inputValue={amount}\n        selectValue={token ?? \"\"}\n        selectOptionItemRender={<SelectOptionItem />}\n        buttonProps={{\n            text: t`还币`,\n            theme: \"sell\",\n            loading: loadingButton,\n            click: handleClick\n        }}\n        onInputChange={setAmount}\n        onSelectChange={setToken}\n    />\n}\n\nconst Debt = () => {\n    const reload = useReloadAfter();\n\n    useEffect(() => {\n        reload();\n    }, []);\n\n    return <TabPanelGrid>\n        <Borrow handle=\"Borrow\" />\n        <Payback handle=\"Payback\" />\n    </TabPanelGrid>\n}\n\nexport default Debt;","import { useState } from 'react';\nimport styled from 'styled-components';\nimport { t } from \"@lingui/macro\";\n\nimport { useState as useUserState } from '../../state/user';\n\nimport Advanced from './Advanced';\nimport Collateral from './Collateral';\nimport Debt from './Debt';\n\nconst ContorlWrapper = styled.div`\nmargin-bottom: 25px;\n`;\n\n\nconst TabWrapper = styled.div`\ndisplay: grid;\ngrid-template-columns: repeat(3, 1fr);\ncolumn-gap: 25px;\n`;\n\nconst TabTitle = styled.div`\nfont-family: PingFangSC-Medium;\nfont-size: 16px;\ncolor: #fff;\nheight: 52px;\nline-height: 22px;\ntext-align: center;\npadding: 15px 0;\nborder-radius: 3px 3px 0 0;\nbackground: var(--tab-title);\ntransition: color .3s ease;\ncursor: pointer;\n\n&.active {\n    background: var(--tab-title-active);\n}\n\n&:hover:not(.active) {\n    color: rgba(255,255,255,.7);\n}\n`;\n\nconst TabPanel = styled.div`\npadding: 40px 60px;\nborder-radius: 0 0 3px 3px;\nbackground: var(--tab-panel);\n`;\n\nconst Tab: React.FC<{\n    values?: {\n        title: string | React.ReactNode\n        content?: string | React.ReactNode\n    }[]\n    active?: number\n}> = (props) => {\n    const { values, active: propsActive } = props;\n\n    const [active, setActive] = useState(propsActive ?? 0);\n\n    const handleChange = (key: number) => {\n        setActive(key);\n    }\n\n    return <>\n        <TabWrapper>\n            {values?.length && values.map((item, key) =>\n                <TabTitle\n                    key={key}\n                    className={key === active ? \"active\" : \"\"}\n                    onClick={() => handleChange(key)}\n                >\n                    {item.title}\n                </TabTitle>\n            )}\n        </TabWrapper>\n        <TabPanel>\n            {values?.length && values[active]?.content || \"\"}\n        </TabPanel>\n    </>\n}\n\nconst Control = () => {\n    const { address } = useUserState();\n\n    return address ?\n        <ContorlWrapper>\n            <Tab\n                active={0}\n                values={[\n                    { title: t`做多`, content: <Advanced /> },\n                    { title: t`质押`, content: <Collateral /> },\n                    { title: t`债务`, content: <Debt /> },\n                ]}\n            />\n        </ContorlWrapper> :\n        null;\n}\n\nexport default Control;","import React, { createContext, useContext } from 'react';\nimport styled from 'styled-components';\nimport { Trans } from '@lingui/macro';\n\nimport { EmptyLoading, EmptyNoData } from '../Empty';\nimport { Font } from '../../styled';\n\ninterface TableProps {\n    dataSource: { [k: string]: any }[]\n    loading?: boolean\n    afterBg?: string\n    afterColor?: string\n    afterSource?: any\n}\n\ntype TextAlign = \"left\" | \"center\" | \"right\";\n\ninterface TableColumnProps {\n    first?: boolean\n    title?: string\n    dataKey?: string\n    width?: string\n    align?: TextAlign\n    render?: (value: any, index: number, data: any) => React.ReactNode\n}\n\nexport interface TableContextProps {\n    header?: boolean\n    index?: number\n    after?: boolean\n    item?: { [k: string]: any }\n}\n\n// @ts-ignore\nconst TableContext = createContext<TableContextProps>({});\n\nconst TableWrapper = styled.div`\n    border-radius: 4px;\n    background: var(--table);\n    overflow: hidden;\n`;\n\nconst TableRow = styled.div<{ border?: string }>`\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 10px 20px;\ntransition: all 0.3s ease;\n\n&:not(:last-child) {\n    border-bottom: 1px solid ${({ border }) => border ?? \"var(--table-line)\"};\n}\n`;\n\nconst TableHeader = styled.div`\nfont-size: 13px;\ncolor: rgba(255,255,255,0.4);\nline-height: 28px;\nbackground-color: var(--table-header);\n`;\n\nconst TableBody = styled.div`\nfont-size: 14px;\nfont-weight: 500;\ncolor: #fff;\nline-height: 36px;\nbackground-color: var(--table-body);\n\n\n`;\n\nconst TableColumnWrapper = styled.div<{ width?: string, align?: TextAlign }>`\n/* display: flex; */\n${({ width }) => width && `width: ${width};`}\n${({ align }) => align && `text-align: ${align};`}\n`;\n\nconst Table: React.FC<TableProps> = (props) => {\n    const { dataSource, afterBg, afterColor, afterSource, loading = false, children } = props;\n\n    const { after, ...other } = afterSource ?? {};\n\n    return <TableWrapper>\n        <TableHeader>\n            <TableContext.Provider value={{ header: true }}>\n                <TableRow>{children}</TableRow>\n            </TableContext.Provider>\n        </TableHeader>\n        <TableBody>\n            {loading ? <EmptyLoading /> :\n                afterSource ? <TableAfter bg={afterBg} border={afterColor}>\n                    <TableContext.Provider value={{ item: other, index: 0 }}>\n                        <TableRow border={afterColor}>{children}</TableRow>\n                    </TableContext.Provider>\n                    <TableContext.Provider value={{ item: after, index: 1, after: true }}>\n                        <TableRow border={afterColor}>{children}</TableRow>\n                    </TableContext.Provider>\n                </TableAfter> :\n\n                    !dataSource?.length ? <EmptyNoData /> :\n                        dataSource.map((item, index) =>\n                            <TableContext.Provider value={{ item, index }} key={index}>\n                                <TableRow>{children}</TableRow>\n                            </TableContext.Provider>)}\n        </TableBody>\n    </TableWrapper>\n}\n\nexport const TableAfter = styled.div<{ bg?: string, border?: string }>`\n    ${({ bg }) => bg && `background: ${bg};`}\n    ${({ border }) => border && `border-bottom: 4px solid ${border};`}\n`;\n\nexport const TableColumn: React.FC<TableColumnProps> = (props) => {\n    const { first, title, dataKey, width, align, render } = props;\n    const { header, item, index, after } = useContext<TableContextProps>(TableContext);\n\n    if (header) {\n        return <TableColumnWrapper {...{ width, align }}>\n            <Font color=\"rgba(255,255,255,0.8)\" fontSize=\"14px\" fontWeight=\"500\">{title}</Font>\n        </TableColumnWrapper>\n    };\n\n    if (first && after) return <TableColumnWrapper {...{ width, align }}><Trans>之后</Trans>：</TableColumnWrapper>;\n\n    const value = item && dataKey && item[dataKey];\n    // @ts-ignore\n    if (render) return <TableColumnWrapper {...{ width, align }}>{render && render(value, index, item)}</TableColumnWrapper>;\n\n    return <TableColumnWrapper {...{ width, align }}>{value}</TableColumnWrapper>;\n}\n\nexport default Table;\n\nexport {\n    TableContext,\n    TableRow\n}","import React from 'react';\nimport styled from 'styled-components';\n\nimport AAVEIconSVG from '../../assets/coin/AAVE.svg';\nimport BATIconSVG from '../../assets/coin/BAT.svg';\nimport BUSDIconSVG from '../../assets/coin/BUSD.svg';\nimport DAIIconSVG from '../../assets/coin/DAI.svg';\nimport ENJIconSVG from '../../assets/coin/ENJ.svg';\nimport ETHIconSVG from '../../assets/coin/ETH.svg';\nimport KNCLIconSVG from '../../assets/coin/KNCL.svg';\nimport LINKIconSVG from '../../assets/coin/LINK.svg';\nimport MANAIconSVG from '../../assets/coin/MANA.svg';\nimport MKRIconSVG from '../../assets/coin/MKR.svg';\nimport RENIconSVG from '../../assets/coin/REN.svg';\nimport SNXIconSVG from '../../assets/coin/SNX.svg';\nimport SUSDIconSVG from '../../assets/coin/SUSD.svg';\nimport TUSDIconSVG from '../../assets/coin/TUSD.svg';\nimport UNIIconSVG from '../../assets/coin/UNI.svg';\nimport USDCIconSVG from '../../assets/coin/USDC.svg';\nimport USDTIconSVG from '../../assets/coin/USDT.svg';\nimport WBTCIconSVG from '../../assets/coin/WBTC.svg';\nimport YFIIconSVG from '../../assets/coin/YFI.svg';\nimport ZRXIconSVG from '../../assets/coin/ZRX.svg';\n\n\nconst ICON_DATA = {\n    \"AAVE\": AAVEIconSVG,\n    \"BAT\": BATIconSVG,\n    \"BUSD\": BUSDIconSVG,\n    \"DAI\": DAIIconSVG,\n    \"ENJ\": ENJIconSVG,\n    \"ETH\": ETHIconSVG,\n    \"KNCL\": KNCLIconSVG,\n    \"LINK\": LINKIconSVG,\n    \"MANA\": MANAIconSVG,\n    \"MKR\": MKRIconSVG,\n    \"REN\": RENIconSVG,\n    \"SNX\": SNXIconSVG,\n    \"SUSD\": SUSDIconSVG,\n    \"TUSD\": TUSDIconSVG,\n    \"UNI\": UNIIconSVG,\n    \"USDC\": USDCIconSVG,\n    \"USDT\": USDTIconSVG,\n    \"WBTC\": WBTCIconSVG,\n    \"YFI\": YFIIconSVG,\n    \"ZRX\": ZRXIconSVG,\n};\n\n\n\nconst CoinIconStyle = styled.div`\ndisplay: flex;\nalign-items: center;\n\n.coin {\n    width: 30px;\n    height: 30px;\n    margin-right: 13px;\n    border-radius: 50%;\n    overflow: hidden;\n\n    img {\n        width: 100%;\n    }\n}\n`;\n\n\ninterface CoinIconInterface {\n    name: string\n}\n\nconst CoinIcon: React.FC<CoinIconInterface> = ({ name }) => {\n\n    // @ts-ignore\n    const icon_url = ICON_DATA[name];\n\n    return <CoinIconStyle>\n        <span className=\"coin\"><img src={icon_url} alt=\"\" /></span>\n        {name}\n    </CoinIconStyle>\n\n}\n\nexport default CoinIcon;\n","export default __webpack_public_path__ + \"static/media/AAVE.0520546d.svg\";","export default __webpack_public_path__ + \"static/media/BAT.1c77fe52.svg\";","export default __webpack_public_path__ + \"static/media/BUSD.10b28da3.svg\";","export default __webpack_public_path__ + \"static/media/DAI.481ce399.svg\";","export default __webpack_public_path__ + \"static/media/ENJ.f27940c3.svg\";","export default __webpack_public_path__ + \"static/media/ETH.68fbb6d0.svg\";","export default __webpack_public_path__ + \"static/media/KNCL.f3aab2a5.svg\";","export default __webpack_public_path__ + \"static/media/LINK.fd931317.svg\";","export default __webpack_public_path__ + \"static/media/MANA.45ff0845.svg\";","export default __webpack_public_path__ + \"static/media/MKR.7adf45fb.svg\";","export default __webpack_public_path__ + \"static/media/REN.e8a03ad6.svg\";","export default __webpack_public_path__ + \"static/media/SNX.a3999e31.svg\";","export default __webpack_public_path__ + \"static/media/SUSD.0fec1ad1.svg\";","export default __webpack_public_path__ + \"static/media/TUSD.61e43d7e.svg\";","export default __webpack_public_path__ + \"static/media/UNI.fa43859d.svg\";","export default __webpack_public_path__ + \"static/media/USDC.a9ffc378.svg\";","export default __webpack_public_path__ + \"static/media/USDT.055db303.svg\";","export default __webpack_public_path__ + \"static/media/WBTC.83a6df6e.svg\";","export default __webpack_public_path__ + \"static/media/YFI.fe3fb739.svg\";","export default __webpack_public_path__ + \"static/media/ZRX.b402d1e5.svg\";","import { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { Trans, t } from '@lingui/macro';\n\nimport Tips, { TipsPrice } from '../../components/Tips';\nimport Table, { TableColumn } from '../../components/Table';\n\nimport {\n    MarketStatusEnums,\n    useState as useMatketState,\n    useEthPrice,\n    useMarketMap,\n    useSupplyMap,\n    useBorrowMap\n} from '../../state/market';\nimport { useState as useAfterState, useAfterSupply, useAfterBorrow } from '../../state/after';\n\nimport { Font, Flex } from '../../styled';\n\nimport { getRatio, numberDelimiter, numberRuler, fullNumber, ethToPriceTips, ethToPrice, getTableTheme } from '../../utils';\n\nimport CoinIcon from './CoinIcon';\n\ninterface MarketInterface {\n    price: string\n    symbol: string\n    amount: string\n    totalSupply: string\n    totalBorrow: string\n}\n\nconst Wrapper = styled.div`\nmargin: 25px 0 45px;\n`;\n\nconst Title = styled.div`\nmargin-bottom: 25px;\n`;\n\nconst renderCoinIcon = (value: any) => <CoinIcon name={value} />;\nconst renderRatioText = (value: number) => getRatio(value * 100);\nconst renderAmountTips = ({ symbol, amount }: MarketInterface) => <Flex><Tips text={fullNumber(amount)} ><div>{numberRuler(amount)} {symbol}</div></Tips></Flex>;\nconst renderPriceTips = (value: string, price?: number) => <Flex><TipsPrice price={ethToPriceTips(value, price)} /></Flex>;\nconst renderRatioTips = (value: number) => {\n    const ratio = value * 100;\n\n    return <Flex><Tips text={fullNumber(ratio)} ><div>{getRatio(ratio)}</div></Tips></Flex>;\n};\nconst renderRatioDisabledTips = (value: number) => <Flex><Tips text={t`不可用`} ><div style={{ opacity: 0.5 }}>{getRatio(value * 100)}</div></Tips></Flex>;\nconst renderSupplyTips = ({ price: ethPrice, totalSupply }: MarketInterface, price?: number) => {\n    const [priceStr, priceUnit] = ethToPrice(Number(ethPrice) * Number(totalSupply), price);\n\n    return <Flex><TipsPrice price={[numberRuler(fullNumber(priceStr)), numberDelimiter(fullNumber(priceStr)), priceUnit]} /></Flex>\n};\nconst renderApplyTips = ({ price: ethPrice, symbol, totalSupply, totalBorrow }: MarketInterface, price?: number) => {\n    const supply = Number(totalSupply);\n    const borrow = Number(totalBorrow);\n\n    const ratio = getRatio(borrow / supply * 100);\n    const circulate = supply - borrow;\n\n    const [priceStr, priceUnit] = ethToPrice(Number(ethPrice) * circulate, price);\n\n    const amount = numberRuler(circulate);\n\n    return <Flex justifyContent=\"flex-end\">\n        <Tips text={`市场流动性: ${amount} ${symbol} (${priceUnit ?? \"\"}${numberRuler(priceStr)})`} >\n            <div>{ratio}</div>\n        </Tips>\n    </Flex>\n};\n\nconst MarketInfo = () => {\n    const { marketStatus, loanStatus } = useMatketState();\n\n    const { type, loading } = useAfterState();\n    const [bg, color] = useMemo(() => getTableTheme(type), [type]) ?? [];\n\n    const price = useEthPrice();\n\n    const marketMap = useMarketMap();\n    const supplyMap = useSupplyMap();\n    const borrowMap = useBorrowMap();\n\n    const marketData = useMemo(() => marketMap ? Object.values(marketMap) : [], [marketMap]);\n    const supplyData = useMemo(() => supplyMap ? Object.values(supplyMap) : null, [supplyMap]);\n    const borrowData = useMemo(() => borrowMap ? Object.values(borrowMap) : null, [borrowMap]);\n\n    const afterSupply = useAfterSupply();\n    const afterBorrow = useAfterBorrow();\n\n    console.log(\"MarketInfo\", marketData, supplyData, borrowData, afterSupply, afterBorrow);\n\n    return <>\n        {supplyData ? <Wrapper>\n            <Title>\n                <Font fontSize=\"20px\"><Trans>供应中</Trans></Font>\n            </Title>\n            <Table\n                dataSource={supplyData ?? []}\n                afterSource={afterSupply}\n                afterBg={bg}\n                afterColor={color}\n                loading={loanStatus === MarketStatusEnums.LOADING}\n            >\n                <TableColumn first width=\"196px\" title={t`资产`} dataKey=\"symbol\" render={renderCoinIcon} />\n                <TableColumn width=\"168px\" title={t`已供应`} render={(_, __, value) => renderAmountTips(value)} />\n                <TableColumn width=\"196px\" title={t`已供应($)`} dataKey=\"priceETH\" render={(value) => renderPriceTips(value, price)} />\n                <TableColumn width=\"190px\" title={t`供应 APY`} dataKey=\"rate\" render={renderRatioTips} />\n                <TableColumn width=\"120px\" title={t`抵押因素`} dataKey=\"collateralFactor\" render={renderRatioText} />\n                <TableColumn width=\"100px\" align=\"right\" title={t`抵押物`} />\n            </Table>\n        </Wrapper> : \"\"}\n\n        {borrowData ? <Wrapper>\n            <Title>\n                <Font fontSize=\"20px\"><Trans>贷款中</Trans></Font>\n            </Title>\n            <Table\n                dataSource={borrowData ?? []}\n                afterSource={afterBorrow}\n                afterBg={bg}\n                afterColor={color}\n                loading={loanStatus === MarketStatusEnums.LOADING}\n            >\n                <TableColumn first width=\"140px\" title={t`资产`} dataKey=\"symbol\" render={renderCoinIcon} />\n                <TableColumn width=\"160px\" title={t`已借贷`} render={(_, __, value) => renderAmountTips(value)} />\n                <TableColumn width=\"170px\" title={t`已借贷($)`} dataKey=\"priceETH\" render={(value) => renderPriceTips(value, price)} />\n                <TableColumn width=\"140px\" title={t`贷款 APY`} dataKey=\"rate\" render={renderRatioTips} />\n                <TableColumn width=\"160px\" title={t`Interest Rate`} dataKey=\"loanType\" render={(value) => value === 2 ? t`Stable` : t`Variable`} />\n                <TableColumn width=\"190px\" title={t`Change interest rate`} />\n                <TableColumn width=\"100px\" align=\"right\" title={t`限制`} dataKey=\"ratio\" render={renderRatioText} />\n            </Table>\n        </Wrapper> : \"\"}\n\n        <Wrapper>\n            <Title>\n                <Flex justifyContent=\"space-between\">\n                    <Font fontSize=\"20px\"><Trans>市场信息</Trans></Font>\n                    {/* <div>仅显示自有资产</div> */}\n                </Flex>\n            </Title>\n            <Table dataSource={marketData} loading={marketStatus === MarketStatusEnums.LOADING}>\n                <TableColumn width=\"120px\" title={t`资产`} dataKey=\"symbol\" render={renderCoinIcon} />\n                <TableColumn width=\"120px\" title={t`价格`} dataKey=\"price\" render={(value) => renderPriceTips(value, price)} />\n                <TableColumn width=\"120px\" title={t`供应 APY`} dataKey=\"supplyRate\" render={renderRatioTips} />\n                <TableColumn width=\"120px\" title={t`抵押因素`} dataKey=\"collateralFactor\" render={renderRatioText} />\n                <TableColumn width=\"190px\" title={t`Variable B. APY`} dataKey=\"borrowRateVariable\" render={renderRatioTips} />\n                <TableColumn width=\"160px\" title={t`Stable B. APY`} dataKey=\"borrowRateStable\"\n                    render={(value, _, { stableBorrowRateEnabled }) =>\n                        stableBorrowRateEnabled ? renderRatioTips(value) : renderRatioDisabledTips(value)\n                    }\n                />\n                <TableColumn width=\"120px\" title={t`市场规模`} dataKey=\"totalSupply\" render={(_, __, data) => renderSupplyTips(data, price)} />\n                <TableColumn width=\"110px\" align=\"right\" title={t`利用率`} render={(_, __, data) => renderApplyTips(data, price)} />\n            </Table>\n        </Wrapper>\n    </>\n}\n\n\nexport default MarketInfo;","import React, { useEffect, isValidElement } from 'react';\nimport styled from 'styled-components';\n\n\nimport Wallet from '../../components/Wallet';\nimport Lang from '../../components/Lang';\n\nimport { useUserInfo } from '../../hooks/contract/useUserInfo';\nimport { useMarketInit } from '../../hooks/contract/useMarketInfo';\nimport { useReset } from '../../hooks/contract/reload';\n\nimport { useState as useWalletState, WalletStatusEnums } from '../../state/wallet';\n\nimport { Flex, Grid, Font, Content } from '../../styled';\n\nimport { AAVE_SVG } from '../../utils/images';\n\nimport UserInfo from './UserInfo';\nimport Control from './Control';\nimport MarketInfo from './MarketInfo';\n\n\nconst HomeWrapper = styled.div`\npadding-bottom: 25px;\n`;\n\nexport const TitleWrapper = styled.div`\npadding: 25px 0;\nmargin-bottom: 20px;\nborder-bottom: 1px solid var(--theme);\n\n.logo {\n    width: 30px;\n    margin-right: 10px;\n}\n`;\n\nconst Title = ({ action }: { action?: string | React.ReactNode }) => {\n    return <TitleWrapper>\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\n            <Flex alignItems=\"center\">\n                <img className=\"logo\" src={AAVE_SVG} alt=\"\" />\n                <Font color=\"#fff\" fontSize=\"28px\" fontWeight=\"700\">Aave</Font>\n            </Flex>\n\n            {action ? isValidElement(action) ? action : <Font>{action}</Font> : null}\n        </Flex>\n    </TitleWrapper>\n}\n\nconst TitleAction = () => {\n    return <Grid template=\"auto auto\" columGap=\"10px\">\n        <Wallet />\n        <Lang />\n    </Grid>\n}\n\nconst Home = () => {\n    const reset = useReset();\n    const { status } = useWalletState();\n\n    useUserInfo(status === WalletStatusEnums.SUCEESS);\n    useMarketInit(status === WalletStatusEnums.SUCEESS);\n\n    useEffect(() => {\n        if (!status) {\n            reset();\n        }\n    }, [status]);\n\n    return <HomeWrapper>\n        <Content>\n            <Title action={<TitleAction />} />\n\n            <UserInfo />\n            <Control />\n            <MarketInfo />\n        </Content>\n    </HomeWrapper>\n}\n\n\nexport default Home;","import React, { StrictMode } from 'react';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport { Web3ReactProvider } from '@web3-react/core';\nimport { Web3Provider } from '@ethersproject/providers';\n\nimport { WalletManager } from '../components/Wallet';\n\nimport { Body } from '../styled';\n\nimport Home from './Home';\n\nimport './App.scss';\n\nfunction getLibrary(provider: any): Web3Provider {\n  const library = new Web3Provider(provider, 'any')\n  library.pollingInterval = 15000\n  return library\n}\n\n\nfunction App() {\n  return (\n    <StrictMode>\n        <Web3ReactProvider getLibrary={getLibrary}>\n          <WalletManager />\n          <Body>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n            </Switch>\n          </Body>\n        </Web3ReactProvider>\n    </StrictMode>\n  );\n}\n\n\nexport default withRouter(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { LanguageProvider } from './i18n';\n\nimport store from './state';\n\n\nimport './index.css';\nimport App from './pages/App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <LanguageProvider>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </LanguageProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}